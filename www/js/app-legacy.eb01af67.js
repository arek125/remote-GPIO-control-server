(function(t){function a(a){for(var s,r,n=a[0],l=a[1],c=a[2],m=0,u=[];m<n.length;m++)r=n[m],o[r]&&u.push(o[r][0]),o[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(a);while(u.length)u.shift()();return i.push.apply(i,c||[]),e()}function e(){for(var t,a=0;a<i.length;a++){for(var e=i[a],s=!0,n=1;n<e.length;n++){var l=e[n];0!==o[l]&&(s=!1)}s&&(i.splice(a--,1),t=r(r.s=e[0]))}return t}var s={},o={app:0},i=[];function r(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=s,r.d=function(t,a,e){r.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,a){if(1&a&&(t=r(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)r.d(e,s,function(a){return t[a]}.bind(null,s));return e},r.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(a,"a",a),a},r.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=a,n=n.slice();for(var c=0;c<n.length;c++)a(n[c]);var d=l;i.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"034f":function(t,a,e){"use strict";var s=e("04f5"),o=e.n(s);o.a},"0408":function(t,a,e){"use strict";var s=e("0a1e"),o=e.n(s);o.a},"04f5":function(t,a,e){},"0a1e":function(t,a,e){},"0e65":function(t,a,e){},"13e8":function(t,a,e){},"20b0":function(t,a,e){},"45d6":function(t,a,e){"use strict";var s=e("13e8"),o=e.n(s);o.a},4678:function(t,a,e){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(t){var a=i(t);return e(a)}function i(t){var a=s[t];if(!(a+1)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a}o.keys=function(){return Object.keys(s)},o.resolve=i,t.exports=o,o.id="4678"},"56d7":function(t,a,e){"use strict";e.r(a);e("cadf"),e("551c");var s=e("2b0e"),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"off-canvas off-canvas-sidebar-show",attrs:{id:"app"}},[e("a",{staticClass:"off-canvas-toggle btn btn-link btn-action",on:{click:function(a){t.sidebarActive=!0}}},[e("i",{staticClass:"icon icon-menu"})]),e("div",{staticClass:"off-canvas-sidebar",class:{active:t.sidebarActive},attrs:{id:"sidebar-id"}},[t._m(0),e("div",{staticClass:"divider"}),e("ul",{staticClass:"nav"},[e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/"}},[e("a",[t._v("Home")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/outputs"}},[e("a",[t._v("Outputs")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/inputs"}},[e("a",[t._v("Inputs")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/pwms"}},[e("a",[t._v("Pwm's")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/chains"}},[e("a",[t._v("Chains")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/actions"}},[e("a",[t._v("Scheduled actions")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/sensors"}},[e("a",[t._v("Sensors")])]),e("div",{staticClass:"divider"}),t.$route.meta.protected&&!t.$cookies.isKey("session")?e("router-link",{staticClass:"nav-item",attrs:{"active-class":"active",tag:"li",to:"/login"}},[e("a",[t._v("Login")])]):t.$route.meta.protected&&t.$cookies.isKey("session")?e("li",{staticClass:"nav-item",on:{click:function(a){t.$cookies.remove("session"),t.$cookies.remove("encKey"),t.$forceUpdate()}}},[e("a",{attrs:{href:""}},[t._v("Logout")])]):t._e()],1)]),e("a",{staticClass:"off-canvas-overlay",on:{click:function(a){t.sidebarActive=!1}}}),e("div",{staticClass:"off-canvas-content"},[e("router-view"),e("vue-progress-bar")],1)])},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:e("cf05")}})])}],r=(e("6b54"),e("c198")),n=e.n(r),l=e("f8d5"),c=e.n(l),d=e("1132"),m=e.n(d),u=e("17e1"),p=e.n(u),h={methods:{encrypt:function(t,a){a=c.a.parse(a);var e=p.a.random(16),s=n.a.encrypt(t,a,{iv:e});return e.concat(s.ciphertext).toString(m.a)},decrypt:function(t,a){a=c.a.parse(a);var e=m.a.parse(t),s=e.clone();s.sigBytes=16,s.clamp(),e.words.splice(0,4),e.sigBytes-=16;var o=n.a.decrypt({ciphertext:e},a,{iv:s});return o.toString(c.a)}}},v=(e("ac6a"),e("28a5"),{methods:{parseReq:function(t){return this.$route.meta.protected?this.$cookies.get("session")+";"+this.encrypt(t+";WEB",this.$cookies.get("encKey"))+";":"1;"+t+";WEB;"},parseRes:function(t){var a=t.split(";");if(Array.isArray(a)){if("false"===a[0])throw Error(a[1]);return this.$route.meta.protected?this.decrypt(a[1],this.$cookies.get("encKey")).split(";"):a}throw Error("Not an array in response")},isGPIOnumber:function(t){for(var a=0;a<t.length;a++)if(!/^(2|3|4|17|27|22|10|9|11|5|6|13|19|26|14|15|18|23|24|25|8|7|12|16|20|21)$/g.test(t[a]))return t[a];return-1},stateButton:function(t,a){return 1===t&&!a||0===t&&a?"btn-success":0===t&&!a||1===t&&a?"btn-code":"btn-warning"},outState:function(t){return t=parseInt(t),0===t?"OFF":1===t?"ON":"OPPOSITE"},pwmState:function(t,a,e){var s=this.outState(t);return isNaN(a)||""===a||(s+="/"+a+"%"),isNaN(e)||""===e||(s+="/"+e+"Hz"),s},doPost:function(t){var a=this;return this.$Progress.start(),this.loading=!0,this.$http.post("/",this.parseReq(t),{headers:{"Content-type":"raw"}}).then(function(t){return a.$Progress.finish(),a.parseRes(t.data)}).catch(function(t){throw a.$Progress.fail(),Error(t.message)}).then(function(t){return a.loading=!1,t})},doQPost:function(t){var a=this;return this.$http.post("/",this.parseReq(t),{headers:{"Content-type":"raw"}}).then(function(t){return a.parseRes(t.data)})},doPosts:function(t){var a=this;return this.$Progress.start(),this.loading=!0,Promise.all(t).catch(function(t){return a.$Progress.fail(),t}).then(function(){a.$Progress.finish(),a.loading=!1})}},data:function(){return{loading:!1}}}),f=e("26b9"),g=e.n(f),D=e("2ead"),C=e.n(D),b=e("1052"),_=e.n(b),y=e("2310"),w=e.n(y);s["a"].mixin(h),s["a"].mixin(v),s["a"].use(g.a,{color:"rgb(143, 255, 199)",failedColor:"red",height:"2px"}),s["a"].use(C.a),s["a"].use(w.a,_.a);var T,$,I={data:function(){return{sidebarActive:!1}}},k=I,A=(e("034f"),e("2877")),P=Object(A["a"])(k,o,i,!1,null,null,null),x=P.exports,S=e("8c4f"),M=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Home"},[e("div",{staticClass:"modal",class:{active:t.countDownModal.active}},[e("a",{staticClass:"modal-overlay"}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[t._v("\n                  Page will realod in "+t._s(t.countDownModal.currentTime)+" seconds.\n              ")])])])]),e("div",{staticClass:"modal",class:{active:t.logsModalActive}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.logsModalActive=!1}}}),e("div",{staticClass:"modal-container log-container"},[e("div",{staticClass:"modal-header"},[e("div",{staticClass:"modal-title h5"},[t._v("Server Logs")]),e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.logsModalActive=!1}}})]),e("div",{staticClass:"modal-body"},[t.logsModalActive?e("ServerLogs"):t._e()],1)])]),e("div",{staticClass:"modal",class:{active:t.modalMCL.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalMCL.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalMCL.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v("Main command line")]),t.modalMCL.errors.length?e("Error",{attrs:{"error-array":t.modalMCL.errors},on:{"close-err":function(a){t.modalMCL.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalMCL.cmdLine,expression:"modalMCL.cmdLine"}],staticClass:"form-input",attrs:{type:"text",placeholder:"Main command line"},domProps:{value:t.modalMCL.cmdLine},on:{input:function(a){a.target.composing||t.$set(t.modalMCL,"cmdLine",a.target.value)}}}),e("p",{staticClass:"text-gray"},[t._v("-mode 'mode' # wwwOnly or mobileOnly, by default both modes are on")]),e("p",{staticClass:"text-gray"},[t._v("-mobileport 'port number' #for tcp/udp mobile connection, default is 8888")]),e("p",{staticClass:"text-gray"},[t._v("-wwwwport 'port number' #for http connection, default is 80")]),e("p",{staticClass:"text-gray"},[t._v("-password 'password string' #for encryprion,if this parameter is not set encrypted communication is disabled")]),e("p",{staticClass:"text-gray"},[t._v("-debug #for debugging purposes")]),e("p",{staticClass:"text-gray"},[t._v("-db_path 'database file path string' #to set diffrent database file path")]),e("p",{staticClass:"text-gray"},[t._v("-ds18b20 #to enalbe ds18b20 sensors support all connected to 1wire")]),e("p",{staticClass:"text-gray"},[t._v("-dht '11 or 22 or AM2302' 'GPIO BCM PIN number' #to enalbe dht* sensor support")]),e("p",{staticClass:"text-gray"},[t._v("-tsl2561 'gain from 1-16 or 0 for auto gain' #to enalbe tsl2561 sensor support")])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.comAndReload("UpdateMCL;"+t.modalMCL.cmdLine,20,"Update cmd line and restart ?")}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"panel column col-4 col-md-12"},[t._m(0),e("div",{staticClass:"panel-nav"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-body"},[e("ul",[e("li",[t._v("Hostname: "+t._s(t.serverInfo.hostname))]),e("li",[t._v("Load: "+t._s(t.serverInfo.load))]),e("li",[t._v("Version: "+t._s(t.serverInfo.version))]),e("li",[t._v("Up since: "+t._s(t.serverInfo.upSince))]),t._l(t.timeInfo,function(a){return e("li",{key:a},[t._v(t._s(a))])})],2)]),e("div",{staticClass:"panel-footer"},[e("div",{staticClass:"btn-group btn-group-block"},[e("button",{staticClass:"btn",on:{click:function(a){t.openMCLModal()}}},[t._v("Main command line")]),e("button",{staticClass:"btn",on:{click:function(a){t.comAndReload("Server_restart",20,"Restart RGC app ?")}}},[t._v("Restart RGC app")]),e("button",{staticClass:"btn",on:{click:function(a){t.comAndReload("Server_reboot",60,"Reboot server ?")}}},[t._v("Reboot server")]),e("button",{staticClass:"btn",on:{click:function(a){t.logsModalActive=!0}}},[t._v("Server Logs")]),e("button",{staticClass:"btn",on:{click:function(a){t.openLink("https://github.com/arek125/remote-GPIO-control-server/releases")}}},[t._v("Change log")]),e("button",{staticClass:"btn",on:{click:function(a){t.openLink("https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=arek125%40gmail%2ecom&lc=PL&item_name=RGC%20FAMILY&currency_code=USD&bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHostedGuest")}}},[t._v("Donate")]),e("button",{staticClass:"btn",on:{click:function(a){t.openLink("https://github.com/arek125/remote-GPIO-control-server/issues")}}},[t._v("Issue raport")]),t.updateAvalible?e("button",{staticClass:"btn",on:{click:function(a){t.comAndReload("ServerUpdateFromGH",60,"Perform server update now ?")}}},[t._v("Update to "+t._s(t.newTagName)+" ready !")]):t._e()])])]),e("History",{staticClass:"column col-8 hide-md",attrs:{category:"all"}})],1)])])},N=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-header"},[e("div",{staticClass:"panel-title"},[e("h3",[t._v("Home")])])])}],Y=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"toast toast-error"},[e("button",{staticClass:"btn btn-clear float-right",on:{click:function(a){t.$emit("close-err")}}}),""!==t.errorMessage&&null!==t.errorMessage?e("span",[t._v("\n    "+t._s(t.errorMessage)+"\n  ")]):t._e(),t.errorArray.length&&null!==t.errorArray?e("ul",t._l(t.errorArray,function(a,s){return e("li",{key:s},[t._v(t._s(a))])})):t._e()])},O=[],R={name:"Error",props:{errorMessage:{type:String,required:!1},errorArray:{default:function(){return[]},type:Array,required:!1}}},j=R,E=(e("6e21"),Object(A["a"])(j,Y,O,!1,null,null,null)),B=E.exports,H=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.logs.length?e("table",{staticClass:"table table-striped logs"},[t._m(0),e("tbody",t._l(t.logs,function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.time))]),e("td",[t._v(t._s(a.priority))]),e("td",[t._v(t._s(a.message))])])}))]):e("div",{staticClass:"empty centered"},[t._m(1),e("p",{staticClass:"empty-title h5"},[t._v("There are is no logs")])])])},G=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Date")]),e("th",[t._v("Priority")]),e("th",[t._v("Message")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],L={name:"ServerInfo",data:function(){return{logs:[],jsonD:""}},created:function(){this.getData()},methods:{priorityParse:function(t){switch(t){case 0:return"emerg";case 1:return"alert";case 2:return"crit";case 3:return"error";case 4:return"warning";case 5:return"notice";case 6:return"info";case 7:return"debug"}},getData:function(){var t=this;this.doPost("Server_logs_JSON").then(function(a){t.logs=[];for(var e=2;e<a.length;e+=3)t.logs.push({time:t.$moment(parseInt(a[e])/1e3).format("YYYY-MM-DD HH:mm:ss"),priority:t.priorityParse(parseInt(a[e+1])),message:a[e+2]})}).catch(function(a){t.$route.meta.error=a.message,t.$forceUpdate()})}},components:{Error:B}},F=L,U=(e("a71c"),Object(A["a"])(F,H,G,!1,null,null,null)),q=U.exports,z=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"input-group filter"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateFrom,expression:"dateFrom"}],staticClass:"form-input input-sm",attrs:{type:"date",placeholder:"Date from"},domProps:{value:t.dateFrom},on:{input:function(a){a.target.composing||(t.dateFrom=a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateTo,expression:"dateTo"}],staticClass:"form-input input-sm",attrs:{type:"date",placeholder:"Date to"},domProps:{value:t.dateTo},on:{input:function(a){a.target.composing||(t.dateTo=a.target.value)}}}),e("button",{staticClass:"btn input-group-btn btn-sm",on:{click:function(a){t.getHistory()}}},[e("i",{staticClass:"icon icon-refresh centered"})])])]),e("div",{staticClass:"panel-body"},[t.history.length?e("table",{staticClass:"table table-striped"},[t._m(1),e("tbody",t._l(t.history,function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.date))]),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.state))]),e("td",[t._v(t._s(a.by))])])}))]):e("div",{staticClass:"empty centered"},[t._m(2),e("p",{staticClass:"empty-title h5"},[t._v("There are is no data in the selected range")])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},K=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("History")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Date")]),e("th",[t._v("Name")]),e("th",[t._v("Action")]),e("th",[t._v("By")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],W={name:"History",data:function(){return{history:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,dateFrom:"",dateTo:""}},props:["category"],created:function(){this.dateFrom=this.$moment().subtract(30,"days").format("YYYY-MM-DD"),this.dateTo=this.$moment().add(1,"days").format("YYYY-MM-DD"),this.getHistory(),this.$cookies.isKey("hr_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("hr_arTime"))),this.autoRefresh()},beforeDestroy:function(){clearTimeout(this.refreshInterval)},methods:{autoRefresh:function(){var t=this;this.$cookies.set("hr_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(function(){t.getHistory(),t.autoRefresh()},1e3*this.autoRefreshTime))},getHistory:function(){var t=this;this.dateFrom&&this.dateTo&&this.doPost("HR_selByCat;"+this.$moment(this.dateFrom,"YYYY-MM-DD").utc().format("YYYY-MM-DD")+";"+this.$moment(this.dateTo+" 23:59:59","YYYY-MM-DD HH:mm:ss").utc().format("YYYY-MM-DD")+";"+this.category).then(function(a){t.$route.meta.error=null,t.history=[];for(var e=2;e<a.length-1;e+=5)t.history.push({id:parseInt(a[e]),date:t.$moment.utc(a[e+1],"YYYY-MM-DD HH:mm:ss").local().format("YYYY-MM-DD HH:mm:ss"),by:a[e+2],name:a[e+3],state:a[e+4]});t.updateDate=t.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(function(a){t.$route.meta.error=a.message,t.$forceUpdate()})}},components:{Error:B}},Q=W,V=(e("7ee4"),Object(A["a"])(Q,z,K,!1,null,null,null)),J=V.exports,X={name:"Home",mounted:function(){var t=this;this.getSystemInfo().then(function(){return t.doQPost("LastVersion")}).then(function(a){parseFloat(a[2])>parseFloat(t.serverInfo.version)&&(t.updateAvalible=!0),t.newTagName=a[2]})},beforeDestroy:function(){},data:function(){return{countDownModal:{active:!1,currentTime:0},modalMCL:{active:!1,errors:[],cmdLine:""},logsModalActive:!1,serverInfo:{},timeInfo:[],updateAvalible:!1,newTagName:""}},methods:{comAndReload:function(t,a,e){var s=this;confirm(e)&&(this.doPost(t).finally(function(){s.countDownModal.currentTime=a,s.countDownModal.active=!0,setInterval(function(){s.countDownModal.currentTime-=1,s.countDownModal.currentTime||location.reload()},1e3)}),this.modalMCL.active=!1)},getSystemInfo:function(){var t=this;return this.doPost("Server_info").then(function(a){t.serverInfo={hostname:a[2],load:a[3],version:a[4],upSince:t.$moment.utc(a[5],"YYYY-MM-DD HH:mm:ss.SSS").local().format("YYYY-MM-DD HH:mm:ss")},t.timeInfo=[];for(var e=6;e<a.length-1;e++)t.timeInfo.push(a[e])}).catch(function(a){t.$route.meta.error=a.message,t.$forceUpdate()})},openLink:function(t){window.open(t,"_blank")},openMCLModal:function(){var t=this;this.modalMCL.active=!0,this.modalMCL.errors=[],this.doPost("GetMCL").then(function(a){t.modalMCL.cmdLine=a[2]}).catch(function(a){t.modalMCL.errors.push(a.message)})},updateMCLModal:function(){var t=this;this.modalMCL.errors=[],this.doPost("UpdateMCL;"+this.modalMCL.cmdLine).then(function(a){t.modalMCL.active=!1}).catch(function(a){t.modalMCL.errors.push(a.message)})}},components:{Error:B,ServerLogs:q,History:J}},Z=X,tt=(e("cccb"),Object(A["a"])(Z,M,N,!1,null,null,null)),at=tt.exports,et=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"outputs"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("GPIO_Output",{staticClass:"column col-8 col-md-12"}),e("History",{staticClass:"column col-4 hide-md",attrs:{category:"i/o"}})],1)])],1)},st=[],ot=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){t.getOutputs()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){t.openModal("Add new output","","",!1,0,-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.gpio,expression:"modalData.gpio"}],staticClass:"form-input",attrs:{type:"text",id:"gpio",placeholder:"Comma separated GPIO BCM numbers"},domProps:{value:t.modalData.gpio},on:{input:function(a){a.target.composing||t.$set(t.modalData,"gpio",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.reverse,expression:"modalData.reverse"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalData.reverse)?t._i(t.modalData.reverse,null)>-1:t.modalData.reverse},on:{change:function(a){var e=t.modalData.reverse,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&t.$set(t.modalData,"reverse",e.concat([i])):r>-1&&t.$set(t.modalData,"reverse",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.modalData,"reverse",o)}}}),e("i",{staticClass:"form-icon"}),t._v("Reverse\n                                    ")])]),e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalData.type,expression:"modalData.type"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalData,"type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("On/Off switch")]),e("option",{attrs:{value:"1"}},[t._v("Pushbutton")])])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalData.id,expression:"modalData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.outputs.length||t.loading?e("div",{staticClass:"columns"},t._l(t.outputs,function(a,s){return e("div",{key:a.id,staticClass:"tile tile-centered column",class:[t.col]},[e("div",{staticClass:"tile-icon"},[0===a.type?e("button",{staticClass:"btn btn-action btn-lg",class:[t.stateButton(a.state,a.reverse)],on:{click:function(e){t.setState(s,a.id,a.gpio,+!a.state,a.reverse)}}},[e("i",{staticClass:"icon icon-shutdown centered"})]):1===a.type?e("button",{staticClass:"btn btn-action btn-lg",class:[t.stateButton(a.state,a.reverse)],on:{mousedown:function(e){a.prevstate=a.state,t.setState(s,a.id,a.gpio,+!a.state,a.reverse)},mouseup:function(e){t.setState(s,a.id,a.gpio,a.prevstate,a.reverse)}}},[e("i",{staticClass:"icon icon-shutdown centered"})]):t._e()]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[t._v(t._s(a.name))]),e("div",{staticClass:"tile-subtitle text-gray"},[t._v(t._s(t.outputDisc(a.gpio,a.reverse,a.type)))])]),e("div",{staticClass:"tile-action"},[e("div",{staticClass:"dropdown dropdown-right"},[t._m(5,!0),e("ul",{staticClass:"menu"},[e("li",{staticClass:"menu-item",on:{click:function(e){t.setState(s,a.id,a.gpio,+!a.reverse,a.reverse)}}},[t._m(6,!0)]),e("li",{staticClass:"menu-item",on:{click:function(e){t.setState(s,a.id,a.gpio,a.reverse,a.reverse)}}},[t._m(7,!0)]),e("li",{staticClass:"menu-item",on:{click:function(e){t.openModal("Edit: "+a.name,a.name,a.gpio,!!a.reverse,a.type,a.id)}}},[t._m(8,!0)])])])])])})):e("div",{staticClass:"empty centered"},[t._m(4),e("p",{staticClass:"empty-title h5"},[t._v("There are no outputs configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){t.openModal("Add new output","","",!1,0,-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},it=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("GPIO Outputs")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"gpio"}},[t._v("GPIO(BCM)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Act like")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"btn btn-link dropdown-toggle",attrs:{tabindex:"0"}},[e("i",{staticClass:"icon icon-more-vert"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",[e("i",{staticClass:"icon icon-shutdown"}),t._v(" On")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",[e("i",{staticClass:"icon icon-shutdown"}),t._v(" Off")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",[e("i",{staticClass:"icon icon-edit"}),t._v(" Edit")])}],rt=(e("7f7f"),{name:"GPIO_Output",data:function(){return{outputs:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,modalData:{active:!1,id:-1,title:"New output",name:"",gpio:"",prevsGpios:"",reverse:!1,type:0,errors:[],allUsedPins:[]}}},props:{col:{type:String,default:"col-4 col-lg-6 col-sm-12"}},created:function(){this.getOutputs(),this.$cookies.isKey("out_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("out_arTime"))),this.autoRefresh()},beforeDestroy:function(){clearTimeout(this.refreshInterval)},methods:{autoRefresh:function(){var t=this;this.$cookies.set("out_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(function(){t.modalData.active||t.getOutputs(),t.autoRefresh()},1e3*this.autoRefreshTime))},openModal:function(t,a,e,s,o,i){var r=this;this.modalData.active=!0,this.modalData.title=t,this.modalData.name=a,this.modalData.gpio=e,this.modalData.prevsGpios=e,this.modalData.reverse=s,this.modalData.type=o,this.modalData.id=i,this.modalData.allUsedPins=[],this.modalData.errors=[],this.doPost("AllUsedPins_GPIO;out;"+i).then(function(t){for(var a=2;a<t.length-1;a++)r.modalData.allUsedPins.push(t[a])}).catch(function(t){r.modalData.errors.push(t.message)})},modalAction:function(t){var a=this;if(this.modalData.errors=[],!t)if(this.modalData.name||this.modalData.errors.push("Name required !"),/^[0-9]+(,[0-9]+)*$/g.test(this.modalData.gpio)){var e=this.modalData.gpio.split(","),s=this.isGPIOnumber(e);if(-1!=s)this.modalData.errors.push(s+" is not a GPIO BCM number !");else for(var o=0;o<e.length;o++)this.modalData.allUsedPins.indexOf(e[o])>-1&&this.modalData.errors.push(e[o]+" allready in use !")}else this.modalData.errors.push("GPIO must be a number or comma separated numbers !");if(!this.modalData.errors.length){var i="";i=t?"Delete_GPIO_out;"+this.modalData.id+";"+this.modalData.gpio+";"+this.modalData.name:-1===this.modalData.id?"Add_GPIO_out;"+this.modalData.gpio+";"+this.modalData.name+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+ +this.modalData.reverse+";"+this.modalData.type:"Edit_GPIO_out;"+this.modalData.id+";"+this.modalData.gpio+";"+this.modalData.name+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+ +this.modalData.reverse+";"+this.modalData.prevsGpios+";"+this.modalData.type,this.doPost(i).then(function(t){a.getOutputs(),a.modalData.active=!1}).catch(function(t){a.modalData.errors.push(t.message)})}},outputDisc:function(t,a,e){var s="GPIO: "+t;return 0==e?s+="(o)":1==e&&(s+="(p)"),a&&(s+="(r)"),s},getOutputs:function(){var t=this;this.doPost("GPIO_Olist").then(function(a){t.$route.meta.error=null,t.outputs=[];for(var e=2;e<a.length-1;e+=6)t.outputs.push({id:parseInt(a[e]),gpio:a[e+1],state:parseInt(a[e+2]),name:a[e+3],reverse:parseInt(a[e+4]),type:parseInt(a[e+5])});t.updateDate=t.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(function(a){t.$route.meta.error=a.message,t.$forceUpdate()})},setState:function(t,a,e,s,o){var i=this;this.doPost("GPIO_set;"+a+";"+e+";"+s+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+o).then(function(a){i.$route.meta.error=null,i.outputs[t].state=parseInt(a[2])}).catch(function(t){i.$route.meta.error=t.message,i.$forceUpdate()})}},components:{Error:B}}),nt=rt,lt=(e("bfc5"),Object(A["a"])(nt,ot,it,!1,null,null,null)),ct=lt.exports,dt={name:"outputs",components:{Error:B,GPIO_Output:ct,History:J}},mt=dt,ut=Object(A["a"])(mt,et,st,!1,null,null,null),pt=ut.exports,ht=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Inputs"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("GPIO_Input",{staticClass:"column col-8 col-md-12"}),e("History",{staticClass:"column col-4 hide-md",attrs:{category:"i/o"}})],1)])],1)},vt=[],ft=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){t.getInputs()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){t.openModal("Add new input","","",!1,0,-1,-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.gpio,expression:"modalData.gpio"}],staticClass:"form-input",attrs:{type:"number",id:"gpio",placeholder:"Single GPIO BCM number"},domProps:{value:t.modalData.gpio},on:{input:function(a){a.target.composing||t.$set(t.modalData,"gpio",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.reverse,expression:"modalData.reverse"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalData.reverse)?t._i(t.modalData.reverse,null)>-1:t.modalData.reverse},on:{change:function(a){var e=t.modalData.reverse,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&t.$set(t.modalData,"reverse",e.concat([i])):r>-1&&t.$set(t.modalData,"reverse",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.modalData,"reverse",o)}}}),e("i",{staticClass:"form-icon"}),t._v("Reverse\n                                    ")])]),e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalData.bindType,expression:"modalData.bindType"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalData,"bindType",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("None (Read only)")]),e("option",{attrs:{value:"1"}},[t._v("Output on/off switch")]),e("option",{attrs:{value:"2"}},[t._v("Output pushbutton")])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalData.bindType>0,expression:"modalData.bindType > 0"}],staticClass:"form-group",class:{"has-error":!t.modalData.outputs.length}},[t._m(4),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalData.bindId,expression:"modalData.bindId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalData,"bindId",a.target.multiple?e:e[0])}}},t._l(t.modalData.outputs,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalData.outputs.length&&!t.loading,expression:"!modalData.outputs.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add outputs to make them visible here.")])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalData.id,expression:"modalData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.inputs.length||t.loading?e("div",{staticClass:"columns"},t._l(t.inputs,function(a){return e("div",{key:a.id,staticClass:"tile tile-centered column",class:[t.col]},[e("div",{staticClass:"tile-icon"},[e("button",{staticClass:"btn btn-action btn-lg unclickable",class:[t.stateButton(a.state,a.reverse)]},[e("i",{staticClass:"icon icon-flag centered"})])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[t._v(t._s(a.name))]),e("div",{staticClass:"tile-subtitle text-gray"},[t._v(t._s(t.inputDisc(a.gpio,a.reverse,a.bindType)))])]),e("div",{staticClass:"tile-action"},[e("button",{staticClass:"btn btn-link",on:{click:function(e){t.openModal("Edit: "+a.name,a.name,a.gpio,!!a.reverse,a.bindType,a.id,a.bindId)}}},[e("i",{staticClass:"icon icon-edit"})])])])})):e("div",{staticClass:"empty centered"},[t._m(5),e("p",{staticClass:"empty-title h5"},[t._v("There are no inputs configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){t.openModal("Add new input","","",!1,0,-1,-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},gt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("GPIO Inputs")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"gpio"}},[t._v("GPIO(BCM)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Bind type")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Output to bind")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],Dt={name:"GPIO_Input",data:function(){return{inputs:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,modalData:{active:!1,id:-1,title:"New input",name:"",gpio:"",prevsGpios:"",reverse:!1,bindType:0,bindId:-1,errors:[],allUsedPins:[],outputs:[]}}},props:{col:{type:String,default:"col-4 col-lg-6 col-sm-12"}},created:function(){this.getInputs(),this.$cookies.isKey("in_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("in_arTime"))),this.autoRefresh()},beforeDestroy:function(){clearTimeout(this.refreshInterval)},methods:{autoRefresh:function(){var t=this;this.$cookies.set("in_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(function(){t.modalData.active||t.getInputs(),t.autoRefresh()},1e3*this.autoRefreshTime))},openModal:function(t,a,e,s,o,i,r){var n=this;this.modalData.active=!0,this.modalData.title=t,this.modalData.name=a,this.modalData.gpio=e,this.modalData.prevsGpios=e,this.modalData.reverse=s,this.modalData.bindType=o,this.modalData.bindId=r,this.modalData.id=i,this.modalData.allUsedPins=[],this.modalData.errors=[],this.modalData.outputs=[],this.doPosts([this.doQPost("AllUsedPins_GPIO;in;"+i).then(function(t){for(var a=2;a<t.length-1;a++)n.modalData.allUsedPins.push(t[a])}),this.doQPost("GPIO_Oname").then(function(t){for(var a=2;a<t.length-1;a+=4)n.modalData.outputs.push({id:t[a],name:t[a+1]})})]).catch(function(t){n.modalData.errors.push(t.message)})},modalAction:function(t){var a=this;if(this.modalData.errors=[],!t){if(this.modalData.name||this.modalData.errors.push("Name required !"),isNaN(this.modalData.gpio)||""==this.modalData.gpio||null==this.modalData.gpio)this.modalData.errors.push("GPIO must be a number !");else{var e=this.modalData.gpio.toString().split(","),s=this.isGPIOnumber(e);if(-1!=s)this.modalData.errors.push(s+" is not a GPIO BCM number !");else for(var o=0;o<e.length;o++)this.modalData.allUsedPins.indexOf(e[o])>-1&&this.modalData.errors.push(e[o]+" allready in use !")}this.modalData.bindType>0&&(isNaN(this.modalData.bindId)||""==this.modalData.bindId||null==this.modalData.bindId||-1==this.modalData.bindId)&&this.modalData.errors.push("Binded output is required with this type !")}if(!this.modalData.errors.length){var i="";i=t?"Delete_GPIO_out;"+this.modalData.id+";"+this.modalData.gpio+";"+this.modalData.name:-1===this.modalData.id?"Add_GPIO_in;"+this.modalData.gpio+";"+this.modalData.name+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+ +this.modalData.reverse+";"+this.modalData.bindId+";"+this.modalData.bindType:"Edit_GPIO_in;"+this.modalData.id+";"+this.modalData.gpio+";"+this.modalData.name+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+ +this.modalData.reverse+";"+this.modalData.bindId+";"+this.modalData.bindType+";"+this.modalData.prevsGpios,this.doPost(i).then(function(t){a.getInputs(),a.modalData.active=!1}).catch(function(t){a.modalData.errors.push(t.message)})}},inputDisc:function(t,a,e){var s="GPIO: "+t;return 1==e?s+="(bo)":2==e&&(s+="(bp)"),a&&(s+="(r)"),s},getInputs:function(){var t=this;this.doPost("GPIO_Ilist").then(function(a){t.$route.meta.error=null,t.inputs=[];for(var e=2;e<a.length-1;e+=7)t.inputs.push({id:parseInt(a[e]),gpio:parseInt(a[e+1]),state:parseInt(a[e+2]),name:a[e+3],reverse:parseInt(a[e+4]),bindId:parseInt(a[e+5]),bindType:parseInt(a[e+6])});t.updateDate=t.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(function(a){t.$route.meta.error=a.message,t.$forceUpdate()})}},components:{Error:B}},Ct=Dt,bt=(e("6f72"),Object(A["a"])(Ct,ft,gt,!1,null,null,null)),_t=bt.exports,yt={name:"Inputs",components:{Error:B,GPIO_Input:_t,History:J}},wt=yt,Tt=Object(A["a"])(wt,ht,vt,!1,null,null,null),$t=Tt.exports,It=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Actions"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",[e("AdvSA")],1)],1)},kt=[],At=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){t.getActions()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){t.openActionModal("Add new action",-1,"","",-1,-1,-1,-1,0,600,0,!0)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalActionData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalActionData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalActionData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalActionData.title))]),t.modalActionData.errors.length?e("Error",{attrs:{"error-array":t.modalActionData.errors},on:{"close-err":function(a){t.modalActionData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.name,expression:"modalActionData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalActionData.name},on:{input:function(a){a.target.composing||t.$set(t.modalActionData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.type,expression:"modalActionData.type"}],staticClass:"form-select",attrs:{id:"type"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalActionData,"type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"output"}},[t._v("Output")]),e("option",{attrs:{value:"pwm"}},[t._v("PWM")]),e("option",{attrs:{value:"chain"}},[t._v("Chain")])])])]),"output"==t.modalActionData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalActionData.outputs.length}},[t._m(3),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.outputId,expression:"modalActionData.outputId"}],staticClass:"form-select",attrs:{id:"output"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalActionData,"outputId",a.target.multiple?e:e[0])}}},t._l(t.modalActionData.outputs,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalActionData.outputs.length&&!t.loading,expression:"!modalActionData.outputs.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add outputs to make them visible here.")])])]):"pwm"==t.modalActionData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalActionData.pwms.length}},[t._m(4),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.pwmId,expression:"modalActionData.pwmId"}],staticClass:"form-select",attrs:{id:"pwm"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalActionData,"pwmId",a.target.multiple?e:e[0])}}},t._l(t.modalActionData.pwms,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalActionData.pwms.length&&!t.loading,expression:"!modalActionData.pwms.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add PWM's to make them pickable here.")])])]):"chain"==t.modalActionData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalActionData.chains.length}},[t._m(5),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.chainId,expression:"modalActionData.chainId"}],staticClass:"form-select",attrs:{id:"chain"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalActionData,"chainId",a.target.multiple?e:e[0])}}},t._l(t.modalActionData.chains,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalActionData.chains.length&&!t.loading,expression:"!modalActionData.chains.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add chains to make them pickable here.")])])]):t._e(),e("div",{staticClass:"form-group"},[t._m(6),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.noe,expression:"modalActionData.noe"}],staticClass:"form-input",attrs:{type:"number",id:"noe"},domProps:{value:t.modalActionData.noe},on:{input:function(a){a.target.composing||t.$set(t.modalActionData,"noe",a.target.value)}}}),e("p",{staticClass:"text-gray text-italic"},[t._v("-1 unlimited, 0 disabled or any number for execution countdown")])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"chain"!=t.modalActionData.type,expression:"modalActionData.type != 'chain'"}],staticClass:"form-group"},[t._m(7),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.state,expression:"modalActionData.state"}],staticClass:"form-select",attrs:{id:"state"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalActionData,"state",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("OFF")]),e("option",{attrs:{value:"1"}},[t._v("ON")]),e("option",{attrs:{value:"2"}},[t._v("OPPOSITE")])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"pwm"==t.modalActionData.type,expression:"modalActionData.type == 'pwm'"}],staticClass:"form-group"},[t._m(8),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.fr,expression:"modalActionData.fr"}],staticClass:"form-input",attrs:{type:"number",id:"fr"},domProps:{value:t.modalActionData.fr},on:{input:function(a){a.target.composing||t.$set(t.modalActionData,"fr",a.target.value)}}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"pwm"==t.modalActionData.type,expression:"modalActionData.type == 'pwm'"}],staticClass:"form-group"},[t._m(9),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.dc,expression:"modalActionData.dc"}],staticClass:"form-input",attrs:{type:"number",id:"dc",min:"0",max:"100"},domProps:{value:t.modalActionData.dc},on:{input:function(a){a.target.composing||t.$set(t.modalActionData,"dc",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.keepLogs,expression:"modalActionData.keepLogs"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalActionData.keepLogs)?t._i(t.modalActionData.keepLogs,null)>-1:t.modalActionData.keepLogs},on:{change:function(a){var e=t.modalActionData.keepLogs,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&t.$set(t.modalActionData,"keepLogs",e.concat([i])):r>-1&&t.$set(t.modalActionData,"keepLogs",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.modalActionData,"keepLogs",o)}}}),e("i",{staticClass:"form-icon"}),t._v("Keep logs\n                                    ")])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalActionData.id,expression:"modalActionData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){t.modalActionAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.modalActionAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"modal",class:{active:t.modalTriggerData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalTriggerData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalTriggerData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalTriggerData.title))]),t.modalTriggerData.errors.length?e("Error",{attrs:{"error-array":t.modalTriggerData.errors},on:{"close-err":function(a){t.modalTriggerData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(10),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.type,expression:"modalTriggerData.type"}],staticClass:"form-select",attrs:{id:"type"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalTriggerData,"type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"date"}},[t._v("Exact date time")]),e("option",{attrs:{value:"hour"}},[t._v("Time of day")]),e("option",{attrs:{value:"timer"}},[t._v("Timer")]),e("option",{attrs:{value:"weekday"}},[t._v("Week day")]),e("option",{attrs:{value:"sensor"}},[t._v("Sensor value")]),e("option",{attrs:{value:"i/o"}},[t._v("Input/Output state")]),e("option",{attrs:{value:"pwm state"}},[t._v("PWM state")]),e("option",{attrs:{value:"pwm fr"}},[t._v("PWM frequency")]),e("option",{attrs:{value:"pwm dc"}},[t._v("PWM dutycycle")]),e("option",{attrs:{value:"in chain"}},[t._v("Run only in chain")]),e("option",{attrs:{value:"ping"}},[t._v("Ping")])])])]),e("div",{staticClass:"form-group"},[t._m(11),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.operator,expression:"modalTriggerData.operator"}],staticClass:"form-input",attrs:{type:"text",id:"op",placeholder:"== / != / < / > / <= / >="},domProps:{value:t.modalTriggerData.operator},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"operator",a.target.value)}}})])]),"date"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[t._m(12),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.date,expression:"modalTriggerData.date"}],staticClass:"form-input",attrs:{type:"datetime-local",id:"date"},domProps:{value:t.modalTriggerData.date},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"date",a.target.value)}}})])]):"hour"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[t._m(13),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.hour,expression:"modalTriggerData.hour"}],staticClass:"form-input",attrs:{type:"time",id:"time"},domProps:{value:t.modalTriggerData.hour},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"hour",a.target.value)}}})])]):"timer"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[t._m(14),e("div",{staticClass:"col-3 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.timerh,expression:"modalTriggerData.timerh"}],staticClass:"form-input",attrs:{type:"number",placeholder:"h",min:"0",max:"23"},domProps:{value:t.modalTriggerData.timerh},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"timerh",a.target.value)}}})]),e("div",{staticClass:"col-3 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.timerm,expression:"modalTriggerData.timerm"}],staticClass:"form-input",attrs:{type:"number",placeholder:"m",min:"0",max:"59"},domProps:{value:t.modalTriggerData.timerm},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"timerm",a.target.value)}}})]),e("div",{staticClass:"col-3 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.timers,expression:"modalTriggerData.timers"}],staticClass:"form-input",attrs:{type:"number",placeholder:"s",min:"0",max:"59"},domProps:{value:t.modalTriggerData.timers},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"timers",a.target.value)}}})])]):"weekday"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[t._m(15),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.weekday,expression:"modalTriggerData.weekday"}],staticClass:"form-select",attrs:{id:"weekday"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalTriggerData,"weekday",a.target.multiple?e:e[0])}}},t._l(t.dayNames,function(a,s){return e("option",{key:a,domProps:{value:s}},[t._v(t._s(a))])}))])]):"sensor"==t.modalTriggerData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.sensors.length}},[t._m(16),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.sensorId,expression:"modalTriggerData.sensorId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalTriggerData,"sensorId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.sensors,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name)+"("+t._s(a.unit)+")")])})),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.sensorValue,expression:"modalTriggerData.sensorValue"}],staticClass:"form-input",attrs:{type:"number",placeholder:"value"},domProps:{value:t.modalTriggerData.sensorValue},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"sensorValue",a.target.value)}}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.sensors.length&&!t.loading,expression:"!modalTriggerData.sensors.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add sensors to make them pickable here.")])])]):"i/o"==t.modalTriggerData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.ios.length}},[t._m(17),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.ioId,expression:"modalTriggerData.ioId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalTriggerData,"ioId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.ios,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.ioState,expression:"modalTriggerData.ioState"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalTriggerData,"ioState",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("OFF")]),e("option",{attrs:{value:"1"}},[t._v("ON")])]),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.ios.length&&!t.loading,expression:"!modalTriggerData.ios.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add sensors to make them pickable here.")])])]):"in chain"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.inChain,expression:"modalTriggerData.inChain"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalTriggerData,"inChain",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"True"}},[t._v("True")]),e("option",{attrs:{value:"False"}},[t._v("False")])])]):"ping"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.isPinging,expression:"modalTriggerData.isPinging"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalTriggerData,"isPinging",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"True"}},[t._v("True")]),e("option",{attrs:{value:"False"}},[t._v("False")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.pingHost,expression:"modalTriggerData.pingHost"}],staticClass:"form-input",attrs:{type:"text",placeholder:"IP/HOST/DOMAIN"},domProps:{value:t.modalTriggerData.pingHost},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"pingHost",a.target.value)}}})]):-1!=t.modalTriggerData.type.indexOf("pwm")?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.pwms.length}},[t._m(18),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.pwmId,expression:"modalTriggerData.pwmId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalTriggerData,"pwmId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.pwms,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.pwmState,expression:"modalTriggerData.pwmState"},{name:"show",rawName:"v-show",value:"pwm state"==t.modalTriggerData.type,expression:"modalTriggerData.type == 'pwm state'"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalTriggerData,"pwmState",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("OFF")]),e("option",{attrs:{value:"1"}},[t._v("ON")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.pwmFr,expression:"modalTriggerData.pwmFr"},{name:"show",rawName:"v-show",value:"pwm fr"==t.modalTriggerData.type,expression:"modalTriggerData.type == 'pwm fr'"}],staticClass:"form-input",attrs:{type:"number",placeholder:"Frequency"},domProps:{value:t.modalTriggerData.pwmFr},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"pwmFr",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.pwmDc,expression:"modalTriggerData.pwmDc"},{name:"show",rawName:"v-show",value:"pwm dc"==t.modalTriggerData.type,expression:"modalTriggerData.type == 'pwm dc'"}],staticClass:"form-input",attrs:{type:"number",min:"0",max:"100",placeholder:"Dutycycle"},domProps:{value:t.modalTriggerData.pwmDc},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"pwmDc",a.target.value)}}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.ios.length&&!t.loading,expression:"!modalTriggerData.ios.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add sensors to make them pickable here.")])])]):t._e()])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalTriggerData.id,expression:"modalTriggerData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){t.modalTriggerAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.modalTriggerAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"modal",class:{active:t.modalPatternData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalPatternData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalPatternData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalPatternData.title))]),t.modalPatternData.errors.length?e("Error",{attrs:{"error-array":t.modalPatternData.errors},on:{"close-err":function(a){t.modalPatternData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalPatternData.pattern,expression:"modalPatternData.pattern"}],staticClass:"form-input",attrs:{type:"text",id:"pattern",placeholder:"Pattern"},domProps:{value:t.modalPatternData.pattern},on:{input:function(a){a.target.composing||t.$set(t.modalPatternData,"pattern",a.target.value)}}}),e("span",{staticClass:"text-gray"},[t._v("If this field is empty then default conjunction is '#1# and #2#' etc. which means, that all triggers must be fulfilled for the action to start. You can set your own conjunction here by using: #trigger number# and Python conjunction syntax. For example: '(#1# or #2#) and #3#' means that trigger 1 or 2 and 3 must be fulfilled for the action to start.")])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.modalPatternAction()}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.actions.length||t.loading?e("div",{staticClass:"columns"},t._l(t.actions,function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile"},[e("div",{staticClass:"tile-icon d-grid"},[e("button",{staticClass:"btn btn-link",on:{click:function(e){t.openActionModal("Edit "+a.name,a.id,a.name,a.type,a.outputId,a.pwmId,a.chainId,a.noe,a.keepLogs,s)}}},[e("i",{staticClass:"icon icon-edit"})]),e("button",{staticClass:"btn btn-link",on:{click:function(e){t.openTriggerModal("Add trigger for "+a.name,-1,a.id,"date","==",null)}}},[e("i",{staticClass:"icon icon-plus"})]),e("button",{staticClass:"btn btn-link",attrs:{disabled:a.triggers.length<2},on:{click:function(e){t.openPatternModal("Set conjunction pattern for "+a.name,a.id,a.conjunction,s)}}},[e("i",{staticClass:"icon icon-resize-horiz"})])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[e("span",[t._v(t._s(a.name))]),e("span",{staticClass:"float-right"},[t._v(t._s(t.actionTargetDisc(s)))])]),e("div",{staticClass:"tile-subtitle"},[e("span",{staticClass:"text-gray"},[a.conjunction&&""!=a.conjunction&&"None"!=a.conjunction?e("div",[t._v(t._s(a.conjunction))]):e("div",[t._v(t._s(t.conjunctionDefDisc(s)))])]),a.triggers.length?e("ol",{staticClass:"list"},t._l(a.triggers,function(o,i){return e("li",{key:o.id},[e("button",{staticClass:"btn btn-link",on:{click:function(e){t.openTriggerModal("Edit trigger "+o.lp+" for "+a.name,o.id,a.id,o.type,o.operator,o.data,o.sourceId)}}},[t._v(t._s(t.triggerSourceDisc(s,i)))])])})):e("div",[t._v("No triggers added.")])])])])])})):e("div",{staticClass:"empty centered"},[t._m(19),e("p",{staticClass:"empty-title h5"},[t._v("There are no actions configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){t.openActionModal("Add new action",-1,"","",-1,-1,-1,-1,!0,-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},Pt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Advenced scheduled actions")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Type")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"output"}},[t._v("Output target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"pwm"}},[t._v("PWM target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"chain"}},[t._v("Chain target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"noe"}},[t._v("Number of executions")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"state"}},[t._v("Set state")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"fr"}},[t._v("Frequency(Hz)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"dc"}},[t._v("Dutycycle(%)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Type")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"op"}},[t._v("Operator")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"date"}},[t._v("Date")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"time"}},[t._v("Time")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Timer")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"weekday"}},[t._v("Week day")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Sensor")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Input / Output")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("PWM")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],xt=(e("386d"),e("a481"),e("4917"),{name:"SheduledActions",data:function(){return{actions:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,dayNames:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],modalActionData:{active:!1,id:-1,title:"New action",name:"",type:"",outputId:-1,chainId:-1,pwmId:-1,noe:-1,state:0,fr:"",dc:"",keepLogs:!0,errors:[],outputs:[],pwms:[],chains:[]},modalTriggerData:{active:!1,id:-1,title:"New trigger",actionId:-1,sourceId:-1,type:"",operator:"==",date:"",hour:"",weekday:"",sensorId:-1,sensorValue:"",ioId:-1,ioState:0,inChain:"True",pwmId:-1,pwmState:0,pwmFr:600,pwmDc:0,timerh:"",timerm:"",timers:"",ios:[],pwms:[],sensors:[],errors:[],isPinging:"True",pingHost:""},modalPatternData:{active:!1,id:-1,title:"Set conjunction pattern",actionId:-1,pattern:"",maxTrigger:0,index:-1,errors:[]}}},props:{col:{type:String,default:"col-4 col-lg-6 col-sm-12"}},created:function(){this.getActions(),this.$cookies.isKey("sa_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("sa_arTime"))),this.autoRefresh()},beforeDestroy:function(){clearTimeout(this.refreshInterval)},methods:{autoRefresh:function(){var t=this;this.$cookies.set("sa_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(function(){t.modalActionData.active||t.modalTriggerData.active||t.modalPatternData.active||t.getActions(),t.autoRefresh()},1e3*this.autoRefreshTime))},openPatternModal:function(t,a,e,s){this.modalPatternData.active=!0,this.modalPatternData.title=t,this.modalPatternData.id=a,this.modalPatternData.pattern=e,this.modalPatternData.errors=[],this.modalPatternData.index=s},modalPatternAction:function(){var t=this;this.modalPatternData.errors=[];var a=this.modalPatternData.pattern.match(/(\(*#|#)[1-9]*(#\)*|#)( and | or |)/g);null==a?this.modalPatternData.errors.push("Bad syntax !"):a.join("").length!=this.modalPatternData.pattern.length&&this.modalPatternData.errors.push("Bad syntax !");var e=this.modalPatternData.pattern.match(/#[0-9]*#/g);for(var s in e){var o=e[s].replace(/#/g,"");o>this.actions[this.modalPatternData.index].triggers.length&&this.modalPatternData.errors.push("Trigger number "+o+" not exist !")}var i=this.modalPatternData.pattern.match(/\(/g),r=0;for(var n in i)r++;var l=this.modalPatternData.pattern.match(/\)/g),c=0;for(var d in l)c++;r!=c&&this.modalPatternData.errors.push("Bracket not closed ?!"),this.modalPatternData.errors.length||this.doPost("GPIO_ASA_SetConj;"+this.modalPatternData.pattern+";"+this.modalPatternData.id).then(function(a){t.actions[t.modalPatternData.index].conjunction=t.modalPatternData.pattern,t.modalPatternData.active=!1}).catch(function(a){t.modalPatternData.errors.push(a.message)})},openTriggerModal:function(t,a,e,s,o,i,r){var n=this;if(this.modalTriggerData.active=!0,this.modalTriggerData.title=t,this.modalTriggerData.id=a,this.modalTriggerData.actionId=e,this.modalTriggerData.type=s,this.modalTriggerData.operator=o,this.modalTriggerData.pwms=[],this.modalTriggerData.ios=[],this.modalTriggerData.sensors=[],null!=i)switch(s){case"date":this.modalTriggerData.date=this.$moment.utc(i,"YYYY-MM-DD HH:mm").local().format("YYYY-MM-DDTHH:mm");break;case"hour":this.modalTriggerData.hour=this.$moment.utc(this.$moment().format("YYYY-MM-DD ")+i,"YYYY-MM-DD HH:mm").local().format("HH:mm");break;case"timer":var l=i.split(","),c=this.$moment(1e3*parseInt(l[0])).utc();this.modalTriggerData.timerh=c.hour(),this.modalTriggerData.timerm=c.minutes(),this.modalTriggerData.timers=c.seconds();break;case"weekday":this.modalTriggerData.weekday=i;break;case"sensor":this.modalTriggerData.sensorId=r,this.modalTriggerData.sensorValue=i;break;case"i/o":this.modalTriggerData.ioId=r,this.modalTriggerData.ioState=i;break;case"in chain":this.modalTriggerData.inChain=i;break;case"pwm state":this.modalTriggerData.pwmId=r,this.modalTriggerData.pwmState=i;break;case"pwm fr":this.modalTriggerData.pwmId=r,this.modalTriggerData.pwmFr=i;break;case"pwm dc":this.modalTriggerData.pwmId=r,this.modalTriggerData.pwmDc=i;break;case"ping":this.modalTriggerData.pingHost=r,this.modalTriggerData.isPinging=i;break}this.doPosts([this.doQPost("GPIO_PWMnames").then(function(t){for(var a=2;a<t.length-1;a+=2)n.modalTriggerData.pwms.push({id:t[a],name:t[a+1]})}),this.doQPost("GPIO_OInames").then(function(t){for(var a=2;a<t.length-1;a+=2)n.modalTriggerData.ios.push({id:t[a],name:t[a+1]})}),this.doQPost("SENSOR_names").then(function(t){for(var a=2;a<t.length-1;a+=3)n.modalTriggerData.sensors.push({id:t[a],name:t[a+1],unit:t[a+2]})})]).catch(function(t){n.modalTriggerData.errors.push(t.message)})},modalTriggerAction:function(t){var a=this;this.modalTriggerData.errors=[];var e="",s="";if(!t)switch(/^==|<=|>=|<|>|!=$/g.test(this.modalTriggerData.operator)||this.modalTriggerData.errors.push("Avalible operators: ==|<=|>=|<|>|!="),this.modalTriggerData.type){case"date":this.modalTriggerData.date?e=this.$moment(this.modalTriggerData.date,"YYYY-MM-DDTHH:mm").utc().format("YYYY-MM-DD HH:mm"):this.modalTriggerData.errors.push("Date required !");break;case"hour":this.modalTriggerData.hour?e=this.$moment(this.$moment().utc().format("YYYY-MM-DD ")+this.modalTriggerData.hour,"YYYY-MM-DD HH:mm").utc().format("HH:mm"):this.modalTriggerData.errors.push("Time required !");break;case"timer":this.modalTriggerData.timerh&&this.modalTriggerData.timerm&&this.modalTriggerData.timers?(e=3600*parseInt(this.modalTriggerData.timerh)+60*parseInt(this.modalTriggerData.timerm)+parseInt(this.modalTriggerData.timers),e=e+","+e+","+(new Date).getTime()/1e3):this.modalTriggerData.errors.push("Timer fields are required !");break;case"weekday":e=this.modalTriggerData.weekday;break;case"sensor":this.modalTriggerData.sensorValue&&this.modalTriggerData.sensorId?(e=this.modalTriggerData.sensorValue,s=this.modalTriggerData.sensorId):this.modalTriggerData.errors.push("Sensor fields are required !");break;case"i/o":this.modalTriggerData.ioId?(e=this.modalTriggerData.ioState,s=this.modalTriggerData.ioId):this.modalTriggerData.errors.push("I/O fields are required !");break;case"in chain":e=this.modalTriggerData.inChain;break;case"pwm state":this.modalTriggerData.pwmId?(e=this.modalTriggerData.pwmState,s=this.modalTriggerData.pwmId):this.modalTriggerData.errors.push("PWM fields are required !");break;case"pwm fr":this.modalTriggerData.pwmFr&&this.modalTriggerData.pwmId?(e=this.modalTriggerData.pwmFr,s=this.modalTriggerData.pwmId):this.modalTriggerData.errors.push("PWM fields are required !");break;case"pwm dc":this.modalTriggerData.pwmDc&&this.modalTriggerData.pwmId?(e=this.modalTriggerData.pwmDc,s=this.modalTriggerData.pwmId):this.modalTriggerData.errors.push("PWM fields are required !");break;case"ping":this.modalTriggerData.pingHost&&this.modalTriggerData.pingHost?(e=this.modalTriggerData.isPinging,s=this.modalTriggerData.pingHost):this.modalTriggerData.errors.push("Ping feilds are required !");break}if(!this.modalTriggerData.errors.length){var o="";o=t?"GPIO_ASA_DeleteTrigger;"+this.modalTriggerData.id+";"+this.modalTriggerData.actionId:-1===this.modalTriggerData.id?"GPIO_ASA_AddTrigger;"+this.modalTriggerData.actionId+";"+s+";"+this.modalTriggerData.type+";"+this.modalTriggerData.operator+";"+e:"GPIO_ASA_UpdateTrigger;"+this.modalTriggerData.actionId+";"+s+";"+this.modalTriggerData.type+";"+this.modalTriggerData.operator+";"+e+";"+this.modalTriggerData.id,this.doPost(o).then(function(t){a.getActions(),a.modalTriggerData.active=!1}).catch(function(t){a.modalTriggerData.errors.push(t.message)})}},openActionModal:function(t,a,e,s,o,i,r,n,l,c){var d=this;this.modalActionData.active=!0,this.modalActionData.title=t,this.modalActionData.name=e,this.modalActionData.id=a,this.modalActionData.type=s,this.modalActionData.outputId=o,this.modalActionData.pwmId=i,this.modalActionData.chainId=r,this.modalActionData.noe=n,"output"==s?this.modalActionData.state=this.actions[c].outputState:"pwm"==s&&(this.modalActionData.state=this.actions[c].pwmSs),this.modalActionData.fr=this.actions[c].pwmFr,this.modalActionData.dc=this.actions[c].pwmDc,this.modalActionData.keepLogs=l,this.modalActionData.errors=[],this.modalActionData.outputs=[],this.modalActionData.pwms=[],this.modalActionData.chains=[],this.doPosts([this.doQPost("GPIO_Oname").then(function(t){for(var a=2;a<t.length-1;a+=4)d.modalActionData.outputs.push({id:t[a],name:t[a+1]})}),this.doQPost("GPIO_PWMnames").then(function(t){for(var a=2;a<t.length-1;a+=2)d.modalActionData.pwms.push({id:t[a],name:t[a+1]})}),this.doQPost("Chain_names").then(function(t){for(var a=2;a<t.length-1;a+=2)d.modalActionData.chains.push({id:t[a],name:t[a+1]})})]).catch(function(t){d.modalActionData.errors.push(t.message)})},modalActionAction:function(t){var a=this;if(this.modalActionData.errors=[],t||(this.modalActionData.name||this.modalActionData.errors.push("Name required !"),"output"!=this.modalActionData.type||!isNaN(this.modalActionData.outputId)&&""!=this.modalActionData.outputId&&null!=this.modalActionData.outputId&&-1!=this.modalActionData.outputId||this.modalActionData.errors.push("Output selection is required with this type !"),"pwm"!=this.modalActionData.type||!isNaN(this.modalActionData.pwmId)&&""!=this.modalActionData.pwmId&&null!=this.modalActionData.pwmId&&-1!=this.modalActionData.pwmId||this.modalActionData.errors.push("PWM selection is required with this type !"),"chain"!=this.modalActionData.type||!isNaN(this.modalActionData.chainId)&&""!=this.modalActionData.chainId&&null!=this.modalActionData.chainId&&-1!=this.modalActionData.chainId||this.modalActionData.errors.push("Chain selection is required with this type !"),this.modalActionData.noe||this.modalActionData.errors.push("Number of executions is required !")),!this.modalActionData.errors.length){var e=-1;"output"==this.modalActionData.type?e=this.modalActionData.outputId:"pwm"==this.modalActionData.type?e=this.modalActionData.pwmId:"chain"==this.modalActionData.type&&(e=this.modalActionData.chainId);var s="";s=t?"GPIO_ASA_Delete;"+this.modalActionData.id:-1===this.modalActionData.id?"GPIO_ASA_Add;"+this.modalActionData.name+";"+this.modalActionData.type+";"+e+";"+this.modalActionData.noe+";"+this.modalActionData.state+";"+this.modalActionData.fr+";"+this.modalActionData.dc+";"+ +this.modalActionData.keepLogs:"GPIO_ASA_Update;"+this.modalActionData.name+";"+this.modalActionData.type+";"+e+";"+this.modalActionData.noe+";"+this.modalActionData.state+";"+this.modalActionData.fr+";"+this.modalActionData.dc+";"+this.modalActionData.id+";"+ +this.modalActionData.keepLogs,this.doPost(s).then(function(t){a.getActions(),a.modalActionData.active=!1}).catch(function(t){a.modalActionData.errors.push(t.message)})}},actionTargetDisc:function(t){return"output"==this.actions[t].type?this.actions[t].outputName+" "+this.outState(this.actions[t].outputState):"pwm"==this.actions[t].type?this.actions[t].pwmName+" "+this.pwmState(this.actions[t].pwmState,this.actions[t].pwmDc,this.actions[t].pwmFr):"chain"==this.actions[t].type?this.actions[t].chainName+" Execude":void 0},triggerSourceDisc:function(t,a){var e=this.actions[t].triggers[a],s=e.type;switch("i/o"==e.type?s+=" "+e.ioName:-1!=e.type.search(/pwm/)?s+=" "+e.pwmName:"sensor"==e.type?s+=" "+e.sensorName:"ping"==e.type&&(s+=" "+e.sourceId),s+=" "+e.operator+" ",e.type){case"weekday":s+=this.dayOfWeek(parseInt(e.data));break;case"i/o":case"pwm state":s+=this.outState(e.data);break;case"sensor":s+=e.data+e.sensorUnit;break;case"hour":s+=this.$moment.utc(this.$moment().utc().format("YYYY-MM-DD ")+e.data,"YYYY-MM-DD HH:mm").local().format("HH:mm");break;case"date":s+=this.$moment.utc(e.data,"YYYY-MM-DD HH:mm").local().format("YYYY-MM-DD HH:mm");break;case"timer":var o=e.data.split(","),i=this.$moment(1e3*parseInt(o[0])).utc().format("HH:mm:ss"),r=this.$moment(1e3*parseInt(o[1])).utc().format("HH:mm:ss");s+=i+" | "+r;break;default:s+=e.data}return s},conjunctionDefDisc:function(t){for(var a="",e=0;e<this.actions[t].triggers.length;e++)a+="#"+this.actions[t].triggers[e].lp+"#",e<this.actions[t].triggers.length-1&&(a+=" and ");return a},dayOfWeek:function(t){return this.dayNames[t]},getActions:function(){var t=this;this.doPost("GPIO_ASAlist").then(function(a){t.$route.meta.error=null,t.actions=[];for(var e=2;e<a.length-1;e+=18){for(var s=a[e+17].split("$"),o=[],i=0;i<s.length-1;i+=11)o.push({id:parseInt(s[i]),actionId:parseInt(a[e]),sourceId:s[i+1],lp:parseInt(s[i+2]),type:s[i+3],operator:s[i+4],data:s[i+5],ioName:s[i+6],pmwName:s[i+8],sensorName:s[i+9],sensorUnit:s[i+10]});t.actions.push({id:parseInt(a[e]),type:a[e+1],noe:a[e+2],conjunction:a[e+3],outputId:parseInt(a[e+4]),outputState:parseInt(a[e+5]),pwmId:parseInt(a[e+6]),pwmFr:parseInt(a[e+7]),pwmDc:parseInt(a[e+8]),pwmSs:parseInt(a[e+9]),name:a[e+10],outputName:a[e+11],pwmName:a[e+13],chainId:a[e+14],keepLogs:!!+a[e+15],chainName:a[e+16],triggers:o})}t.updateDate=t.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(function(a){t.$route.meta.error=a.message,t.$forceUpdate()})}},components:{Error:B}}),St=xt,Mt=(e("45d6"),Object(A["a"])(St,At,Pt,!1,null,null,null)),Nt=Mt.exports,Yt={name:"Actions",components:{Error:B,AdvSA:Nt}},Ot=Yt,Rt=Object(A["a"])(Ot,It,kt,!1,null,null,null),jt=Rt.exports,Et=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"}),e("div",{staticClass:"panel-body"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.logged,expression:"!logged"}],staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"psw"}},[t._v("Password:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordI,expression:"passwordI"}],staticClass:"form-input",attrs:{type:"password",id:"psw"},domProps:{value:t.passwordI},on:{input:function(a){a.target.composing||(t.passwordI=a.target.value)}}}),e("label",{staticClass:"form-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.remember,expression:"remember"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.remember)?t._i(t.remember,null)>-1:t.remember},on:{change:function(a){var e=t.remember,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&(t.remember=e.concat([i])):r>-1&&(t.remember=e.slice(0,r).concat(e.slice(r+1)))}else t.remember=o}}}),e("i",{staticClass:"form-icon"}),t._v(" Remember me")]),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.logged,expression:"!logged"}],staticClass:"btn btn-lg",class:{loading:t.loading},attrs:{disabled:t.loading},on:{click:function(a){t.login()}}},[t._v("Login")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.logged,expression:"logged"}],staticClass:"logged"},[e("span",[t._v("Logged ")]),e("br"),e("button",{directives:[{name:"show",rawName:"v-show",value:t.logged,expression:"logged"}],staticClass:"btn btn-lg",attrs:{disabled:this.loading},on:{click:function(a){t.logout()}}},[t._v("Logout")])])])])])},Bt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Login")])])}],Ht=e("94f8"),Gt=e.n(Ht),Lt=e("72fe"),Ft=e.n(Lt),Ut={name:"login",data:function(){return{logged:!1,remember:!1,passwordI:""}},mounted:function(){this.$cookies.isKey("session")&&(this.logged=!0)},methods:{login:function(){var t=this;this.$Progress.start(),this.loading=!0,this.$http.post("/",Gt()(this.passwordI).toString()+";"+this.encrypt("version_check",Ft()(this.passwordI).toString()),{headers:{"Content-type":"raw"}}).then(function(a){t.$route.meta.error=null;var e=a.data.split(";");Array.isArray(e)?(t.remember?(t.$cookies.set("session",Gt()(t.passwordI).toString(),-1),t.$cookies.set("encKey",Ft()(t.passwordI).toString(),-1)):(t.$cookies.set("session",Gt()(t.passwordI).toString(),"0"),t.$cookies.set("encKey",Ft()(t.passwordI).toString(),"0")),t.logged=!0,t.$router.push("/")):t.$route.meta.error="Not an array in response"}).catch(function(a){t.$route.meta.error=a.message,t.passwordI="",t.$Progress.fail()}).then(function(){t.loading=!1})},logout:function(){this.$cookies.remove("session"),this.$cookies.remove("encKey"),this.logged=!1}},components:{Error:B}},qt=Ut,zt=Object(A["a"])(qt,Et,Bt,!1,null,null,null),Kt=zt.exports,Wt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"PWM's"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("GPIO_Pwm",{staticClass:"column col-8 col-md-12",attrs:{col:"col-4 col-xl-6 col-md-12"}}),e("History",{staticClass:"column col-4 hide-md",attrs:{category:"pwm"}})],1)])],1)},Qt=[],Vt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){t.getPwms()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){t.openModal("Add new pwm","","",!1,"","",-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.gpio,expression:"modalData.gpio"}],staticClass:"form-input",attrs:{type:"text",id:"gpio",placeholder:"Comma separated GPIO BCM numbers"},domProps:{value:t.modalData.gpio},on:{input:function(a){a.target.composing||t.$set(t.modalData,"gpio",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.reverse,expression:"modalData.reverse"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalData.reverse)?t._i(t.modalData.reverse,null)>-1:t.modalData.reverse},on:{change:function(a){var e=t.modalData.reverse,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&t.$set(t.modalData,"reverse",e.concat([i])):r>-1&&t.$set(t.modalData,"reverse",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.modalData,"reverse",o)}}}),e("i",{staticClass:"form-icon"}),t._v("Reverse\n                                    ")])]),e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.fr,expression:"modalData.fr"}],staticClass:"form-input",attrs:{type:"number",id:"fr"},domProps:{value:t.modalData.fr},on:{input:function(a){a.target.composing||t.$set(t.modalData,"fr",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(4),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.dc,expression:"modalData.dc"}],staticClass:"form-input",attrs:{type:"number",id:"dc",min:"0",max:"100"},domProps:{value:t.modalData.dc},on:{input:function(a){a.target.composing||t.$set(t.modalData,"dc",a.target.value)}}})])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalData.id,expression:"modalData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.pwms.length||t.loading?e("div",{staticClass:"columns"},t._l(t.pwms,function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile"},[e("div",{staticClass:"tile-icon d-grid"},[e("button",{staticClass:"btn btn-action btn-lg",class:[t.stateButton(a.s_s,0)],on:{click:function(a){t.setSS(s)}}},[e("i",{staticClass:"icon icon-shutdown centered"})]),e("button",{staticClass:"btn btn-link float-right",on:{click:function(e){t.openModal("Edit "+a.name,a.name,a.gpio,!!a.reverse,a.fr,a.dc,a.id)}}},[e("i",{staticClass:"icon icon-edit"})])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[e("span",[t._v(t._s(a.name))]),e("div",{staticClass:"float-right tooltip tooltip-left low-width",attrs:{"data-tooltip":"Frequency (Hz)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.fr,expression:"pwm.fr"}],staticClass:"form-input input-sm",attrs:{type:"number",disabled:!a.s_s},domProps:{value:a.fr},on:{change:function(a){t.setDCFR(s)},input:function(e){e.target.composing||t.$set(a,"fr",e.target.value)}}})])]),e("div",{staticClass:"tile-subtitle text-gray"},[e("span",[t._v("GPIO:"+t._s(a.gpio))]),e("div",{staticClass:"float-right tooltip tooltip-left low-width",attrs:{"data-tooltip":"Dutycycle (%)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.dc,expression:"pwm.dc"}],staticClass:"form-input input-sm",attrs:{type:"number",min:"0",max:"100",disabled:!a.s_s},domProps:{value:a.dc},on:{change:function(a){t.setDCFR(s)},input:function(e){e.target.composing||t.$set(a,"dc",e.target.value)}}})])]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:a.dc,expression:"pwm.dc"}],staticClass:"slider",class:{reverse:!!a.reverse},attrs:{type:"range",min:"0",max:"100",disabled:!a.s_s},domProps:{value:a.dc},on:{change:function(a){t.setDCFR(s)},__r:function(e){t.$set(a,"dc",e.target.value)}}})])])])])})):e("div",{staticClass:"empty centered"},[t._m(5),e("p",{staticClass:"empty-title h5"},[t._v("There are no pwm's configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){t.openModal("Add new pwm","","",!1,"","",-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm low-width",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},Jt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("GPIO Pwms")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"gpio"}},[t._v("GPIO(BCM)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"fr"}},[t._v("Frequency(Hz)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"dc"}},[t._v("Dutycycle(%)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],Xt={name:"GPIO_Pwm",data:function(){return{pwms:[],refreshInterval:"",updateDate:"",changeDate:null,askedChangeDate:null,autoRefreshTime:15,modalData:{active:!1,id:-1,title:"New pwm",name:"",gpio:"",prevsGpios:"",reverse:!1,fr:"",dc:"",errors:[],allUsedPins:[]}}},props:{col:{type:String,default:"col-4 col-lg-6 col-sm-12"}},created:function(){this.getPwms(),this.$cookies.isKey("pwm_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("pwm_arTime"))),this.autoRefresh()},beforeDestroy:function(){clearTimeout(this.refreshInterval)},methods:{autoRefresh:function(){var t=this;this.$cookies.set("pwm_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(function(){t.modalData.active||t.checkForChanges(),t.autoRefresh()},1e3*this.autoRefreshTime))},openModal:function(t,a,e,s,o,i,r){var n=this;this.modalData.active=!0,this.modalData.title=t,this.modalData.name=a,this.modalData.gpio=e,this.modalData.prevsGpios=e,this.modalData.reverse=s,this.modalData.id=r,this.modalData.fr=o,this.modalData.dc=i,this.modalData.allUsedPins=[],this.modalData.errors=[],this.doPost("AllUsedPins_GPIO;pwm;"+r).then(function(t){for(var a=2;a<t.length-1;a++)n.modalData.allUsedPins.push(t[a])}).catch(function(t){n.modalData.errors.push(t.message)})},modalAction:function(t){var a=this;if(this.modalData.errors=[],!t){if(this.modalData.name||this.modalData.errors.push("Name required !"),/^[0-9]+(,[0-9]+)*$/g.test(this.modalData.gpio)){var e=this.modalData.gpio.split(","),s=this.isGPIOnumber(e);if(-1!=s)this.modalData.errors.push(s+" is not a GPIO BCM number !");else for(var o=0;o<e.length;o++)this.modalData.allUsedPins.indexOf(e[o])>-1&&this.modalData.errors.push(e[o]+" allready in use !")}else this.modalData.errors.push("GPIO must be a number or comma separated numbers !");this.modalData.fr&&this.modalData.dc||this.modalData.errors.push("Initial frequency and dutycycle are required !")}if(!this.modalData.errors.length){var i="";i=t?"Delete_GPIO_pwm;"+this.modalData.id+";"+this.modalData.gpio+";"+this.modalData.name:-1===this.modalData.id?"Add_GPIO_pwm;"+this.modalData.gpio+";"+this.modalData.fr+";"+this.modalData.dc+";"+this.modalData.name+";"+ +this.modalData.reverse+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS"):"Edit_GPIO_pwm;"+this.modalData.id+";"+this.modalData.prevsGpios+";"+this.modalData.gpio+";"+this.modalData.fr+";"+this.modalData.dc+";"+this.modalData.name+";"+ +this.modalData.reverse+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS"),this.doPost(i).then(function(t){a.getPwms(),a.modalData.active=!1}).catch(function(t){a.modalData.errors.push(t.message)})}},getPwms:function(){var t=this;this.doPost("GPIO_Plist").then(function(a){t.$route.meta.error=null,t.pwms=[];for(var e=2;e<a.length-1;e+=7)t.pwms.push({id:parseInt(a[e]),gpio:a[e+1],fr:parseInt(a[e+2]),dc:parseInt(a[e+3]),prevFr:parseInt(a[e+2]),prevDc:parseInt(a[e+3]),s_s:parseInt(a[e+4]),name:a[e+5],reverse:parseInt(a[e+6])});t.changeDate=t.$moment.utc().toDate()}).catch(function(a){t.$route.meta.error=a.message,t.$forceUpdate()})},checkForChanges:function(){var t=this;this.loading||this.doPost("GPIO_PEtime").then(function(a){t.$route.meta.error=null,"None"!==a[2]&&(t.askedChangeDate=t.$moment.utc(a[2],"YYYY-MM-DD HH:mm:ss.SSS").toDate(),t.changeDate<t.askedChangeDate&&t.getPwms()),t.updateDate=t.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(function(a){t.$route.meta.error=a.message,t.$forceUpdate()})},setDCFR:function(t){var a=this;this.doPost("GPIO_PFRDC;"+this.pwms[t].id+";"+this.pwms[t].gpio+";"+this.pwms[t].fr+";"+this.pwms[t].dc+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")).then(function(e){a.$route.meta.error=null,a.changeDate=a.$moment.utc().toDate(),a.pwms[t].prevFr=a.pwms[t].fr,a.pwms[t].prevDc=a.pwms[t].dc}).catch(function(e){a.pwms[t].fr=a.pwms[t].prevFr,a.pwms[t].dc=a.pwms[t].prevDc,a.$route.meta.error=e.message,a.$forceUpdate()})},setSS:function(t){var a=this;this.doPost("GPIO_PSS;"+this.pwms[t].id+";"+this.pwms[t].gpio+";"+this.pwms[t].dc+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+ +!this.pwms[t].s_s+";"+this.pwms[t].fr).then(function(e){a.$route.meta.error=null,a.changeDate=a.$moment.utc().toDate(),a.pwms[t].s_s=parseInt(e[4])}).catch(function(t){a.$route.meta.error=t.message,a.$forceUpdate()})}},components:{Error:B}},Zt=Xt,ta=(e("fd84"),Object(A["a"])(Zt,Vt,Jt,!1,null,null,null)),aa=ta.exports,ea={name:"PWMs",components:{Error:B,GPIO_Pwm:aa,History:J}},sa=ea,oa=Object(A["a"])(sa,Wt,Qt,!1,null,null,null),ia=oa.exports,ra=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Chains"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("Chain",{staticClass:"column col-8 col-md-12"}),e("History",{staticClass:"column col-4 hide-md",attrs:{category:"chain"}})],1)])],1)},na=[],la=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){t.getChains()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){t.openChainModal("Add new execution chain","",-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalChainData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalChainData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalChainData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalChainData.title))]),t.modalChainData.errors.length?e("Error",{attrs:{"error-array":t.modalChainData.errors},on:{"close-err":function(a){t.modalChainData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalChainData.name,expression:"modalChainData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalChainData.name},on:{input:function(a){a.target.composing||t.$set(t.modalChainData,"name",a.target.value)}}})])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalChainData.id,expression:"modalChainData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){t.modalChainAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.modalChainAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"modal",class:{active:t.modalBondData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalBondData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalBondData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalBondData.title))]),t.modalBondData.errors.length?e("Error",{attrs:{"error-array":t.modalBondData.errors},on:{"close-err":function(a){t.modalBondData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.type,expression:"modalBondData.type"}],staticClass:"form-select",attrs:{id:"type"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalBondData,"type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"output"}},[t._v("Output")]),e("option",{attrs:{value:"pwm"}},[t._v("PWM")]),e("option",{attrs:{value:"action"}},[t._v("Action from schedule")])])])]),e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.deley,expression:"modalBondData.deley"}],staticClass:"form-input",attrs:{min:"0",type:"number",id:"deley",placeholder:"Single GPIO BCM number"},domProps:{value:t.modalBondData.deley},on:{input:function(a){a.target.composing||t.$set(t.modalBondData,"deley",a.target.value)}}})])]),"output"==t.modalBondData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalBondData.outputs.length}},[t._m(4),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.outputId,expression:"modalBondData.outputId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalBondData,"outputId",a.target.multiple?e:e[0])}}},t._l(t.modalBondData.outputs,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalBondData.outputs.length&&!t.loading,expression:"!modalBondData.outputs.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add outputs to make them pickable here.")])])]):"pwm"==t.modalBondData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalBondData.pwms.length}},[t._m(5),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.pwmId,expression:"modalBondData.pwmId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalBondData,"pwmId",a.target.multiple?e:e[0])}}},t._l(t.modalBondData.pwms,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalBondData.pwms.length&&!t.loading,expression:"!modalBondData.pwms.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add PWM's to make them pickable here.")])])]):"action"==t.modalBondData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalBondData.actions.length}},[t._m(6),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.actionId,expression:"modalBondData.actionId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalBondData,"actionId",a.target.multiple?e:e[0])}}},t._l(t.modalBondData.actions,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalBondData.actions.length&&!t.loading,expression:"!modalBondData.actions.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add actions to make them pickable here.")])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:"action"!=t.modalBondData.type,expression:"modalBondData.type != 'action'"}],staticClass:"form-group"},[t._m(7),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.state,expression:"modalBondData.state"}],staticClass:"form-select",attrs:{id:"state"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.modalBondData,"state",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("OFF")]),e("option",{attrs:{value:"1"}},[t._v("ON")]),e("option",{attrs:{value:"2"}},[t._v("OPPOSITE")])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"pwm"==t.modalBondData.type,expression:"modalBondData.type == 'pwm'"}],staticClass:"form-group"},[t._m(8),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.pwmFr,expression:"modalBondData.pwmFr"}],staticClass:"form-input",attrs:{type:"number",id:"fr"},domProps:{value:t.modalBondData.pwmFr},on:{input:function(a){a.target.composing||t.$set(t.modalBondData,"pwmFr",a.target.value)}}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"pwm"==t.modalBondData.type,expression:"modalBondData.type == 'pwm'"}],staticClass:"form-group"},[t._m(9),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.pwmDc,expression:"modalBondData.pwmDc"}],staticClass:"form-input",attrs:{type:"number",id:"dc",min:"0",max:"100"},domProps:{value:t.modalBondData.pwmDc},on:{input:function(a){a.target.composing||t.$set(t.modalBondData,"pwmDc",a.target.value)}}})])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalBondData.id,expression:"modalBondData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){t.modalBondAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.modalBondAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"modal",class:{active:t.modalReorderData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalReorderData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalReorderData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v("Reorder bonds")]),t.modalReorderData.errors.length?e("Error",{attrs:{"error-array":t.modalReorderData.errors},on:{"close-err":function(a){t.modalReorderData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[t.modalReorderData.bonds.length?e("dl",{staticClass:"list"},t._l(t.modalReorderData.bonds,function(a,s){return e("dt",{key:a.id},[e("button",{staticClass:"btn btn-link",attrs:{disabled:0==s},on:{click:function(a){t.reorder(!0,s)}}},[e("i",{staticClass:"icon icon-upward"})]),e("button",{staticClass:"btn btn-link",attrs:{disabled:s==t.modalReorderData.bonds.length-1},on:{click:function(a){t.reorder(!1,s)}}},[e("i",{staticClass:"icon icon-downward"})]),"action"==a.type?e("span",[t._v(t._s(a.lp+". "+a.actionName+" Execude "+a.deley+"s"))]):"output"==a.type?e("span",[t._v(t._s(a.lp+". "+a.outputName+" "+t.outState(a.outputState)+" "+a.deley+"s"))]):"pwm"==a.type?e("span",[t._v(t._s(a.lp+". "+a.pwmName+" "+t.pwmState(a.pwmSs,a.pwmDc,a.pwmFr)+" "+a.deley+"s"))]):t._e()])})):e("div",[t._v("No bonds added.")])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.modalReorderAction()}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.chains.length||t.loading?e("div",{staticClass:"columns"},t._l(t.chains,function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile"},[e("div",{staticClass:"tile-icon d-grid"},[e("button",{staticClass:"btn btn-action btn-lg",class:{"btn-success":!a.status&&a.bonds.length,"btn-warning":a.status,"btn-code":!a.status&&!a.bonds.length},attrs:{disabled:!a.bonds.length},on:{click:function(a){t.execudeOrCancel(s)}}},[e("i",{staticClass:"icon icon-forward centered",class:{"icon-forward":!a.status,"icon-stop":a.status}})]),e("button",{staticClass:"btn btn-link",on:{click:function(e){t.openChainModal("Edit: "+a.name,a.name,a.id)}}},[e("i",{staticClass:"icon icon-edit"})]),e("button",{staticClass:"btn btn-link",on:{click:function(e){t.openBondModal("Add new chain bond",-1,a.id,"output",1,-1,-1,600,0,0,-1)}}},[e("i",{staticClass:"icon icon-plus"})]),e("button",{staticClass:"btn btn-link",attrs:{disabled:a.bonds.length<2||a.status>0},on:{click:function(e){t.openReorderModal(a.id,s,a.bonds)}}},[e("i",{staticClass:"icon icon-resize-vert"})])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[e("span",[t._v(t._s(a.name))])]),e("div",{staticClass:"tile-subtitle"},[a.bonds.length?e("ol",{staticClass:"list"},t._l(a.bonds,function(s){return e("li",{key:s.id,class:{"text-warning":s.lp==a.status},on:{click:function(a){t.openBondModal("Edit bond lp. "+s.lp,s.id,s.chainId,s.type,s.deley,s.outputId,s.pwmId,s.pwmFr,s.pwmDc,"pwm"==s.type?s.pwmSs:s.outputState,s.actionId)}}},["action"==s.type?e("button",{staticClass:"btn btn-link"},[t._v(t._s(s.actionName+" Execude "+s.deley+"s"))]):"output"==s.type?e("button",{staticClass:"btn btn-link"},[t._v(t._s(s.outputName+" "+t.outState(s.outputState)+" "+s.deley+"s"))]):"pwm"==s.type?e("button",{staticClass:"btn btn-link"},[t._v(t._s(s.pwmName+" "+t.pwmState(s.pwmSs,s.pwmDc,s.pwmFr)+" "+s.deley+"s"))]):t._e()])})):e("div",[t._v("No bonds added.")])])])])])})):e("div",{staticClass:"empty centered"},[t._m(10),e("p",{staticClass:"empty-title h5"},[t._v("There are no chains configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){t.openChainModal("Add new execution chain","",-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},ca=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Execution chains")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Type")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"deley"}},[t._v("Deley(s)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Output target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("PWM target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Action target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"state"}},[t._v("Set state")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"fr"}},[t._v("Set frequency(Hz)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"dc"}},[t._v("Set dutycycle(%)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],da=(e("55dd"),{name:"Chains",data:function(){return{chains:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,modalChainData:{active:!1,id:-1,title:"New execution chain",name:"",errors:[]},modalBondData:{active:!1,id:-1,chainId:-1,title:"New chain bond",type:"",deley:1,outputs:[],outputId:-1,pwms:[],pwmId:-1,pwmFr:600,pwmDc:0,state:0,actions:[],actionId:-1,errors:[]},modalReorderData:{active:!1,chainId:-1,chainIndex:-1,bonds:[],errors:[]}}},props:{col:{type:String,default:"col-4 col-xl-6 col-sm-12"}},created:function(){this.getChains(),this.$cookies.isKey("chain_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("chain_arTime"))),this.autoRefresh()},beforeDestroy:function(){clearTimeout(this.refreshInterval)},methods:{autoRefresh:function(){var t=this;this.$cookies.set("chain_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(function(){t.modalChainData.active||t.modalBondData.active||t.modalReorderData.active||t.getChains(),t.autoRefresh()},1e3*this.autoRefreshTime))},compare:function(t,a){var e=0;return t.lp>a.lp?e=1:t.lp<a.lp&&(e=-1),e},openChainModal:function(t,a,e){this.modalChainData.active=!0,this.modalChainData.title=t,this.modalChainData.name=a,this.modalChainData.id=e,this.modalChainData.errors=[]},modalChainAction:function(t){var a=this;if(this.modalChainData.errors=[],t||this.modalChainData.name||this.modalChainData.errors.push("Name required !"),!this.modalChainData.errors.length){var e="";e=t?"GPIO_ChainDelete;"+this.modalChainData.id:-1===this.modalChainData.id?"GPIO_ChainAdd;"+this.modalChainData.name:"GPIO_ChainUpdate;"+this.modalChainData.id+";"+this.modalChainData.name,this.doPost(e).then(function(t){a.getChains(),a.modalChainData.active=!1}).catch(function(t){a.modalChainData.errors.push(t.message)})}},openBondModal:function(t,a,e,s,o,i,r,n,l,c,d){var m=this;this.modalBondData.active=!0,this.modalBondData.title=t,this.modalBondData.id=a,this.modalBondData.chainId=e,this.modalBondData.type=s,this.modalBondData.deley=o,this.modalBondData.outputId=i,this.modalBondData.pwms=[],this.modalBondData.pwmId=r,this.modalBondData.pwmFr=n,this.modalBondData.pwmDc=l,this.modalBondData.state=c,this.modalBondData.actions=[],this.modalBondData.actionId=d,this.modalBondData.errors=[],this.modalBondData.outputs=[],this.doPosts([this.doQPost("GPIO_Oname").then(function(t){for(var a=2;a<t.length-1;a+=4)m.modalBondData.outputs.push({id:t[a],name:t[a+1]})}),this.doQPost("GPIO_PWMnames").then(function(t){for(var a=2;a<t.length-1;a+=2)m.modalBondData.pwms.push({id:t[a],name:t[a+1]})}),this.doQPost("GPIO_ActionsNames").then(function(t){for(var a=2;a<t.length-1;a+=2)m.modalBondData.actions.push({id:t[a],name:t[a+1]})})]).catch(function(t){m.modalData.errors.push(t.message)})},modalBondAction:function(t){var a=this;if(this.modalBondData.errors=[],t||(this.modalBondData.deley||this.modalBondData.errors.push("Deley is required !"),"output"!=this.modalBondData.type||this.modalBondData.outputId||this.modalBondData.errors.push("Output id is required !"),"pwm"!=this.modalBondData.type||this.modalBondData.pwmId||this.modalBondData.errors.push("Pwm id is required !"),"action"!=this.modalBondData.type||this.modalBondData.actionId||this.modalBondData.errors.push("Action id is required !")),!this.modalBondData.errors.length){var e="",s=null;"output"==this.modalBondData.type?s=this.modalBondData.outputId:"pwm"==this.modalBondData.type?s=this.modalBondData.pwmId:"action"==this.modalBondData.type&&(s=this.modalBondData.actionId),e=t?"GPIO_ChainBondDelete;"+this.modalBondData.id+";"+this.modalBondData.chainId:-1===this.modalBondData.id?"GPIO_ChainBondAdd;"+this.modalBondData.chainId+";"+this.modalBondData.type+";"+this.modalBondData.deley+";"+s+";"+this.modalBondData.state+";"+this.modalBondData.pwmFr+";"+this.modalBondData.pwmDc:"GPIO_ChainBondUpdate;"+this.modalBondData.chainId+";"+this.modalBondData.type+";"+this.modalBondData.deley+";"+s+";"+this.modalBondData.state+";"+this.modalBondData.pwmFr+";"+this.modalBondData.pwmDc+";"+this.modalBondData.id,this.doPost(e).then(function(t){a.getChains(),a.modalBondData.active=!1}).catch(function(t){a.modalBondData.errors.push(t.message)})}},openReorderModal:function(t,a,e){this.modalReorderData.active=!0,this.modalReorderData.chainId=t,this.modalReorderData.chainIndex=a,this.modalReorderData.bonds=e},reorder:function(t,a){var e=this.modalReorderData.bonds[a];t?(this.modalReorderData.bonds[a]=this.modalReorderData.bonds[a-1],this.modalReorderData.bonds[a].lp++,e.lp--,this.modalReorderData.bonds[a-1]=e):(this.modalReorderData.bonds[a]=this.modalReorderData.bonds[a+1],this.modalReorderData.bonds[a].lp--,e.lp++,this.modalReorderData.bonds[a+1]=e)},modalReorderAction:function(){for(var t=this,a="",e=0;e<this.modalReorderData.bonds.length;e++)a+=this.modalReorderData.bonds[e].lp+"$"+this.modalReorderData.bonds[e].id,e<this.modalReorderData.bonds.length-1&&(a+="$");this.doPost("GPIO_ChainBondsOrder;"+this.modalReorderData.chainId+";"+a).then(function(a){t.chains[t.modalReorderData.chainIndex].bonds=t.modalReorderData.bonds,t.modalReorderData.active=!1}).catch(function(a){t.modalReorderData.errors.push(a.message)})},getChains:function(){var t=this;this.doPost("GPIO_ChainList").then(function(a){t.$route.meta.error=null,t.chains=[];for(var e=2;e<a.length-1;e+=5){for(var s=a[e+4].split("$"),o=[],i=0;i<s.length-1;i+=15)o.push({id:parseInt(s[i]),chainId:parseInt(s[i+1]),lp:parseInt(s[i+2]),deley:parseInt(s[i+3]),type:s[i+4],actionId:parseInt(s[i+5]),outputId:parseInt(s[i+6]),outputState:parseInt(s[i+7]),pwmId:parseInt(s[i+8]),pwmFr:parseInt(s[i+9]),pwmDc:parseInt(s[i+10]),pwmSs:parseInt(s[i+11]),outputName:s[i+12],pwmName:s[i+13],actionName:s[i+14]});o=o.sort(t.compare),t.chains.push({id:parseInt(a[e]),status:parseInt(a[e+1]),name:a[e+2],bonds:o})}t.updateDate=t.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(function(a){t.$route.meta.error=a.message,t.$forceUpdate()})},execudeOrCancel:function(t){var a=this,e="";e=this.chains[t].status?"GPIO_ChainCancel;"+this.chains[t].id:"GPIO_ChainExecute;"+this.chains[t].id,this.doPost(e).then(function(e){a.$route.meta.error=null,"GPIO_ChainExecute"==e[1]?a.chains[t].status=1:"GPIO_ChainCancel"==e[1]&&(a.chains[t].status=0)}).catch(function(t){a.$route.meta.error=t.message,a.$forceUpdate()})}},components:{Error:B}}),ma=da,ua=(e("fa2b"),Object(A["a"])(ma,la,ca,!1,null,null,null)),pa=ua.exports,ha={name:"Chains",components:{Error:B,Chain:pa,History:J}},va=ha,fa=Object(A["a"])(va,ra,na,!1,null,null,null),ga=fa.exports,Da=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Sensors"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("SensorList",{staticClass:"column",class:{"col-4":t.selectedIds.length,"col-12":!t.selectedIds.length},attrs:{col:t.whatCol()},on:{selectionChange:function(a){t.selectedSensorsChange(a)}}}),t.selectedIds.length?e("SensorsHistory",{staticClass:"column col-8",attrs:{sensorsIds:t.selectedIds}}):t._e()],1)])],1)},Ca=[],ba=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){t.getSensors()}}},[e("i",{staticClass:"icon icon-refresh centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.historyRefresh,expression:"modalData.historyRefresh"}],staticClass:"form-input",attrs:{type:"number",id:"hs",placeholder:"In seconds"},domProps:{value:t.modalData.historyRefresh},on:{input:function(a){a.target.composing||t.$set(t.modalData,"historyRefresh",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.historyKeep,expression:"modalData.historyKeep"}],staticClass:"form-input",attrs:{type:"number",min:"1",id:"hk",placeholder:"In days"},domProps:{value:t.modalData.historyKeep},on:{input:function(a){a.target.composing||t.$set(t.modalData,"historyKeep",a.target.value)}}})])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.sensors.length||t.loading?e("div",{staticClass:"columns"},t._l(t.sensors,function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile tile-centered"},[e("div",{staticClass:"tile-icon"},[e("div",{staticClass:"tile-title text-large text-bold"},[t._v(t._s(a.value+a.unit))])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[t._v(t._s(a.name))]),e("div",{staticClass:"tile-subtitle text-gray "},[t._v(t._s(a.id))])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title text-right"},[t._v(t._s(a.refreshDate))]),e("div",{staticClass:"tile-subtitle text-gray text-right"},[t._v(t._s(a.type))])]),e("div",{staticClass:"tile-action d-grid"},[e("div",{staticClass:"form-group float-right"},[e("label",{staticClass:"form-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.selected,expression:"sensor.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.selected)?t._i(a.selected,null)>-1:a.selected},on:{change:[function(e){var s=a.selected,o=e.target,i=!!o.checked;if(Array.isArray(s)){var r=null,n=t._i(s,r);o.checked?n<0&&t.$set(a,"selected",s.concat([r])):n>-1&&t.$set(a,"selected",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(a,"selected",i)},function(e){t.setSelection(a.selected,a.id,a.unit,a.name)}]}}),e("i",{staticClass:"form-icon"})])]),e("button",{staticClass:"btn btn-link"},[e("i",{staticClass:"icon icon-edit",on:{click:function(e){t.openModal("Edit "+a.id,a.name,a.id,a.historyRefresh,a.historyKeep)}}})]),e("button",{staticClass:"btn btn-link"},[e("i",{staticClass:"icon icon-refresh",on:{click:function(e){t.refreshSensor(a.id,s)}}})])])])])})):e("div",{staticClass:"empty centered"},[t._m(4),e("p",{staticClass:"empty-title h5"},[t._v("There are no sensors configured")])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},_a=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Sensors list")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"hs"}},[t._v("History save interval")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"hk"}},[t._v("History range back")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],ya={name:"SensorsList",data:function(){return{sensors:[],selectedSensors:[],selectedUnit:"any",refreshInterval:"",updateDate:"",autoRefreshTime:5,modalData:{active:!1,id:-1,index:-1,title:"",name:"",historyRefresh:3600,historyKeep:7,errors:[]}}},props:{col:{type:String,default:"col-4 col-md-6 col-xl-12"}},created:function(){this.getSensors(),this.$cookies.isKey("sensor_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("sensor_arTime"))),this.autoRefresh()},beforeDestroy:function(){clearTimeout(this.refreshInterval)},methods:{autoRefresh:function(){var t=this;this.$cookies.set("sensor_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(function(){t.modalData.active||t.getSensors(),t.autoRefresh()},1e3*this.autoRefreshTime))},setSelection:function(t,a,e,s){t&&0==this.selectedSensors.length?this.selectedUnit=e:t||1!=this.selectedSensors.length||(this.selectedUnit="any"),t&&-1==this.selectedSensors.indexOf(a)?this.selectedSensors.push(a):!t&&this.selectedSensors.indexOf(a)>-1&&this.selectedSensors.splice(this.selectedSensors.indexOf(a),1),this.$emit("selectionChange",this.selectedSensors)},openModal:function(t,a,e,s,o){this.modalData.active=!0,this.modalData.title=t,this.modalData.name=a,this.modalData.id=e,this.modalData.historyRefresh=s,this.modalData.historyKeep=o,this.modalData.errors=[]},modalAction:function(t){var a=this;if(this.modalData.errors=[],t||(this.modalData.name||this.modalData.errors.push("Name required !"),this.modalData.historyRefresh||this.modalData.errors.push("History refresh value is required !"),this.modalData.historyKeep||this.modalData.errors.push("History range back value is required !")),!this.modalData.errors.length){var e="";e=t?"SENSOR_remove;"+this.modalData.id:"SENSOR_update;"+this.modalData.id+";"+this.modalData.name+";"+this.modalData.historyRefresh+";"+this.modalData.historyKeep,this.doPost(e).then(function(t){a.getSensors(),a.modalData.active=!1}).catch(function(t){a.modalData.errors.push(t.message)})}},getSensors:function(){var t=this;this.doPost("SENSOR_list").then(function(a){t.$route.meta.error=null,t.sensors=[];for(var e=2;e<a.length-1;e+=8)t.sensors.push({id:a[e],name:a[e+1],type:a[e+2],value:parseFloat(a[e+3]),historyRefresh:a[e+4],historyKeep:a[e+5],unit:a[e+6],refreshDate:t.$moment.utc(a[e+7],"YYYY-MM-DD HH:mm:ss").local().format("YYYY-MM-DD HH:mm:ss"),selected:t.selectedSensors.indexOf(a[e])>-1});t.updateDate=t.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(function(a){t.$route.meta.error=a.message,t.$forceUpdate()})},refreshSensor:function(t,a){var e=this;this.doPost("SENSOR_refresh;"+t).then(function(t){e.$route.meta.error=null;var s=parseFloat(t[2]);(s=-999)?e.$route.meta.error="Sensor error":e.sensors[a].value=s}).catch(function(t){e.$route.meta.error=t.message,e.$forceUpdate()})}},components:{Error:B}},wa=ya,Ta=(e("0408"),Object(A["a"])(wa,ba,_a,!1,null,null,null)),$a=Ta.exports,Ia=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),t._m(1),e("div",{staticClass:"panel-body"},[t.datasets.length?e("LineChart",{attrs:{"chart-data":t.chartData,options:t.chartOptions}}):t._e(),t.sensorsHistory.length?e("table",{staticClass:"table table-striped"},[t._m(2),e("tbody",t._l(t.sensorsHistory,function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.datelocal))]),e("td",[t._v(t._s(a.value))]),e("td",[t._v(t._s(a.unit))])])}))]):e("div",{staticClass:"empty centered"},[t._m(3),e("p",{staticClass:"empty-title h5"},[t._v("There are is no data for selected sensors")])])],1),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))])])])])},ka=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Selected sensors history")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Sensor name")]),e("th",[t._v("Date")]),e("th",[t._v("Value")]),e("th",[t._v("Unit")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],Aa=(e("20d6"),e("1fca")),Pa=Aa["b"].reactiveProp,xa={extends:Aa["a"],mixins:[Pa],props:["data","options"],mounted:function(){this.renderChart(this.chartData,this.options)}},Sa=xa,Ma=Object(A["a"])(Sa,T,$,!1,null,null,null),Na=Ma.exports,Ya={name:"SensorsHistory",data:function(){return{updateDate:"",sensorsHistory:[],dateLabels:[],datasets:[],chartData:{},chartOptions:{responsive:!0,maintainAspectRatio:!1,title:{display:!0,text:"Selected sensors history data"},scales:{xAxes:[{type:"time",time:{displayFormats:{second:"H:mm:ss",minute:"H:mm",hour:"H:mm"},tooltipFormat:"YYYY-MM-DD HH:mm:ss"},display:!0,scaleLabel:{display:!0,labelString:"Date/Time"},ticks:{major:{fontStyle:"bold",fontColor:"#FF0000"}}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Value"}}]}}}},props:{sensorsIds:{type:Array}},created:function(){},beforeDestroy:function(){},methods:{dynamicColors:function(){var t=Math.floor(255*Math.random()),a=Math.floor(255*Math.random()),e=Math.floor(255*Math.random());return"rgb("+t+","+a+","+e+")"}},watch:{sensorsIds:{handler:function(t,a){for(var e=this,s="",o=0;o<t.length;o++)s+="'"+t[o]+"'",o<t.length-1&&(s+=",");this.sensorsHistory=[],this.doPost("SENSORS_history;"+s).then(function(t){for(var a=2;a<t.length-1;a+=5)e.sensorsHistory.push({id:t[a],name:t[a+1],unit:t[a+2],dateutc:t[a+3],datelocal:e.$moment.utc(t[a+3],"YYYY-MM-DD HH:mm:ss").local().format("YYYY-MM-DD HH:mm:ss"),value:parseFloat(t[a+4])});for(var s in e.datasets=[],e.sensorsHistory){var o=e.datasets.findIndex(function(t){return t.id==e.sensorsHistory[s].id}),i=e.dynamicColors();-1==o&&(o=e.datasets.push({id:e.sensorsHistory[s].id,label:e.sensorsHistory[s].name,fill:!1,borderColor:i,backgroundColor:i,data:[]})-1),e.datasets[o].data.push({x:e.$moment.utc(e.sensorsHistory[s].dateutc,"YYYY-MM-DD HH:mm:ss").local().toDate(),y:e.sensorsHistory[s].value})}e.chartData={datasets:e.datasets},e.updateDate=e.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(function(t){e.$route.meta.error=t.message,e.$forceUpdate()})},immediate:!0}},components:{Error:B,LineChart:Na}},Oa=Ya,Ra=Object(A["a"])(Oa,Ia,ka,!1,null,null,null),ja=Ra.exports,Ea={name:"Sensors",components:{Error:B,SensorList:$a,SensorsHistory:ja},data:function(){return{selectedIds:[]}},methods:{selectedSensorsChange:function(t){this.selectedIds=t},whatCol:function(){return this.selectedIds.length?"col-12":"col-4"}}},Ba=Ea,Ha=Object(A["a"])(Ba,Da,Ca,!1,null,null,null),Ga=Ha.exports,La=e("2b27"),Fa=e.n(La);s["a"].use(S["a"]),s["a"].use(Fa.a);var Ua=new S["a"]({mode:"history",routes:[{path:"/outputs",name:"outputs",meta:{error:null,protected:!0},component:pt},{path:"/inputs",name:"inputs",meta:{error:null,protected:!0},component:$t},{path:"/pwms",name:"pwms",meta:{error:null,protected:!0},component:ia},{path:"/chains",name:"chains",meta:{error:null,protected:!0},component:ga},{path:"/actions",name:"actions",meta:{error:null,protected:!0},component:jt},{path:"/sensors",name:"sensors",meta:{error:null,protected:!0},component:Ga},{path:"/",name:"Home",meta:{error:null,protected:!0},component:at},{path:"/login",name:"login",meta:{error:null,protected:!0},component:Kt},{path:"*",meta:{error:"Specfied route not found !",protected:!0},component:at}]});Ua.beforeEach(function(t,a,e){s["a"].axios.post("/","authCheck",{headers:{"Content-type":"raw"}}).then(function(a){a.data?Fa.a.isKey("session")?e():"/login"!==t.path?e("/login"):e():(t.meta.protected=!1,e())}).catch(function(a){t.meta.error=a.message,e()})});var qa=Ua;e("7a07"),e("7613"),e("2698");s["a"].config.productionTip=!1,new s["a"]({router:qa,render:function(t){return t(x)}}).$mount("#app")},"6e21":function(t,a,e){"use strict";var s=e("20b0"),o=e.n(s);o.a},"6f72":function(t,a,e){"use strict";var s=e("9afd"),o=e.n(s);o.a},"7ee4":function(t,a,e){"use strict";var s=e("d76c"),o=e.n(s);o.a},"9afd":function(t,a,e){},a71c:function(t,a,e){"use strict";var s=e("d103"),o=e.n(s);o.a},b861:function(t,a,e){},bfc5:function(t,a,e){"use strict";var s=e("e9ae"),o=e.n(s);o.a},cccb:function(t,a,e){"use strict";var s=e("b861"),o=e.n(s);o.a},cf05:function(t,a,e){t.exports=e.p+"img/logo.d2c96850.png"},d103:function(t,a,e){},d4d1:function(t,a,e){},d76c:function(t,a,e){},e9ae:function(t,a,e){},fa2b:function(t,a,e){"use strict";var s=e("d4d1"),o=e.n(s);o.a},fd84:function(t,a,e){"use strict";var s=e("0e65"),o=e.n(s);o.a}});
//# sourceMappingURL=app-legacy.eb01af67.js.map