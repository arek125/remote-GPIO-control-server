(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CustomCmds"],{"3fb9":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"toast toast-error"},[e("button",{staticClass:"btn btn-clear float-right",on:{click:function(a){return t.$emit("close-err")}}}),""!==t.errorMessage&&null!==t.errorMessage?e("span",[t._v(" "+t._s(t.errorMessage)+" ")]):t._e(),t.errorArray.length&&null!==t.errorArray?e("ul",t._l(t.errorArray,(function(a,s){return e("li",{key:s},[t._v(t._s(a))])})),0):t._e()])},o=[],r={name:"Error",props:{errorMessage:{type:String,required:!1},errorArray:{default:function(){return[]},type:Array,required:!1}}},i=r,n=e("2877"),l=Object(n["a"])(i,s,o,!1,null,null,null);a["a"]=l.exports},"49a3":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"input-group filter"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateFrom,expression:"dateFrom"}],staticClass:"form-input input-sm",attrs:{type:"date",placeholder:"Date from"},domProps:{value:t.dateFrom},on:{input:function(a){a.target.composing||(t.dateFrom=a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateTo,expression:"dateTo"}],staticClass:"form-input input-sm",attrs:{type:"date",placeholder:"Date to"},domProps:{value:t.dateTo},on:{input:function(a){a.target.composing||(t.dateTo=a.target.value)}}}),e("button",{staticClass:"btn input-group-btn btn-sm",on:{click:function(a){return t.getHistory()}}},[e("i",{staticClass:"icon icon-refresh centered"})])])]),e("div",{staticClass:"panel-body"},[t.history.length?e("table",{staticClass:"table table-striped"},[t._m(1),e("tbody",t._l(t.history,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.date))]),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.state))]),e("td",[t._v(t._s(a.by))])])})),0)]):e("div",{staticClass:"empty centered"},[t._m(2),e("p",{staticClass:"empty-title h5"},[t._v("There are is no data in the selected range")])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){return t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("History")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Date")]),e("th",[t._v("Name")]),e("th",[t._v("Action")]),e("th",[t._v("By")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],r=e("3fb9"),i={name:"History",data:function(){return{history:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,dateFrom:"",dateTo:""}},props:["category"],created:function(){this.dateFrom=this.$moment().subtract(7,"days").format("YYYY-MM-DD"),this.dateTo=this.$moment().add(1,"days").format("YYYY-MM-DD"),this.getHistory(),this.$cookies.isKey("hr_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("hr_arTime"))),this.autoRefresh()},beforeDestroy:function(){clearTimeout(this.refreshInterval)},methods:{autoRefresh:function(){var t=this;this.$cookies.set("hr_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout((function(){t.getHistory(),t.autoRefresh()}),1e3*this.autoRefreshTime))},getHistory:function(){var t=this;this.dateFrom&&this.dateTo&&this.doPost("HR_selByCat;"+this.$moment(this.dateFrom,"YYYY-MM-DD").utc().format("YYYY-MM-DD")+";"+this.$moment(this.dateTo+" 23:59:59","YYYY-MM-DD HH:mm:ss").utc().format("YYYY-MM-DD")+";"+this.category).then((function(a){t.$route.meta.error=null,t.history=[];for(var e=2;e<a.length-1;e+=5)t.history.push({id:parseInt(a[e]),date:t.$moment.utc(a[e+1],"YYYY-MM-DD HH:mm:ss").local().format("YYYY-MM-DD HH:mm:ss"),by:a[e+2],name:a[e+3],state:a[e+4]});t.updateDate=t.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")})).catch((function(a){t.$route.meta.error=a.message,t.$forceUpdate()}))}},components:{Error:r["a"]}},n=i,l=e("2877"),c=Object(l["a"])(n,s,o,!1,null,null,null);a["a"]=c.exports},"61b1":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"customcmds"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("CustomCmds",{staticClass:"column col-8 col-md-12"}),e("History",{staticClass:"column col-4 col-md-12",attrs:{category:"cmd"}})],1)])],1)},o=[],r=e("3fb9"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getCmds()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){return t.openModal("Add new cmd",-1,"","",!1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.cmd,expression:"modalData.cmd"}],staticClass:"form-input",attrs:{type:"text",id:"cmd",placeholder:"Shell command"},domProps:{value:t.modalData.cmd},on:{input:function(a){a.target.composing||t.$set(t.modalData,"cmd",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.wait,expression:"modalData.wait"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalData.wait)?t._i(t.modalData.wait,null)>-1:t.modalData.wait},on:{change:function(a){var e=t.modalData.wait,s=a.target,o=!!s.checked;if(Array.isArray(e)){var r=null,i=t._i(e,r);s.checked?i<0&&t.$set(t.modalData,"wait",e.concat([r])):i>-1&&t.$set(t.modalData,"wait",e.slice(0,i).concat(e.slice(i+1)))}else t.$set(t.modalData,"wait",o)}}}),e("i",{staticClass:"form-icon"}),t._v("Wait for command output ")])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalData.id,expression:"modalData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.cmds.length||t.loading?e("div",{staticClass:"columns"},t._l(t.cmds,(function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile tile-centered"},[e("div",{staticClass:"tile-icon"},[e("button",{staticClass:"btn btn-action btn-lg",class:{"btn-warning":a.running},on:{click:function(e){return t.execCmd(s,a.id)}}},[e("i",{staticClass:"icon icon-forward centered"})])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[t._v(t._s(a.name))]),e("div",{staticClass:"tile-subtitle text-gray"},[t._v(t._s(a.cmd))])]),e("div",{staticClass:"tile-action"},[e("button",{staticClass:"btn btn-link",on:{click:function(e){return t.openModal("Edit: "+a.name,a.id,a.name,a.cmd,a.wait)}}},[e("i",{staticClass:"icon icon-edit"})])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:a.lastOutput,expression:"cmd.lastOutput"}],staticClass:"toast toast-success"},[e("button",{staticClass:"btn btn-clear float-right",on:{click:function(t){a.lastOutput=""}}}),t._v(" "+t._s(a.lastOutput)+" ")])])})),0):e("div",{staticClass:"empty centered"},[t._m(3),e("p",{staticClass:"empty-title h5"},[t._v("There are no cmds configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openModal("Add new cmd",-1,"","",!1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))])])])])},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Custom shell commands")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"cmd"}},[t._v("Command")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],l=(e("b0c0"),{name:"CustomCmds",data:function(){return{cmds:[],updateDate:"",modalData:{active:!1,id:-1,title:"New cmd",name:"",cmd:"",wait:!1,errors:[]}}},props:{col:{type:String,default:"col-4 col-lg-6 col-sm-12"}},created:function(){this.getCmds()},methods:{openModal:function(t,a,e,s,o){this.modalData.active=!0,this.modalData.title=t,this.modalData.name=e,this.modalData.cmd=s,this.modalData.wait=o,this.modalData.id=a,this.modalData.errors=[]},modalAction:function(t){var a=this;if(this.modalData.errors=[],t||(this.modalData.name||this.modalData.errors.push("Name required !"),this.modalData.cmd||this.modalData.errors.push("Cmd required !")),!this.modalData.errors.length){var e="";e=t?"DeleteCustomCmd;"+this.modalData.id:-1===this.modalData.id?"AddCustomCmd;"+this.modalData.name+";"+this.modalData.cmd+";"+ +this.modalData.wait+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS"):"UpdateCustomCmd;"+this.modalData.id+";"+this.modalData.name+";"+this.modalData.cmd+";"+ +this.modalData.wait+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS"),this.doPost(e).then((function(){a.getCmds(),a.modalData.active=!1})).catch((function(t){a.modalData.errors.push(t.message)}))}},getCmds:function(){var t=this;this.doPost("GetCustomCmds").then((function(a){t.$route.meta.error=null,t.cmds=[];for(var e=2;e<a.length-1;e+=4)t.cmds.push({id:parseInt(a[e]),name:a[e+1],cmd:a[e+2],wait:Boolean(parseInt(a[e+3])),running:!1,lastOutput:""});t.updateDate=t.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")})).catch((function(a){t.$route.meta.error=a.message,t.$forceUpdate()}))},execCmd:function(t,a){var e=this;this.cmds[t].running=!0,this.doPost("ExecCustomCmd;"+a+";"+ +this.cmds[t].wait).then((function(a){e.$route.meta.error=null,e.cmds[t].running=!1,e.cmds[t].wait&&(e.cmds[t].lastOutput=a[2])})).catch((function(a){e.cmds[t].running=!1,e.$route.meta.error=a.message,e.$forceUpdate()}))}},components:{Error:r["a"]}}),c=l,m=e("2877"),d=Object(m["a"])(c,i,n,!1,null,null,null),u=d.exports,h=e("49a3"),f={name:"customcmds",components:{Error:r["a"],CustomCmds:u,History:h["a"]}},p=f,v=Object(m["a"])(p,s,o,!1,null,null,null);a["default"]=v.exports},b0c0:function(t,a,e){var s=e("83ab"),o=e("9bf2").f,r=Function.prototype,i=r.toString,n=/^\s*function ([^ (]*)/,l="name";s&&!(l in r)&&o(r,l,{configurable:!0,get:function(){try{return i.call(this).match(n)[1]}catch(t){return""}}})}}]);