(function(t){function a(a){for(var s,r,l=a[0],n=a[1],c=a[2],m=0,u=[];m<l.length;m++)r=l[m],o[r]&&u.push(o[r][0]),o[r]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);d&&d(a);while(u.length)u.shift()();return i.push.apply(i,c||[]),e()}function e(){for(var t,a=0;a<i.length;a++){for(var e=i[a],s=!0,l=1;l<e.length;l++){var n=e[l];0!==o[n]&&(s=!1)}s&&(i.splice(a--,1),t=r(r.s=e[0]))}return t}var s={},o={app:0},i=[];function r(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=s,r.d=function(t,a,e){r.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,a){if(1&a&&(t=r(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)r.d(e,s,function(a){return t[a]}.bind(null,s));return e},r.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(a,"a",a),a},r.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=a,l=l.slice();for(var c=0;c<l.length;c++)a(l[c]);var d=n;i.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"034f":function(t,a,e){"use strict";var s=e("64a9"),o=e.n(s);o.a},4678:function(t,a,e){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(t){var a=i(t);return e(a)}function i(t){var a=s[t];if(!(a+1)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a}o.keys=function(){return Object.keys(s)},o.resolve=i,t.exports=o,o.id="4678"},"56d7":function(t,a,e){"use strict";e.r(a);var s=e("2b0e"),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"off-canvas off-canvas-sidebar-show",attrs:{id:"app"}},[e("a",{staticClass:"off-canvas-toggle btn btn-link btn-action",on:{click:function(a){t.sidebarActive=!0}}},[e("i",{staticClass:"icon icon-menu"})]),e("div",{staticClass:"off-canvas-sidebar",class:{active:t.sidebarActive},attrs:{id:"sidebar"}},[t._m(0),e("div",{staticClass:"divider"}),e("ul",{staticClass:"nav"},[e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/"}},[e("a",[t._v("Home")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/outputs"}},[e("a",[t._v("Outputs")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/inputs"}},[e("a",[t._v("Inputs")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/pwms"}},[e("a",[t._v("Pwm's")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/chains"}},[e("a",[t._v("Chains")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/actions"}},[e("a",[t._v("Automation")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/sensors"}},[e("a",[t._v("Sensors")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/rf"}},[e("a",[t._v("RF Tx/Rx")])]),e("router-link",{staticClass:"nav-item",attrs:{"exact-active-class":"active",tag:"li",to:"/cmds"}},[e("a",[t._v("Custom commands")])]),e("div",{staticClass:"divider"}),t.$route.meta.protected&&!t.$cookies.isKey("session")?e("router-link",{staticClass:"nav-item",attrs:{"active-class":"active",tag:"li",to:"/login"}},[e("a",[t._v("Login")])]):t.$route.meta.protected&&t.$cookies.isKey("session")?e("li",{staticClass:"nav-item",on:{click:function(a){t.$cookies.remove("session"),t.$cookies.remove("encKey"),t.$forceUpdate()}}},[e("a",{attrs:{href:""}},[t._v("Logout")])]):t._e()],1)]),e("div",{staticClass:"hide-lg",staticStyle:{"min-width":"200px"}}),e("a",{staticClass:"off-canvas-overlay",on:{click:function(a){t.sidebarActive=!1}}}),e("div",{staticClass:"off-canvas-content"},[e("router-view"),e("vue-progress-bar")],1)])},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:e("cf05")}})])}],r=(e("6b54"),e("c198")),l=e.n(r),n=e("f8d5"),c=e.n(n),d=e("1132"),m=e.n(d),u=e("17e1"),h=e.n(u),p={methods:{encrypt(t,a){a=c.a.parse(a);var e=h.a.random(16),s=l.a.encrypt(t,a,{iv:e});return e.concat(s.ciphertext).toString(m.a)},decrypt(t,a){a=c.a.parse(a);var e=m.a.parse(t),s=e.clone();s.sigBytes=16,s.clamp(),e.words.splice(0,4),e.sigBytes-=16;var o=l.a.decrypt({ciphertext:e},a,{iv:s});return o.toString(c.a)}}},v=(e("ac6a"),e("28a5"),{methods:{parseReq(t){return this.$route.meta.protected?this.$cookies.get("session")+";"+this.encrypt(t+";WEB",this.$cookies.get("encKey"))+";":"1;"+t+";WEB;"},parseRes(t){let a=t.split(";");if(Array.isArray(a)){if("false"===a[0])throw Error(a[1]);return this.$route.meta.protected?this.decrypt(a[1],this.$cookies.get("encKey")).split(";"):a}throw Error("Not an array in response")},isGPIOnumber(t){for(var a=0;a<t.length;a++)if(!/^(2|3|4|17|27|22|10|9|11|5|6|13|19|26|14|15|18|23|24|25|8|7|12|16|20|21)$/g.test(t[a]))return t[a];return-1},stateButton(t,a){return 1===t&&!a||0===t&&a?"btn-success":0===t&&!a||1===t&&a?"btn-code":"btn-warning"},outState(t){return t=parseInt(t),0===t?"OFF":1===t?"ON":"OPPOSITE"},pwmState(t,a,e){let s=this.outState(t);return isNaN(a)||""===a||(s+="/"+a+"%"),isNaN(e)||""===e||(s+="/"+e+"Hz"),s},doPost(t){return this.$Progress.start(),this.loading=!0,this.$http.post("/",this.parseReq(t),{headers:{"Content-type":"raw"}}).then(t=>{return this.$Progress.finish(),this.parseRes(t.data)}).catch(t=>{throw this.$Progress.fail(),Error(t.message)}).then(t=>{return this.loading=!1,t})},doQPost(t){return this.$http.post("/",this.parseReq(t),{headers:{"Content-type":"raw"}}).then(t=>{return this.parseRes(t.data)})},doPosts(t){return this.$Progress.start(),this.loading=!0,Promise.all(t).catch(t=>{throw this.$Progress.fail(),Error(t.message)}).then(()=>{this.$Progress.finish(),this.loading=!1})}},data(){return{loading:!1}}}),f=e("26b9"),g=e.n(f),D=e("2ead"),C=e.n(D),_=e("bc3a"),b=e.n(_),y=e("a7fe"),w=e.n(y);s["a"].mixin(p),s["a"].mixin(v),s["a"].use(g.a,{color:"rgb(143, 255, 199)",failedColor:"red",height:"2px"}),s["a"].use(C.a),s["a"].use(w.a,b.a);var k={data(){return{sidebarActive:!1}}},T=k,$=(e("034f"),e("2877")),I=Object($["a"])(T,o,i,!1,null,null,null),P=I.exports,A=e("8c4f"),x=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Home"},[e("div",{staticClass:"modal",class:{active:t.countDownModal.active}},[e("a",{staticClass:"modal-overlay"}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[t._v("\n                  Page will realod in "+t._s(t.countDownModal.currentTime)+" seconds.\n              ")])])])]),e("div",{staticClass:"modal",class:{active:t.logsModalActive}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.logsModalActive=!1}}}),e("div",{staticClass:"modal-container log-container"},[e("div",{staticClass:"modal-header"},[e("div",{staticClass:"modal-title h5"},[t._v("Server Logs")]),e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.logsModalActive=!1}}})]),e("div",{staticClass:"modal-body"},[t.logsModalActive?e("ServerLogs"):t._e()],1)])]),e("div",{staticClass:"modal",class:{active:t.modalConfig.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalConfig.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalConfig.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v("RGC-Config")]),t.modalConfig.errors.length?e("Error",{attrs:{"error-array":t.modalConfig.errors},on:{"close-err":function(a){t.modalConfig.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},t._l(t.modalConfig.sections,(function(a){return e("div",{key:a.name},[e("h3",[t._v(t._s(a.name))]),e("table",{staticClass:"table table-striped table-hover"},[e("tbody",t._l(a.kvs,(function(a){return e("tr",{key:a.key},[e("td",[t._v(t._s(a.key))]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:a.val,expression:"kv.val"}],staticClass:"form-input",attrs:{type:"text"},domProps:{value:a.val},on:{input:function(e){e.target.composing||t.$set(a,"val",e.target.value)}}})])])})),0)])])})),0)]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.setConfigSections()}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"panel column col-4 col-md-12"},[t._m(0),e("div",{staticClass:"panel-nav"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-body"},[e("ul",[e("li",[t._v("Hostname: "+t._s(t.serverInfo.hostname))]),e("li",[t._v("Load: "+t._s(t.serverInfo.load))]),e("li",[t._v("Version: "+t._s(t.serverInfo.version))]),e("li",[t._v("Up since: "+t._s(t.serverInfo.upSince))]),t._l(t.timeInfo,(function(a){return e("li",{key:a},[t._v(t._s(a))])}))],2)]),e("div",{staticClass:"panel-footer"},[e("div",{staticClass:"btn-group btn-group-block"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getConfigSections()}}},[t._v("Config")]),e("button",{staticClass:"btn",on:{click:function(a){return t.comAndReload("Server_restart",20,"Restart RGC app ?")}}},[t._v("Restart RGC app")]),e("button",{staticClass:"btn",on:{click:function(a){return t.comAndReload("Server_reboot",60,"Reboot server ?")}}},[t._v("Reboot server")]),e("button",{staticClass:"btn",on:{click:function(a){t.logsModalActive=!0}}},[t._v("Server Logs")]),e("button",{staticClass:"btn",on:{click:function(a){return t.openLink("https://github.com/arek125/remote-GPIO-control-server/releases")}}},[t._v("Change log")]),e("button",{staticClass:"btn",on:{click:function(a){return t.openLink("https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=arek125%40gmail%2ecom&lc=PL&item_name=RGC%20FAMILY&currency_code=USD&bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHostedGuest")}}},[t._v("Donate")]),e("button",{staticClass:"btn",on:{click:function(a){return t.openLink("https://github.com/arek125/remote-GPIO-control-server/issues")}}},[t._v("Issue raport")]),t.updateAvalible?e("button",{staticClass:"btn",on:{click:function(a){return t.comAndReload("ServerUpdateFromGH",60,"Perform server update now ?")}}},[t._v("Update to "+t._s(t.newTagName)+" ready !")]):t._e()])])]),e("History",{staticClass:"column col-4 col-md-12",attrs:{category:"all"}}),e("LinkedPis",{staticClass:"column col-4 col-md-12"})],1)])])},N=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-header"},[e("div",{staticClass:"panel-title"},[e("h3",[t._v("Home")])])])}],S=(e("097d"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"toast toast-error"},[e("button",{staticClass:"btn btn-clear float-right",on:{click:function(a){return t.$emit("close-err")}}}),""!==t.errorMessage&&null!==t.errorMessage?e("span",[t._v("\n    "+t._s(t.errorMessage)+"\n  ")]):t._e(),t.errorArray.length&&null!==t.errorArray?e("ul",t._l(t.errorArray,(function(a,s){return e("li",{key:s},[t._v(t._s(a))])})),0):t._e()])}),R=[],Y={name:"Error",props:{errorMessage:{type:String,required:!1},errorArray:{default:()=>[],type:Array,required:!1}}},E=Y,B=Object($["a"])(E,S,R,!1,null,null,null),M=B.exports,O=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.logs.length?e("table",{staticClass:"table table-striped logs"},[t._m(0),e("tbody",t._l(t.logs,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.time))]),e("td",[t._v(t._s(a.priority))]),e("td",[t._v(t._s(a.message))])])})),0)]):e("div",{staticClass:"empty centered"},[t._m(1),e("p",{staticClass:"empty-title h5"},[t._v("There are is no logs")])])])},H=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Date")]),e("th",[t._v("Priority")]),e("th",[t._v("Message")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],j={name:"ServerInfo",data(){return{logs:[],jsonD:""}},created(){this.getData()},methods:{priorityParse(t){switch(t){case 0:return"emerg";case 1:return"alert";case 2:return"crit";case 3:return"error";case 4:return"warning";case 5:return"notice";case 6:return"info";case 7:return"debug"}},getData(){this.doPost("Server_logs_JSON").then(t=>{this.logs=[];for(let a=2;a<t.length;a+=3)this.logs.push({time:this.$moment(parseInt(t[a])/1e3).format("YYYY-MM-DD HH:mm:ss"),priority:this.priorityParse(parseInt(t[a+1])),message:t[a+2]})}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})}}},L=j,G=Object($["a"])(L,O,H,!1,null,null,null),F=G.exports,U=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"input-group filter"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateFrom,expression:"dateFrom"}],staticClass:"form-input input-sm",attrs:{type:"date",placeholder:"Date from"},domProps:{value:t.dateFrom},on:{input:function(a){a.target.composing||(t.dateFrom=a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateTo,expression:"dateTo"}],staticClass:"form-input input-sm",attrs:{type:"date",placeholder:"Date to"},domProps:{value:t.dateTo},on:{input:function(a){a.target.composing||(t.dateTo=a.target.value)}}}),e("button",{staticClass:"btn input-group-btn btn-sm",on:{click:function(a){return t.getHistory()}}},[e("i",{staticClass:"icon icon-refresh centered"})])])]),e("div",{staticClass:"panel-body"},[t.history.length?e("table",{staticClass:"table table-striped"},[t._m(1),e("tbody",t._l(t.history,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.date))]),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.state))]),e("td",[t._v(t._s(a.by))])])})),0)]):e("div",{staticClass:"empty centered"},[t._m(2),e("p",{staticClass:"empty-title h5"},[t._v("There are is no data in the selected range")])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){return t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},q=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("History")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Date")]),e("th",[t._v("Name")]),e("th",[t._v("Action")]),e("th",[t._v("By")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],z={name:"History",data(){return{history:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,dateFrom:"",dateTo:""}},props:["category"],created(){this.dateFrom=this.$moment().subtract(7,"days").format("YYYY-MM-DD"),this.dateTo=this.$moment().add(1,"days").format("YYYY-MM-DD"),this.getHistory(),this.$cookies.isKey("hr_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("hr_arTime"))),this.autoRefresh()},beforeDestroy(){clearTimeout(this.refreshInterval)},methods:{autoRefresh(){this.$cookies.set("hr_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(()=>{this.getHistory(),this.autoRefresh()},1e3*this.autoRefreshTime))},getHistory(){this.dateFrom&&this.dateTo&&this.doPost("HR_selByCat;"+this.$moment(this.dateFrom,"YYYY-MM-DD").utc().format("YYYY-MM-DD")+";"+this.$moment(this.dateTo+" 23:59:59","YYYY-MM-DD HH:mm:ss").utc().format("YYYY-MM-DD")+";"+this.category).then(t=>{this.$route.meta.error=null,this.history=[];for(var a=2;a<t.length-1;a+=5)this.history.push({id:parseInt(t[a]),date:this.$moment.utc(t[a+1],"YYYY-MM-DD HH:mm:ss").local().format("YYYY-MM-DD HH:mm:ss"),by:t[a+2],name:t[a+3],state:t[a+4]});this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})}},components:{Error:M}},K=z,W=Object($["a"])(K,U,q,!1,null,null,null),Q=W.exports,V=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getPis()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){return t.openModal("Add new linked pi",-1,"","","","UDP",8888)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalData.mode,expression:"modalData.mode"}],staticClass:"form-select",attrs:{id:"mode"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalData,"mode",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"UDP"}},[t._v("UDP")]),e("option",{attrs:{value:"HTTP"}},[t._v("HTTP")])])])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),"HTTP"==t.modalData.mode?e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.url,expression:"modalData.url"}],staticClass:"form-input",attrs:{type:"text",id:"cmd",placeholder:"HTTP://HOST:PORT"},domProps:{value:t.modalData.url},on:{input:function(a){a.target.composing||t.$set(t.modalData,"url",a.target.value)}}})])]):e("div",{staticClass:"form-group"},[t._m(4),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.ip,expression:"modalData.ip"}],staticClass:"form-input",attrs:{type:"text",id:"ip"},domProps:{value:t.modalData.ip},on:{input:function(a){a.target.composing||t.$set(t.modalData,"ip",a.target.value)}}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"UDP"==t.modalData.mode,expression:"modalData.mode == 'UDP'"}],staticClass:"form-group"},[t._m(5),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.port,expression:"modalData.port"}],staticClass:"form-input",attrs:{type:"number",id:"port"},domProps:{value:t.modalData.port},on:{input:function(a){a.target.composing||t.$set(t.modalData,"port",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(6),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.password,expression:"modalData.password"}],staticClass:"form-input",attrs:{type:"password",id:"psw"},domProps:{value:t.modalData.password},on:{input:function(a){a.target.composing||t.$set(t.modalData,"password",a.target.value)}}})])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalData.id,expression:"modalData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.pis.length||t.loading?e("table",{staticClass:"table table-striped"},[t._m(8),e("tbody",t._l(t.pis,(function(a){return e("tr",{key:a.id},[e("td",[e("i",{staticClass:"icon icon-edit c-hand",on:{click:function(e){return t.openModal("Edit: "+a.name,a.id,a.name,a.url,a.password,a.mode,a.port)}}})]),e("td",[e("i",{staticClass:"icon",class:{"text-success icon-check":a.codeVersion,"text-error icon-cross":!a.codeVersion}})]),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.url))])])})),0)]):e("div",{staticClass:"empty centered"},[t._m(7),e("p",{staticClass:"empty-title h5"},[t._v("There are no linked pis configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openModal("Add new linked pi",-1,"","","","UDP",8888)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))])])])])},J=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Linked pi devices")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"mode"}},[t._v("Connection mode")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"cmd"}},[t._v("Url")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"ip"}},[t._v("IP/HOST")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"port"}},[t._v("Port")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"psw"}},[t._v("Password")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Edit")]),e("th",[t._v("Active")]),e("th",[t._v("Name")]),e("th",[t._v("Url/Ip/Host")])])])}],X={name:"LinkedPis",data(){return{pis:[],updateDate:"",modalData:{active:!1,id:-1,title:"New linked pi device",name:"",url:"",mode:"UDP",port:8888,password:"",errors:[]}}},created(){this.getPis()},methods:{openModal(t,a,e,s,o,i,r){this.modalData.active=!0,this.modalData.title=t,this.modalData.name=e,this.modalData.url=s,this.modalData.ip=s,this.modalData.password=o,this.modalData.mode=i,this.modalData.port=r,this.modalData.id=a,this.modalData.errors=[]},modalAction(t){if(this.modalData.errors=[],t||(this.modalData.name||this.modalData.errors.push("Name required !"),this.modalData.url||"HTTP"!=this.modalData.mode||this.modalData.errors.push("Url required !"),this.modalData.ip&&this.modalData.port||"UDP"!=this.modalData.mode||this.modalData.errors.push("IP and Port required !")),!this.modalData.errors.length){let a="";a=t?"DeleteLinkedPi;"+this.modalData.id:-1===this.modalData.id?"AddLinkedPi;"+this.modalData.name+";"+("HTTP"==this.modalData.mode?this.modalData.url:this.modalData.ip)+";"+this.modalData.password+";"+this.modalData.mode+";"+this.modalData.port+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS"):"UpdateLinkedPi;"+this.modalData.id+";"+this.modalData.name+";"+("HTTP"==this.modalData.mode?this.modalData.url:this.modalData.ip)+";"+this.modalData.password+";"+this.modalData.mode+";"+this.modalData.port+";;"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS"),this.doPost(a).then(()=>{this.getPis(),this.modalData.active=!1}).catch(t=>{this.modalData.errors.push(t.message)})}},getPis(){this.doPost("GetLinkedPis;1").then(t=>{this.$route.meta.error=null,this.pis=[];for(var a=2;a<t.length-1;a+=7)this.pis.push({id:parseInt(t[a]),name:t[a+1],url:t[a+2],password:t[a+3],mode:t[a+4],port:parseInt(t[a+5]),codeVersion:parseInt(t[a+6])});this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})}},components:{Error:M}},Z=X,tt=Object($["a"])(Z,V,J,!1,null,null,null),at=tt.exports,et={name:"Home",mounted(){this.getSystemInfo().then(()=>{return this.doQPost("LastVersion")}).then(t=>{parseFloat(t[2])>parseFloat(this.serverInfo.version)&&(this.updateAvalible=!0),this.newTagName=t[2]})},beforeDestroy(){},data(){return{countDownModal:{active:!1,currentTime:0},modalConfig:{active:!1,errors:[],sections:[]},logsModalActive:!1,serverInfo:{},timeInfo:[],updateAvalible:!1,newTagName:""}},methods:{comAndReload(t,a,e){confirm(e)&&(this.doPost(t).finally(()=>{this.countDownModal.currentTime=a,this.countDownModal.active=!0,setInterval(()=>{this.countDownModal.currentTime-=1,this.countDownModal.currentTime||location.reload()},1e3)}),this.modalMCL.active=!1)},getSystemInfo(){return this.doPost("Server_info").then(t=>{this.serverInfo={hostname:t[2],load:t[3],version:t[4],upSince:this.$moment.utc(t[5],"YYYY-MM-DD HH:mm:ss.SSS").local().format("YYYY-MM-DD HH:mm:ss")},this.timeInfo=[];for(let a=6;a<t.length-1;a++)this.timeInfo.push(t[a])}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},openLink(t){window.open(t,"_blank")},getConfigSections(){this.modalConfig.active=!0,this.modalConfig.errors=[],this.doPost("GetConfigSections").then(t=>{this.modalConfig.sections=[];for(var a=2;a<t.length-1;a+=2){let e=t[a+1].split("$"),s=[];for(let t=0;t<e.length;t+=2)s.push({key:e[t],val:e[t+1]});this.modalConfig.sections.push({name:t[a],kvs:s})}}).catch(t=>{this.modalConfig.errors.push(t.message)})},setConfigSections(){this.modalConfig.errors=[];let t=[];for(let a=0;a<this.modalConfig.sections.length;a++){let e=this.modalConfig.sections[a];for(let a=0;a<e.kvs.length;a++)t.push(e.name,e.kvs[a].key,e.kvs[a].val)}this.doPost("SetConfigSections;"+t.join(";")).then(()=>{this.modalConfig.active=!1,this.comAndReload("Server_restart",20,"Restart RGC app now ?")}).catch(t=>{this.modalConfig.errors.push(t.message)})}},components:{Error:M,ServerLogs:F,History:Q,LinkedPis:at}},st=et,ot=(e("cccb"),Object($["a"])(st,x,N,!1,null,null,null)),it=ot.exports,rt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"outputs"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("GPIO_Output",{staticClass:"column col-8 col-md-12"}),e("History",{staticClass:"column col-4 col-md-12",attrs:{category:"i/o"}})],1)])],1)},lt=[],nt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getOutputs()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){return t.openModal("Add new output","","",!1,0,-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.gpio,expression:"modalData.gpio"}],staticClass:"form-input",attrs:{type:"text",id:"gpio",placeholder:"Comma separated GPIO BCM numbers"},domProps:{value:t.modalData.gpio},on:{input:function(a){a.target.composing||t.$set(t.modalData,"gpio",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.reverse,expression:"modalData.reverse"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalData.reverse)?t._i(t.modalData.reverse,null)>-1:t.modalData.reverse},on:{change:function(a){var e=t.modalData.reverse,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&t.$set(t.modalData,"reverse",e.concat([i])):r>-1&&t.$set(t.modalData,"reverse",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.modalData,"reverse",o)}}}),e("i",{staticClass:"form-icon"}),t._v("Reverse\n                                    ")])]),e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalData.type,expression:"modalData.type"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalData,"type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("On/Off switch")]),e("option",{attrs:{value:"1"}},[t._v("Pushbutton")])])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalData.id,expression:"modalData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.outputs.length||t.loading?e("div",{staticClass:"columns"},t._l(t.outputs,(function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile tile-centered"},[e("div",{staticClass:"tile-icon"},[0===a.type?e("button",{staticClass:"btn btn-action btn-lg",class:[t.stateButton(a.state,a.reverse)],on:{click:function(e){return t.setState(s,a.id,a.gpio,+!a.state,a.reverse)}}},[e("i",{staticClass:"icon icon-shutdown centered"})]):1===a.type?e("button",{staticClass:"btn btn-action btn-lg",class:[t.stateButton(a.state,a.reverse)],on:{mousedown:function(e){a.prevstate=a.state,t.setState(s,a.id,a.gpio,+!a.state,a.reverse)},mouseup:function(e){return t.setState(s,a.id,a.gpio,a.prevstate,a.reverse)}}},[e("i",{staticClass:"icon icon-shutdown centered"})]):t._e()]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[t._v(t._s(a.name))]),e("div",{staticClass:"tile-subtitle text-gray"},[t._v(t._s(t.outputDisc(a.gpio,a.reverse,a.type)))])]),e("div",{staticClass:"tile-action"},[e("div",{staticClass:"dropdown dropdown-right"},[t._m(5,!0),e("ul",{staticClass:"menu"},[e("li",{staticClass:"menu-item",on:{click:function(e){return t.setState(s,a.id,a.gpio,+!a.reverse,a.reverse)}}},[t._m(6,!0)]),e("li",{staticClass:"menu-item",on:{click:function(e){return t.setState(s,a.id,a.gpio,a.reverse,a.reverse)}}},[t._m(7,!0)]),e("li",{staticClass:"menu-item",on:{click:function(e){return t.openModal("Edit: "+a.name,a.name,a.gpio,!!a.reverse,a.type,a.id)}}},[t._m(8,!0)])])])])])])})),0):e("div",{staticClass:"empty centered"},[t._m(4),e("p",{staticClass:"empty-title h5"},[t._v("There are no outputs configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openModal("Add new output","","",!1,0,-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){return t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},ct=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("GPIO Outputs")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"gpio"}},[t._v("GPIO(BCM)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Act like")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"btn btn-link dropdown-toggle",attrs:{tabindex:"0"}},[e("i",{staticClass:"icon icon-more-vert"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",[e("i",{staticClass:"icon icon-shutdown"}),t._v(" On")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",[e("i",{staticClass:"icon icon-shutdown"}),t._v(" Off")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",[e("i",{staticClass:"icon icon-edit"}),t._v(" Edit")])}],dt={name:"GPIO_Output",data(){return{outputs:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,modalData:{active:!1,id:-1,title:"New output",name:"",gpio:"",prevsGpios:"",reverse:!1,type:0,errors:[],allUsedPins:[]}}},props:{col:{type:String,default:"col-4 col-lg-6 col-sm-12"}},created(){this.getOutputs(),this.$cookies.isKey("out_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("out_arTime"))),this.autoRefresh()},beforeDestroy(){clearTimeout(this.refreshInterval)},methods:{autoRefresh(){this.$cookies.set("out_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(()=>{this.modalData.active||this.getOutputs(),this.autoRefresh()},1e3*this.autoRefreshTime))},openModal(t,a,e,s,o,i){this.modalData.active=!0,this.modalData.title=t,this.modalData.name=a,this.modalData.gpio=e,this.modalData.prevsGpios=e,this.modalData.reverse=s,this.modalData.type=o,this.modalData.id=i,this.modalData.allUsedPins=[],this.modalData.errors=[],this.doPost("AllUsedPins_GPIO;out;"+i).then(t=>{for(var a=2;a<t.length-1;a++)this.modalData.allUsedPins.push(t[a])}).catch(t=>{this.modalData.errors.push(t.message)})},modalAction(t){if(this.modalData.errors=[],!t)if(this.modalData.name||this.modalData.errors.push("Name required !"),/^[0-9]+(,[0-9]+)*$/g.test(this.modalData.gpio)){let t=this.modalData.gpio.split(",");var a=this.isGPIOnumber(t);if(-1!=a)this.modalData.errors.push(a+" is not a GPIO BCM number !");else for(let a=0;a<t.length;a++)this.modalData.allUsedPins.indexOf(t[a])>-1&&this.modalData.errors.push(t[a]+" allready in use !")}else this.modalData.errors.push("GPIO must be a number or comma separated numbers !");if(!this.modalData.errors.length){let a="";a=t?"Delete_GPIO_out;"+this.modalData.id+";"+this.modalData.gpio+";"+this.modalData.name:-1===this.modalData.id?"Add_GPIO_out;"+this.modalData.gpio+";"+this.modalData.name+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+ +this.modalData.reverse+";"+this.modalData.type:"Edit_GPIO_out;"+this.modalData.id+";"+this.modalData.gpio+";"+this.modalData.name+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+ +this.modalData.reverse+";"+this.modalData.prevsGpios+";"+this.modalData.type,this.doPost(a).then(()=>{this.getOutputs(),this.modalData.active=!1}).catch(t=>{this.modalData.errors.push(t.message)})}},outputDisc(t,a,e){let s="GPIO: "+t;return 0==e?s+="(o)":1==e&&(s+="(p)"),a&&(s+="(r)"),s},getOutputs(){this.doPost("GPIO_Olist").then(t=>{this.$route.meta.error=null,this.outputs=[];for(var a=2;a<t.length-1;a+=6)this.outputs.push({id:parseInt(t[a]),gpio:t[a+1],state:parseInt(t[a+2]),name:t[a+3],reverse:parseInt(t[a+4]),type:parseInt(t[a+5])});this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},setState(t,a,e,s,o){this.doPost("GPIO_set;"+a+";"+e+";"+s+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+o).then(a=>{this.$route.meta.error=null,this.outputs[t].state=parseInt(a[2])}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})}},components:{Error:M}},mt=dt,ut=Object($["a"])(mt,nt,ct,!1,null,null,null),ht=ut.exports,pt={name:"outputs",components:{Error:M,GPIO_Output:ht,History:Q}},vt=pt,ft=Object($["a"])(vt,rt,lt,!1,null,null,null),gt=ft.exports,Dt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Inputs"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("GPIO_Input",{staticClass:"column col-8 col-md-12"}),e("History",{staticClass:"column col-4 col-md-12",attrs:{category:"i/o"}})],1)])],1)},Ct=[],_t=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getInputs()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){return t.openModal("Add new input","","",!1,0,-1,-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.gpio,expression:"modalData.gpio"}],staticClass:"form-input",attrs:{type:"number",id:"gpio",placeholder:"Single GPIO BCM number"},domProps:{value:t.modalData.gpio},on:{input:function(a){a.target.composing||t.$set(t.modalData,"gpio",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.reverse,expression:"modalData.reverse"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalData.reverse)?t._i(t.modalData.reverse,null)>-1:t.modalData.reverse},on:{change:function(a){var e=t.modalData.reverse,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&t.$set(t.modalData,"reverse",e.concat([i])):r>-1&&t.$set(t.modalData,"reverse",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.modalData,"reverse",o)}}}),e("i",{staticClass:"form-icon"}),t._v("Reverse\n                                    ")])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalData.id,expression:"modalData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.inputs.length||t.loading?e("div",{staticClass:"columns"},t._l(t.inputs,(function(a){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile tile-centered"},[e("div",{staticClass:"tile-icon"},[e("button",{staticClass:"btn btn-action btn-lg unclickable",class:[t.stateButton(a.state,a.reverse)]},[e("i",{staticClass:"icon icon-flag centered"})])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[t._v(t._s(a.name))]),e("div",{staticClass:"tile-subtitle text-gray"},[t._v(t._s(t.inputDisc(a.gpio,a.reverse,a.bindType)))])]),e("div",{staticClass:"tile-action"},[e("button",{staticClass:"btn btn-link",on:{click:function(e){return t.openModal("Edit: "+a.name,a.name,a.gpio,!!a.reverse,a.bindType,a.id,a.bindId)}}},[e("i",{staticClass:"icon icon-edit"})])])])])})),0):e("div",{staticClass:"empty centered"},[t._m(3),e("p",{staticClass:"empty-title h5"},[t._v("There are no inputs configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openModal("Add new input","","",!1,0,-1,-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){return t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},bt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("GPIO Inputs")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"gpio"}},[t._v("GPIO(BCM)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],yt={name:"GPIO_Input",data(){return{inputs:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,modalData:{active:!1,id:-1,title:"New input",name:"",gpio:"",prevsGpios:"",reverse:!1,bindType:0,bindId:-1,errors:[],allUsedPins:[],outputs:[]}}},props:{col:{type:String,default:"col-4 col-lg-6 col-sm-12"}},created(){this.getInputs(),this.$cookies.isKey("in_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("in_arTime"))),this.autoRefresh()},beforeDestroy(){clearTimeout(this.refreshInterval)},methods:{autoRefresh(){this.$cookies.set("in_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(()=>{this.modalData.active||this.getInputs(),this.autoRefresh()},1e3*this.autoRefreshTime))},openModal(t,a,e,s,o,i,r){this.modalData.active=!0,this.modalData.title=t,this.modalData.name=a,this.modalData.gpio=e,this.modalData.prevsGpios=e,this.modalData.reverse=s,this.modalData.bindType=o,this.modalData.bindId=r,this.modalData.id=i,this.modalData.allUsedPins=[],this.modalData.errors=[],this.modalData.outputs=[],this.doPosts([this.doQPost("AllUsedPins_GPIO;in;"+i).then(t=>{for(var a=2;a<t.length-1;a++)this.modalData.allUsedPins.push(t[a])})]).catch(t=>{this.modalData.errors.push(t.message)})},modalAction(t){if(this.modalData.errors=[],!t){if(this.modalData.name||this.modalData.errors.push("Name required !"),isNaN(this.modalData.gpio)||""==this.modalData.gpio||null==this.modalData.gpio)this.modalData.errors.push("GPIO must be a number !");else{let t=this.modalData.gpio.toString().split(",");var a=this.isGPIOnumber(t);if(-1!=a)this.modalData.errors.push(a+" is not a GPIO BCM number !");else for(let a=0;a<t.length;a++)this.modalData.allUsedPins.indexOf(t[a])>-1&&this.modalData.errors.push(t[a]+" allready in use !")}this.modalData.bindType>0&&(isNaN(this.modalData.bindId)||""==this.modalData.bindId||null==this.modalData.bindId||-1==this.modalData.bindId)&&this.modalData.errors.push("Binded output is required with this type !")}if(!this.modalData.errors.length){let a="";a=t?"Delete_GPIO_out;"+this.modalData.id+";"+this.modalData.gpio+";"+this.modalData.name:-1===this.modalData.id?"Add_GPIO_in;"+this.modalData.gpio+";"+this.modalData.name+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+ +this.modalData.reverse+";"+this.modalData.bindId+";"+this.modalData.bindType:"Edit_GPIO_in;"+this.modalData.id+";"+this.modalData.gpio+";"+this.modalData.name+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+ +this.modalData.reverse+";"+this.modalData.bindId+";"+this.modalData.bindType+";"+this.modalData.prevsGpios,this.doPost(a).then(()=>{this.getInputs(),this.modalData.active=!1}).catch(t=>{this.modalData.errors.push(t.message)})}},inputDisc(t,a,e){let s="GPIO: "+t;return 1==e?s+="(bo)":2==e&&(s+="(bp)"),a&&(s+="(r)"),s},getInputs(){this.doPost("GPIO_Ilist").then(t=>{this.$route.meta.error=null,this.inputs=[];for(var a=2;a<t.length-1;a+=7)this.inputs.push({id:parseInt(t[a]),gpio:parseInt(t[a+1]),state:parseInt(t[a+2]),name:t[a+3],reverse:parseInt(t[a+4]),bindId:parseInt(t[a+5]),bindType:parseInt(t[a+6])});this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})}},components:{Error:M}},wt=yt,kt=Object($["a"])(wt,_t,bt,!1,null,null,null),Tt=kt.exports,$t={name:"Inputs",components:{Error:M,GPIO_Input:Tt,History:Q}},It=$t,Pt=Object($["a"])(It,Dt,Ct,!1,null,null,null),At=Pt.exports,xt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Actions"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("AdvSA",{staticClass:"column col-9 col-lg-12"}),e("LinkedPis",{staticClass:"column col-3 col-lg-12"})],1)])],1)},Nt=[],St=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getActions()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){return t.openActionModal("Add new action",-1,"","",-1,-1,-1,-1,!0,-1,-1,-1,.3)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalActionData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalActionData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalActionData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalActionData.title))]),t.modalActionData.errors.length?e("Error",{attrs:{"error-array":t.modalActionData.errors},on:{"close-err":function(a){t.modalActionData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.name,expression:"modalActionData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalActionData.name},on:{input:function(a){a.target.composing||t.$set(t.modalActionData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.type,expression:"modalActionData.type"}],staticClass:"form-select",attrs:{id:"type"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalActionData,"type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"output"}},[t._v("Output")]),e("option",{attrs:{value:"pwm"}},[t._v("PWM")]),e("option",{attrs:{value:"chain"}},[t._v("Chain")]),e("option",{attrs:{value:"rfsend"}},[t._v("Transmit RF Code")]),e("option",{attrs:{value:"cmd"}},[t._v("Execude custom command")])])])]),"output"==t.modalActionData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalActionData.outputs.length}},[t._m(3),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.outputId,expression:"modalActionData.outputId"}],staticClass:"form-select",attrs:{id:"output"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalActionData,"outputId",a.target.multiple?e:e[0])}}},t._l(t.modalActionData.outputs,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalActionData.outputs.length&&!t.loading,expression:"!modalActionData.outputs.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add outputs to make them visible here.")])])]):"pwm"==t.modalActionData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalActionData.pwms.length}},[t._m(4),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.pwmId,expression:"modalActionData.pwmId"}],staticClass:"form-select",attrs:{id:"pwm"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalActionData,"pwmId",a.target.multiple?e:e[0])}}},t._l(t.modalActionData.pwms,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalActionData.pwms.length&&!t.loading,expression:"!modalActionData.pwms.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add PWM's to make them pickable here.")])])]):"chain"==t.modalActionData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalActionData.chains.length}},[t._m(5),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.chainId,expression:"modalActionData.chainId"}],staticClass:"form-select",attrs:{id:"chain"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalActionData,"chainId",a.target.multiple?e:e[0])}}},t._l(t.modalActionData.chains,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalActionData.chains.length&&!t.loading,expression:"!modalActionData.chains.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add chains to make them pickable here.")])])]):"rfsend"==t.modalActionData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalActionData.rfCodes.length}},[t._m(6),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.rfId,expression:"modalActionData.rfId"}],staticClass:"form-select",attrs:{id:"rf"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalActionData,"rfId",a.target.multiple?e:e[0])}}},t._l(t.modalActionData.rfCodes,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalActionData.rfCodes.length&&!t.loading,expression:"!modalActionData.rfCodes.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add RF codes to make them pickable here.")])])]):"cmd"==t.modalActionData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalActionData.cmds.length}},[t._m(7),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.cmdId,expression:"modalActionData.cmdId"}],staticClass:"form-select",attrs:{id:"cmd"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalActionData,"cmdId",a.target.multiple?e:e[0])}}},t._l(t.modalActionData.cmds,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalActionData.cmds.length&&!t.loading,expression:"!modalActionData.cmds.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add custom commands to make them pickable here.")])])]):t._e(),e("div",{staticClass:"form-group"},[t._m(8),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.noe,expression:"modalActionData.noe"}],staticClass:"form-input",attrs:{type:"number",id:"noe"},domProps:{value:t.modalActionData.noe},on:{input:function(a){a.target.composing||t.$set(t.modalActionData,"noe",a.target.value)}}}),e("p",{staticClass:"text-gray text-italic"},[t._v("-1 unlimited, 0 disabled or any number for execution countdown")])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"rfsend"!=t.modalActionData.type&&"cmd"!=t.modalActionData.type,expression:"modalActionData.type != 'rfsend' && modalActionData.type != 'cmd'"}],staticClass:"form-group"},[t._m(9),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.state,expression:"modalActionData.state"}],staticClass:"form-select",attrs:{id:"state"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalActionData,"state",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("OFF")]),e("option",{attrs:{value:"1"}},[t._v("ON")]),e("option",{directives:[{name:"show",rawName:"v-show",value:"chain"!=t.modalActionData.type,expression:"modalActionData.type != 'chain'"}],attrs:{value:"2"}},[t._v("OPPOSITE")])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"pwm"==t.modalActionData.type,expression:"modalActionData.type == 'pwm'"}],staticClass:"form-group"},[t._m(10),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.fr,expression:"modalActionData.fr"}],staticClass:"form-input",attrs:{type:"number",id:"fr"},domProps:{value:t.modalActionData.fr},on:{input:function(a){a.target.composing||t.$set(t.modalActionData,"fr",a.target.value)}}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"pwm"==t.modalActionData.type,expression:"modalActionData.type == 'pwm'"}],staticClass:"form-group"},[t._m(11),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.dc,expression:"modalActionData.dc"}],staticClass:"form-input",attrs:{type:"number",id:"dc",min:"0",max:"100"},domProps:{value:t.modalActionData.dc},on:{input:function(a){a.target.composing||t.$set(t.modalActionData,"dc",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.keepLogs,expression:"modalActionData.keepLogs"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalActionData.keepLogs)?t._i(t.modalActionData.keepLogs,null)>-1:t.modalActionData.keepLogs},on:{change:function(a){var e=t.modalActionData.keepLogs,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&t.$set(t.modalActionData,"keepLogs",e.concat([i])):r>-1&&t.$set(t.modalActionData,"keepLogs",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.modalActionData,"keepLogs",o)}}}),e("i",{staticClass:"form-icon"}),t._v("Keep logs\n                                    ")])]),e("div",{staticClass:"form-group"},[t._m(12),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalActionData.refreshRate,expression:"modalActionData.refreshRate"}],staticClass:"form-input",attrs:{type:"number",step:"0.1",id:"rr",min:"0.1"},domProps:{value:t.modalActionData.refreshRate},on:{input:function(a){a.target.composing||t.$set(t.modalActionData,"refreshRate",a.target.value)}}}),e("p",{staticClass:"text-gray text-italic"},[t._v("Interval for triggers check. Control CPU usage with that.")])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalActionData.id,expression:"modalActionData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalActionAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalActionAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"modal",class:{active:t.modalTriggerData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalTriggerData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalTriggerData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalTriggerData.title))]),t.modalTriggerData.errors.length?e("Error",{attrs:{"error-array":t.modalTriggerData.errors},on:{"close-err":function(a){t.modalTriggerData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(13),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.type,expression:"modalTriggerData.type"}],staticClass:"form-select",attrs:{id:"type"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"date"}},[t._v("Exact date time")]),e("option",{attrs:{value:"hour"}},[t._v("Time of day")]),e("option",{attrs:{value:"timer"}},[t._v("Timer")]),e("option",{attrs:{value:"weekday"}},[t._v("Week day")]),e("option",{attrs:{value:"sensor"}},[t._v("Sensor value")]),e("option",{attrs:{value:"i/o"}},[t._v("Input/Output state")]),e("option",{attrs:{value:"pwm state"}},[t._v("PWM state")]),e("option",{attrs:{value:"pwm fr"}},[t._v("PWM frequency")]),e("option",{attrs:{value:"pwm dc"}},[t._v("PWM dutycycle")]),e("option",{attrs:{value:"in chain"}},[t._v("Run only in chain")]),e("option",{attrs:{value:"ping"}},[t._v("Ping")]),e("option",{attrs:{value:"rfrecived"}},[t._v("Recive RF")]),e("option",{attrs:{value:"cmd"}},[t._v("Custom command output")]),e("option",{attrs:{value:"i/o link"}},[t._v("Linked Input/Output state")]),e("option",{attrs:{value:"sensor link"}},[t._v("Linked Sensor value")]),e("option",{attrs:{value:"rfrecived link"}},[t._v("Linked Recive RF")])])])]),e("div",{staticClass:"form-group"},[t._m(14),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.operator,expression:"modalTriggerData.operator"}],staticClass:"form-input",attrs:{type:"text",id:"op",placeholder:"== / != / < / > / <= / >="},domProps:{value:t.modalTriggerData.operator},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"operator",a.target.value)}}})])]),"date"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[t._m(15),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.date,expression:"modalTriggerData.date"}],staticClass:"form-input",attrs:{type:"datetime-local",id:"date"},domProps:{value:t.modalTriggerData.date},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"date",a.target.value)}}})])]):"hour"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[t._m(16),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.hour,expression:"modalTriggerData.hour"}],staticClass:"form-input",attrs:{type:"time",id:"time"},domProps:{value:t.modalTriggerData.hour},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"hour",a.target.value)}}})])]):"timer"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[t._m(17),e("div",{staticClass:"col-3 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.timerh,expression:"modalTriggerData.timerh"}],staticClass:"form-input",attrs:{type:"number",placeholder:"h",min:"0",max:"23"},domProps:{value:t.modalTriggerData.timerh},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"timerh",a.target.value)}}})]),e("div",{staticClass:"col-3 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.timerm,expression:"modalTriggerData.timerm"}],staticClass:"form-input",attrs:{type:"number",placeholder:"m",min:"0",max:"59"},domProps:{value:t.modalTriggerData.timerm},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"timerm",a.target.value)}}})]),e("div",{staticClass:"col-3 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.timers,expression:"modalTriggerData.timers"}],staticClass:"form-input",attrs:{type:"number",placeholder:"s",min:"0",max:"59"},domProps:{value:t.modalTriggerData.timers},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"timers",a.target.value)}}})])]):"weekday"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[t._m(18),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.weekday,expression:"modalTriggerData.weekday"}],staticClass:"form-select",attrs:{id:"weekday"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"weekday",a.target.multiple?e:e[0])}}},t._l(t.dayNames,(function(a,s){return e("option",{key:a,domProps:{value:s}},[t._v(t._s(a))])})),0)])]):"sensor"==t.modalTriggerData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.sensors.length}},[t._m(19),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.sensorId,expression:"modalTriggerData.sensorId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"sensorId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.sensors,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name)+"("+t._s(a.unit)+")")])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.sensorValue,expression:"modalTriggerData.sensorValue"}],staticClass:"form-input",attrs:{type:"number",placeholder:"value"},domProps:{value:t.modalTriggerData.sensorValue},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"sensorValue",a.target.value)}}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.sensors.length&&!t.loading,expression:"!modalTriggerData.sensors.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add sensors to make them pickable here.")])])]):"i/o"==t.modalTriggerData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.ios.length}},[t._m(20),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.ioId,expression:"modalTriggerData.ioId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"ioId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.ios,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.ioState,expression:"modalTriggerData.ioState"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"ioState",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("OFF")]),e("option",{attrs:{value:"1"}},[t._v("ON")])]),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.ios.length&&!t.loading,expression:"!modalTriggerData.ios.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add GIPO input/output to make them pickable here.")])])]):"rfrecived"==t.modalTriggerData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.rfCodes.length}},[t._m(21),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.rfId,expression:"modalTriggerData.rfId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"rfId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.rfCodes,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.isReciving,expression:"modalTriggerData.isReciving"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"isReciving",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"True"}},[t._v("True")]),e("option",{attrs:{value:"False"}},[t._v("False")])]),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.rfCodes.length&&!t.loading,expression:"!modalTriggerData.rfCodes.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add RF codes to make them pickable here.")])])]):"cmd"==t.modalTriggerData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.cmds.length}},[t._m(22),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.cmdId,expression:"modalTriggerData.cmdId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"cmdId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.cmds,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.cmdOutput,expression:"modalTriggerData.cmdOutput"}],staticClass:"form-input",attrs:{placeholder:"value"},domProps:{value:t.modalTriggerData.cmdOutput},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"cmdOutput",a.target.value)}}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.cmds.length&&!t.loading,expression:"!modalTriggerData.cmds.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add custom commands to make them pickable here.")])])]):"i/o link"==t.modalTriggerData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.linkedPis.length}},[t._m(23),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.linkId,expression:"modalTriggerData.linkId"}],staticClass:"form-select",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"linkId",a.target.multiple?e:e[0])},function(a){return t.getLinkedData()}]}},t._l(t.modalTriggerData.linkedPis,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.lioId,expression:"modalTriggerData.lioId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"lioId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.lios,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.lioState,expression:"modalTriggerData.lioState"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"lioState",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("OFF")]),e("option",{attrs:{value:"1"}},[t._v("ON")])]),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.linkedPis.length&&!t.loading,expression:"!modalTriggerData.linkedPis.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add linked pis devices to make them pickable here.")]),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.lios.length&&!t.loading,expression:"!modalTriggerData.lios.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add GIPO input/output on selected linked device to make them pickable here.")])])]):"sensor link"==t.modalTriggerData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.linkedPis.length}},[t._m(24),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.linkId,expression:"modalTriggerData.linkId"}],staticClass:"form-select",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"linkId",a.target.multiple?e:e[0])},function(a){return t.getLinkedData()}]}},t._l(t.modalTriggerData.linkedPis,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.lsensorId,expression:"modalTriggerData.lsensorId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"lsensorId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.lsensors,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name)+"("+t._s(a.unit)+")")])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.lsensorValue,expression:"modalTriggerData.lsensorValue"}],staticClass:"form-input",attrs:{type:"number",placeholder:"value"},domProps:{value:t.modalTriggerData.lsensorValue},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"lsensorValue",a.target.value)}}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.linkedPis.length&&!t.loading,expression:"!modalTriggerData.linkedPis.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add linked pis devices to make them pickable here.")]),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.lsensors.length&&!t.loading,expression:"!modalTriggerData.lsensors.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add sensors on selected linked device to make them pickable here.")])])]):"rfrecived link"==t.modalTriggerData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.linkedPis.length}},[t._m(25),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.linkId,expression:"modalTriggerData.linkId"}],staticClass:"form-select",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"linkId",a.target.multiple?e:e[0])},function(a){return t.getLinkedData()}]}},t._l(t.modalTriggerData.linkedPis,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.lrfId,expression:"modalTriggerData.lrfId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"lrfId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.lrfCodes,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.lisReciving,expression:"modalTriggerData.lisReciving"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"lisReciving",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"True"}},[t._v("True")]),e("option",{attrs:{value:"False"}},[t._v("False")])]),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.linkedPis.length&&!t.loading,expression:"!modalTriggerData.linkedPis.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add linked pis devices to make them pickable here.")]),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.lrfCodes.length&&!t.loading,expression:"!modalTriggerData.lrfCodes.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add RF codes on selected linked deviceto make them pickable here.")])])]):"in chain"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.inChain,expression:"modalTriggerData.inChain"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"inChain",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"True"}},[t._v("True")]),e("option",{attrs:{value:"False"}},[t._v("False")])])]):"ping"==t.modalTriggerData.type?e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.isPinging,expression:"modalTriggerData.isPinging"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"isPinging",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"True"}},[t._v("True")]),e("option",{attrs:{value:"False"}},[t._v("False")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.pingHost,expression:"modalTriggerData.pingHost"}],staticClass:"form-input",attrs:{type:"text",placeholder:"IP/HOST/DOMAIN"},domProps:{value:t.modalTriggerData.pingHost},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"pingHost",a.target.value)}}})]):-1!=t.modalTriggerData.type.indexOf("pwm")?e("div",{staticClass:"form-group",class:{"has-error":!t.modalTriggerData.pwms.length}},[t._m(26),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.pwmId,expression:"modalTriggerData.pwmId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"pwmId",a.target.multiple?e:e[0])}}},t._l(t.modalTriggerData.pwms,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.pwmState,expression:"modalTriggerData.pwmState"},{name:"show",rawName:"v-show",value:"pwm state"==t.modalTriggerData.type,expression:"modalTriggerData.type == 'pwm state'"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalTriggerData,"pwmState",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("OFF")]),e("option",{attrs:{value:"1"}},[t._v("ON")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.pwmFr,expression:"modalTriggerData.pwmFr"},{name:"show",rawName:"v-show",value:"pwm fr"==t.modalTriggerData.type,expression:"modalTriggerData.type == 'pwm fr'"}],staticClass:"form-input",attrs:{type:"number",placeholder:"Frequency"},domProps:{value:t.modalTriggerData.pwmFr},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"pwmFr",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalTriggerData.pwmDc,expression:"modalTriggerData.pwmDc"},{name:"show",rawName:"v-show",value:"pwm dc"==t.modalTriggerData.type,expression:"modalTriggerData.type == 'pwm dc'"}],staticClass:"form-input",attrs:{type:"number",min:"0",max:"100",placeholder:"Dutycycle"},domProps:{value:t.modalTriggerData.pwmDc},on:{input:function(a){a.target.composing||t.$set(t.modalTriggerData,"pwmDc",a.target.value)}}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalTriggerData.ios.length&&!t.loading,expression:"!modalTriggerData.ios.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add sensors to make them pickable here.")])])]):t._e()])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalTriggerData.id,expression:"modalTriggerData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalTriggerAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalTriggerAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"modal",class:{active:t.modalPatternData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalPatternData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalPatternData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalPatternData.title))]),t.modalPatternData.errors.length?e("Error",{attrs:{"error-array":t.modalPatternData.errors},on:{"close-err":function(a){t.modalPatternData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalPatternData.pattern,expression:"modalPatternData.pattern"}],staticClass:"form-input",attrs:{type:"text",id:"pattern",placeholder:"Pattern"},domProps:{value:t.modalPatternData.pattern},on:{input:function(a){a.target.composing||t.$set(t.modalPatternData,"pattern",a.target.value)}}}),e("span",{staticClass:"text-gray"},[t._v("If this field is empty then default conjunction is '#1# and #2#' etc. which means, that all triggers must be fulfilled for the action to start. You can set your own conjunction here by using: #trigger number# and Python conjunction syntax. For example: '(#1# or #2#) and #3#' means that trigger 1 or 2 and 3 must be fulfilled for the action to start.")])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalPatternAction()}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.actions.length||t.loading?e("div",{staticClass:"columns"},t._l(t.actions,(function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile"},[e("div",{staticClass:"tile-icon d-grid"},[e("button",{staticClass:"btn btn-link",on:{click:function(e){return t.openActionModal("Edit "+a.name,a.id,a.name,a.type,a.outputId,a.pwmId,a.chainId,a.noe,a.keepLogs,s,a.rfId,a.cmdId,a.refreshRate)}}},[e("i",{staticClass:"icon icon-edit"})]),e("button",{staticClass:"btn btn-link tooltip tooltip-right",attrs:{"data-tooltip":"Add trigger"},on:{click:function(e){return t.openTriggerModal("Add trigger for "+a.name,-1,a.id,"date","==",null,0)}}},[e("i",{staticClass:"icon icon-plus"})]),e("button",{staticClass:"btn btn-link tooltip tooltip-right",attrs:{disabled:a.triggers.length<2,"data-tooltip":"Set conjunction pattern"},on:{click:function(e){return t.openPatternModal("Set conjunction pattern for "+a.name,a.id,a.conjunction,s)}}},[e("i",{staticClass:"icon icon-resize-horiz"})]),e("button",{staticClass:"btn btn-link tooltip tooltip-right",attrs:{"data-tooltip":"Cpu usage (Click to enable/disable whole action)"},on:{click:function(e){return t.startStopAction(a.id,a.noe)}}},[e("span",{class:{"text-success":a.noe,"text-error":!a.noe}},[t._v(t._s(a.cpuUsage)+"%")])])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[e("span",[t._v(t._s(a.name))]),e("span",{staticClass:"float-right"},[t._v(t._s(t.actionTargetDisc(s)))])]),e("div",{staticClass:"tile-subtitle"},[e("span",{staticClass:"text-gray"},[a.conjunction&&""!=a.conjunction&&"None"!=a.conjunction?e("div",[t._v(t._s(a.conjunction))]):e("div",[t._v(t._s(t.conjunctionDefDisc(s)))])]),a.triggers.length?e("ol",{staticClass:"list"},t._l(a.triggers,(function(o,i){return e("li",{key:o.id},[e("button",{staticClass:"btn btn-link",on:{click:function(e){return t.openTriggerModal("Edit trigger "+o.lp+" for "+a.name,o.id,a.id,o.type,o.operator,o.data,o.sourceId,o.linkId)}}},[t._v(t._s(t.triggerSourceDisc(s,i)))])])})),0):e("div",[t._v("No triggers added.")])])])])])})),0):e("div",{staticClass:"empty centered"},[t._m(27),e("p",{staticClass:"empty-title h5"},[t._v("There are no actions configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openActionModal("Add new action",-1,"","",-1,-1,-1,-1,!0,-1,-1,-1,.3)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){return t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},Rt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Automation")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Type")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"output"}},[t._v("Output target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"pwm"}},[t._v("PWM target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"chain"}},[t._v("Chain target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"rf"}},[t._v("RF transmit target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"cmd"}},[t._v("Custom command target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"noe"}},[t._v("Number of executions")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"state"}},[t._v("Set state")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"fr"}},[t._v("Frequency(Hz)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"dc"}},[t._v("Dutycycle(%)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"rr"}},[t._v("Thread refresh rate (s)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Type")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"op"}},[t._v("Operator")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"date"}},[t._v("Date")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"time"}},[t._v("Time")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Timer")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"weekday"}},[t._v("Week day")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Sensor value")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Input / Output")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("RF Recive")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Custom command")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Linked Input/Output state")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Linked sensor value")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Linked RF Recive")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("PWM")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],Yt=(e("386d"),e("a481"),e("4917"),{name:"SheduledActions",data(){return{actions:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,dayNames:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],modalActionData:{active:!1,id:-1,title:"New action",name:"",type:"",outputId:-1,chainId:-1,rfId:-1,cmdId:-1,pwmId:-1,noe:-1,state:0,fr:"",dc:"",keepLogs:!0,refreshRate:.3,errors:[],outputs:[],pwms:[],chains:[],rfCodes:[],cmds:[]},modalTriggerData:{active:!1,id:-1,title:"New trigger",actionId:-1,sourceId:-1,type:"",operator:"==",date:"",hour:"",weekday:"",sensorId:-1,lsensorId:-1,sensorValue:"",lsensorValue:"",ioId:-1,lioId:-1,rfId:-1,lrfId:-1,cmdId:-1,cmdOutput:"",ioState:0,lioState:0,inChain:"True",pwmId:-1,pwmState:0,pwmFr:600,pwmDc:0,timerh:"",timerm:"",timers:"",ios:[],lios:[],linkedIos:[],pwms:[],sensors:[],lsensors:[],rfCodes:[],lrfCodes:[],cmds:[],linkedPis:[],linkId:-1,errors:[],isPinging:"True",isReciving:"True",lisReciving:"True",pingHost:""},modalPatternData:{active:!1,id:-1,title:"Set conjunction pattern",actionId:-1,pattern:"",maxTrigger:0,index:-1,errors:[]}}},props:{col:{type:String,default:"col-4 col-xl-6 col-sm-12"}},created(){this.getActions(),this.$cookies.isKey("sa_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("sa_arTime"))),this.autoRefresh()},beforeDestroy(){clearTimeout(this.refreshInterval)},methods:{autoRefresh(){this.$cookies.set("sa_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(()=>{this.modalActionData.active||this.modalTriggerData.active||this.modalPatternData.active||this.getActions(),this.autoRefresh()},1e3*this.autoRefreshTime))},openPatternModal(t,a,e,s){this.modalPatternData.active=!0,this.modalPatternData.title=t,this.modalPatternData.id=a,this.modalPatternData.pattern=e,this.modalPatternData.errors=[],this.modalPatternData.index=s},modalPatternAction(){this.modalPatternData.errors=[];let t=this.modalPatternData.pattern.match(/(\(*#|#)[1-9]*(#\)*|#)( and | or |)/g);null==t?this.modalPatternData.errors.push("Bad syntax !"):t.join("").length!=this.modalPatternData.pattern.length&&this.modalPatternData.errors.push("Bad syntax !");let a=this.modalPatternData.pattern.match(/#[0-9]*#/g);for(let o in a){let t=a[o].replace(/#/g,"");t>this.actions[this.modalPatternData.index].triggers.length&&this.modalPatternData.errors.push("Trigger number "+t+" not exist !")}let e=this.modalPatternData.pattern.match(/\(/g),s=this.modalPatternData.pattern.match(/\)/g);(e||s)&&e.length!=s.length&&this.modalPatternData.errors.push("Bracket not closed ?!"),this.modalPatternData.errors.length||this.doPost("GPIO_ASA_SetConj;"+this.modalPatternData.pattern+";"+this.modalPatternData.id).then(()=>{this.actions[this.modalPatternData.index].conjunction=this.modalPatternData.pattern,this.modalPatternData.active=!1}).catch(t=>{this.modalPatternData.errors.push(t.message)})},openTriggerModal(t,a,e,s,o,i,r,l){if(this.modalTriggerData.active=!0,this.modalTriggerData.title=t,this.modalTriggerData.id=a,this.modalTriggerData.actionId=e,this.modalTriggerData.type=s,this.modalTriggerData.operator=o,this.modalTriggerData.linkId=l,this.modalTriggerData.pwms=[],this.modalTriggerData.ios=[],this.modalTriggerData.sensors=[],this.modalTriggerData.rfCodes=[],this.modalTriggerData.cmds=[],this.modalTriggerData.linkedPis=[],-1!=l&&this.getLinkedData(),null!=i)switch(s){case"date":this.modalTriggerData.date=this.$moment.utc(i,"YYYY-MM-DD HH:mm").local().format("YYYY-MM-DDTHH:mm");break;case"hour":this.modalTriggerData.hour=this.$moment.utc(this.$moment().format("YYYY-MM-DD ")+i,"YYYY-MM-DD HH:mm").local().format("HH:mm");break;case"timer":{let t=i.split(","),a=this.$moment(1e3*parseInt(t[0])).utc();this.modalTriggerData.timerh=a.hour(),this.modalTriggerData.timerm=a.minutes(),this.modalTriggerData.timers=a.seconds();break}case"weekday":this.modalTriggerData.weekday=i;break;case"sensor":this.modalTriggerData.sensorId=r,this.modalTriggerData.sensorValue=i;break;case"i/o":this.modalTriggerData.ioId=r,this.modalTriggerData.ioState=i;break;case"in chain":this.modalTriggerData.inChain=i;break;case"pwm state":this.modalTriggerData.pwmId=r,this.modalTriggerData.pwmState=i;break;case"pwm fr":this.modalTriggerData.pwmId=r,this.modalTriggerData.pwmFr=i;break;case"pwm dc":this.modalTriggerData.pwmId=r,this.modalTriggerData.pwmDc=i;break;case"ping":this.modalTriggerData.pingHost=r,this.modalTriggerData.isPinging=i;break;case"rfrecived":this.modalTriggerData.rfId=r,this.modalTriggerData.isReciving=i;break;case"cmd":this.modalTriggerData.cmdId=r,this.modalTriggerData.cmdOutput=i;break;case"i/o link":this.modalTriggerData.lioId=r,this.modalTriggerData.lioState=i;break;case"sensor link":this.modalTriggerData.lrfId=r,this.modalTriggerData.lisReciving=i;break;case"rfrecived link":this.modalTriggerData.lsensorId=r,this.modalTriggerData.lsensorValue=i;break}this.doPosts([this.doQPost("GPIO_PWMnames").then(t=>{for(var a=2;a<t.length-1;a+=2)this.modalTriggerData.pwms.push({id:t[a],name:t[a+1]})}),this.doQPost("GPIO_OInames").then(t=>{for(var a=2;a<t.length-1;a+=2)this.modalTriggerData.ios.push({id:t[a],name:t[a+1]})}),this.doQPost("SENSOR_names").then(t=>{for(var a=2;a<t.length-1;a+=3)this.modalTriggerData.sensors.push({id:t[a],name:t[a+1],unit:t[a+2]})}),this.doQPost("GetRfCodes").then(t=>{for(var a=2;a<t.length-1;a+=8)"Recive"==t[a+2]&&this.modalTriggerData.rfCodes.push({id:t[a],name:t[a+1]})}),this.doQPost("GetCustomCmds").then(t=>{for(var a=2;a<t.length-1;a+=4)this.modalTriggerData.cmds.push({id:t[a],name:t[a+1]})}),this.doQPost("GetLinkedPis;0").then(t=>{for(var a=2;a<t.length-1;a+=6)this.modalTriggerData.linkedPis.push({id:t[a],name:t[a+1]})})]).catch(t=>{this.modalTriggerData.errors.push(t.message)})},modalTriggerAction(t){this.modalTriggerData.errors=[];let a="",e="",s="",o="";if(!t)switch(/^==|<=|>=|<|>|!=$/g.test(this.modalTriggerData.operator)||this.modalTriggerData.errors.push("Avalible operators: ==|<=|>=|<|>|!="),this.modalTriggerData.type){case"date":this.modalTriggerData.date?a=this.$moment(this.modalTriggerData.date,"YYYY-MM-DDTHH:mm").utc().format("YYYY-MM-DD HH:mm"):this.modalTriggerData.errors.push("Date required !");break;case"hour":this.modalTriggerData.hour?a=this.$moment(this.$moment().utc().format("YYYY-MM-DD ")+this.modalTriggerData.hour,"YYYY-MM-DD HH:mm").utc().format("HH:mm"):this.modalTriggerData.errors.push("Time required !");break;case"timer":this.modalTriggerData.timers?(this.modalTriggerData.timerh||(this.modalTriggerData.timerh=0),this.modalTriggerData.timerm||(this.modalTriggerData.timerm=0),a=3600*parseInt(this.modalTriggerData.timerh)+60*parseInt(this.modalTriggerData.timerm)+parseInt(this.modalTriggerData.timers),a=a+","+a+","+(new Date).getTime()/1e3):this.modalTriggerData.errors.push("Timer fields are required !");break;case"weekday":a=this.modalTriggerData.weekday;break;case"sensor":this.modalTriggerData.sensorValue&&this.modalTriggerData.sensorId?(a=this.modalTriggerData.sensorValue,e=this.modalTriggerData.sensorId):this.modalTriggerData.errors.push("Sensor fields are required !");break;case"i/o":this.modalTriggerData.ioId?(a=this.modalTriggerData.ioState,e=this.modalTriggerData.ioId):this.modalTriggerData.errors.push("I/O fields are required !");break;case"in chain":a=this.modalTriggerData.inChain;break;case"pwm state":this.modalTriggerData.pwmId?(a=this.modalTriggerData.pwmState,e=this.modalTriggerData.pwmId):this.modalTriggerData.errors.push("PWM fields are required !");break;case"pwm fr":this.modalTriggerData.pwmFr&&this.modalTriggerData.pwmId?(a=this.modalTriggerData.pwmFr,e=this.modalTriggerData.pwmId):this.modalTriggerData.errors.push("PWM fields are required !");break;case"pwm dc":this.modalTriggerData.pwmDc&&this.modalTriggerData.pwmId?(a=this.modalTriggerData.pwmDc,e=this.modalTriggerData.pwmId):this.modalTriggerData.errors.push("PWM fields are required !");break;case"ping":this.modalTriggerData.pingHost&&this.modalTriggerData.pingHost?(a=this.modalTriggerData.isPinging,e=this.modalTriggerData.pingHost):this.modalTriggerData.errors.push("Ping feilds are required !");break;case"rfrecived":this.modalTriggerData.rfId?(a=this.modalTriggerData.isReciving,e=this.modalTriggerData.rfId):this.modalTriggerData.errors.push("RF fields are required !");break;case"cmd":this.modalTriggerData.cmdOutput&&this.modalTriggerData.cmdId?(a=this.modalTriggerData.cmdOutput,e=this.modalTriggerData.cmdId):this.modalTriggerData.errors.push("Custom command fields are required !");break;case"i/o link":this.modalTriggerData.lioId&&this.modalTriggerData.linkId?(a=this.modalTriggerData.lioState,e=this.modalTriggerData.lioId,s=this.modalTriggerData.linkId,o=this.modalTriggerData.lios.find(t=>t.id==e).name):this.modalTriggerData.errors.push("Linked I/O fields are required !");break;case"sensor link":if(this.modalTriggerData.lsensorValue&&this.modalTriggerData.lsensorId&&this.modalTriggerData.linkId){a=this.modalTriggerData.lsensorValue,e=this.modalTriggerData.lsensorId,s=this.modalTriggerData.linkId;let t=this.modalTriggerData.lsensors.find(t=>t.id==e);o=t.name+"("+t.unit+")"}else this.modalTriggerData.errors.push("Linked Sensor fields are required !");break;case"rfrecived link":this.modalTriggerData.lrfId&&this.modalTriggerData.linkId?(a=this.modalTriggerData.lisReciving,e=this.modalTriggerData.lrfId,s=this.modalTriggerData.linkId,o=this.modalTriggerData.lrfCodes.find(t=>t.id==e).name):this.modalTriggerData.errors.push("Linked RF fields are required !");break}if(!this.modalTriggerData.errors.length){let i="";i=t?"GPIO_ASA_DeleteTrigger;"+this.modalTriggerData.id+";"+this.modalTriggerData.actionId:-1===this.modalTriggerData.id?"GPIO_ASA_AddTrigger;"+this.modalTriggerData.actionId+";"+e+";"+this.modalTriggerData.type+";"+this.modalTriggerData.operator+";"+a+";"+s+";"+o:"GPIO_ASA_UpdateTrigger;"+this.modalTriggerData.actionId+";"+e+";"+this.modalTriggerData.type+";"+this.modalTriggerData.operator+";"+a+";"+this.modalTriggerData.id+";"+s+";"+o,this.doPost(i).then(()=>{this.getActions(),this.modalTriggerData.active=!1}).catch(t=>{this.modalTriggerData.errors.push(t.message)})}},openActionModal(t,a,e,s,o,i,r,l,n,c,d,m,u){this.modalActionData.active=!0,this.modalActionData.title=t,this.modalActionData.name=e,this.modalActionData.id=a,this.modalActionData.type=s,this.modalActionData.outputId=o,this.modalActionData.pwmId=i,this.modalActionData.chainId=r,this.modalActionData.rfId=d,this.modalActionData.cmdId=m,this.modalActionData.noe=l,this.modalActionData.refreshRate=u,"output"==s?this.modalActionData.state=this.actions[c].outputState:"pwm"==s&&(this.modalActionData.state=this.actions[c].pwmSs,this.modalActionData.fr=this.actions[c].pwmFr,this.modalActionData.dc=this.actions[c].pwmDc),this.modalActionData.keepLogs=n,this.modalActionData.errors=[],this.modalActionData.outputs=[],this.modalActionData.pwms=[],this.modalActionData.chains=[],this.modalActionData.rfCodes=[],this.modalActionData.cmds=[],this.doPosts([this.doQPost("GPIO_Oname").then(t=>{for(var a=2;a<t.length-1;a+=4)this.modalActionData.outputs.push({id:t[a],name:t[a+1]})}),this.doQPost("GPIO_PWMnames").then(t=>{for(var a=2;a<t.length-1;a+=2)this.modalActionData.pwms.push({id:t[a],name:t[a+1]})}),this.doQPost("Chain_names").then(t=>{for(var a=2;a<t.length-1;a+=2)this.modalActionData.chains.push({id:t[a],name:t[a+1]})}),this.doQPost("GetRfCodes").then(t=>{for(var a=2;a<t.length-1;a+=8)"Transmit"==t[a+2]&&this.modalActionData.rfCodes.push({id:t[a],name:t[a+1]})}),this.doQPost("GetCustomCmds").then(t=>{for(var a=2;a<t.length-1;a+=4)this.modalActionData.cmds.push({id:t[a],name:t[a+1]})})]).catch(t=>{this.modalActionData.errors.push(t.message)})},modalActionAction(t){if(this.modalActionData.errors=[],t||(this.modalActionData.name||this.modalActionData.errors.push("Name required !"),"output"!=this.modalActionData.type||!isNaN(this.modalActionData.outputId)&&""!=this.modalActionData.outputId&&null!=this.modalActionData.outputId&&-1!=this.modalActionData.outputId||this.modalActionData.errors.push("Output selection is required with this type !"),"pwm"!=this.modalActionData.type||!isNaN(this.modalActionData.pwmId)&&""!=this.modalActionData.pwmId&&null!=this.modalActionData.pwmId&&-1!=this.modalActionData.pwmId||this.modalActionData.errors.push("PWM selection is required with this type !"),"chain"!=this.modalActionData.type||!isNaN(this.modalActionData.chainId)&&""!=this.modalActionData.chainId&&null!=this.modalActionData.chainId&&-1!=this.modalActionData.chainId||this.modalActionData.errors.push("Chain selection is required with this type !"),"rfsend"!=this.modalActionData.type||!isNaN(this.modalActionData.rfId)&&""!=this.modalActionData.rfId&&null!=this.modalActionData.rfId&&-1!=this.modalActionData.rfId||this.modalActionData.errors.push("Rf action selection is required with this type !"),"cmd"!=this.modalActionData.type||!isNaN(this.modalActionData.cmdId)&&""!=this.modalActionData.cmdId&&null!=this.modalActionData.cmdId&&-1!=this.modalActionData.cmdId||this.modalActionData.errors.push("CMD action selection is required with this type !"),this.modalActionData.noe||this.modalActionData.errors.push("Number of executions is required !")),!this.modalActionData.errors.length){let a=-1;"output"==this.modalActionData.type?a=this.modalActionData.outputId:"pwm"==this.modalActionData.type?a=this.modalActionData.pwmId:"chain"==this.modalActionData.type?a=this.modalActionData.chainId:"rfsend"==this.modalActionData.type?a=this.modalActionData.rfId:"cmd"==this.modalActionData.type&&(a=this.modalActionData.cmdId);let e="";e=t?"GPIO_ASA_Delete;"+this.modalActionData.id:-1===this.modalActionData.id?"GPIO_ASA_Add;"+this.modalActionData.name+";"+this.modalActionData.type+";"+a+";"+this.modalActionData.noe+";"+this.modalActionData.state+";"+this.modalActionData.fr+";"+this.modalActionData.dc+";"+ +this.modalActionData.keepLogs+";"+this.modalActionData.refreshRate:"GPIO_ASA_Update;"+this.modalActionData.name+";"+this.modalActionData.type+";"+a+";"+this.modalActionData.noe+";"+this.modalActionData.state+";"+this.modalActionData.fr+";"+this.modalActionData.dc+";"+this.modalActionData.id+";"+ +this.modalActionData.keepLogs+";"+this.modalActionData.refreshRate,this.doPost(e).then(()=>{this.getActions(),this.modalActionData.active=!1}).catch(t=>{this.modalActionData.errors.push(t.message)})}},actionTargetDisc(t){return"output"==this.actions[t].type?this.actions[t].outputName+" "+this.outState(this.actions[t].outputState):"pwm"==this.actions[t].type?this.actions[t].pwmName+" "+this.pwmState(this.actions[t].pwmState,this.actions[t].pwmDc,this.actions[t].pwmFr):"chain"==this.actions[t].type?this.actions[t].chainName+(this.actions[t].outputState?" Execude":" Cancel"):"rfsend"==this.actions[t].type?this.actions[t].rfName+" Transmit":"cmd"==this.actions[t].type?this.actions[t].cmdName+" Execude":void 0},triggerSourceDisc(t,a){let e=this.actions[t].triggers[a],s=e.type;switch("i/o"==e.type?s+=" "+e.ioName:-1!=e.type.search(/pwm/)?s+=" "+e.pwmName:"sensor"==e.type?s+=" "+e.sensorName:"ping"==e.type?s+=" "+e.sourceId:"rfrecived"==e.type?s+=" "+e.rfName:"cmd"==e.type?s+=" "+e.cmdName:"i/o link"==e.type?s="i/o(l) "+e.linkName+":"+e.linkSName:"sensor link"==e.type?s="sensor(l) "+e.linkName+":"+e.linkSName:"rfrecived link"==e.type&&(s="rf(l) "+e.linkName+":"+e.linkSName),s+=" "+e.operator+" ",e.type){case"weekday":s+=this.dayOfWeek(parseInt(e.data));break;case"i/o":case"i/o link":case"pwm state":s+=this.outState(e.data);break;case"sensor":s+=e.data+e.sensorUnit;break;case"hour":s+=this.$moment.utc(this.$moment().utc().format("YYYY-MM-DD ")+e.data,"YYYY-MM-DD HH:mm").local().format("HH:mm");break;case"date":s+=this.$moment.utc(e.data,"YYYY-MM-DD HH:mm").local().format("YYYY-MM-DD HH:mm");break;case"timer":{let t=e.data.split(","),a=this.$moment(1e3*parseInt(t[0])).utc().format("HH:mm:ss"),o=this.$moment(1e3*parseInt(t[1])).utc().format("HH:mm:ss");s+=a+" | "+o;break}default:s+=e.data}return s},conjunctionDefDisc(t){let a="";for(let e=0;e<this.actions[t].triggers.length;e++)a+="#"+this.actions[t].triggers[e].lp+"#",e<this.actions[t].triggers.length-1&&(a+=" and ");return a},dayOfWeek(t){return this.dayNames[t]},startStopAction(t,a){a=a?0:-1,this.doPost("startStopASA;"+t+";"+a).then(()=>{this.getActions()})},getActions(){this.doPost("GPIO_ASAlist").then(t=>{this.$route.meta.error=null,this.actions=[];for(var a=2;a<t.length-1;a+=24){let s=t[a+23].split("$"),o=[];for(var e=0;e<s.length-1;e+=16)o.push({id:parseInt(s[e]),actionId:parseInt(t[a]),sourceId:s[e+1],lp:parseInt(s[e+2]),type:s[e+3],operator:s[e+4],data:s[e+5],ioName:s[e+6],pmwName:s[e+8],sensorName:s[e+9],sensorUnit:s[e+10],rfName:s[e+11],cmdName:s[e+12],linkId:parseInt(s[e+13]),linkSName:s[e+14],linkName:s[e+15]});this.actions.push({id:parseInt(t[a]),type:t[a+1],noe:parseInt(t[a+2]),conjunction:t[a+3],outputId:parseInt(t[a+4]),outputState:parseInt(t[a+5]),pwmId:parseInt(t[a+6]),pwmFr:parseInt(t[a+7]),pwmDc:parseInt(t[a+8]),pwmSs:parseInt(t[a+9]),name:t[a+10],outputName:t[a+11],pwmName:t[a+13],chainId:t[a+14],keepLogs:!!+t[a+15],chainName:t[a+16],rfId:parseInt(t[a+17]),rfName:t[a+18],cmdId:parseInt(t[a+19]),cmdName:t[a+20],refreshRate:parseFloat(t[a+21]),cpuUsage:parseFloat(t[a+22]),triggers:o})}this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},getLinkedData(){this.modalTriggerData.linkId&&(this.modalTriggerData.lios=[],this.modalTriggerData.lsensors=[],this.modalTriggerData.lrfCodes=[],this.doPosts([this.doQPost("CallLinkedPi;"+this.modalTriggerData.linkId+";GPIO_OInames").then(t=>{for(var a=2;a<t.length-1;a+=2)this.modalTriggerData.lios.push({id:t[a],name:t[a+1]})}),this.doQPost("CallLinkedPi;"+this.modalTriggerData.linkId+";SENSOR_names").then(t=>{for(var a=2;a<t.length-1;a+=3)this.modalTriggerData.lsensors.push({id:t[a],name:t[a+1],unit:t[a+2]})}),this.doQPost("CallLinkedPi;"+this.modalTriggerData.linkId+";GetRfCodes").then(t=>{for(var a=2;a<t.length-1;a+=8)"Recive"==t[a+2]&&this.modalTriggerData.lrfCodes.push({id:t[a],name:t[a+1]})})]).catch(t=>{this.modalTriggerData.errors.push(t.message)}))}},components:{Error:M}}),Et=Yt,Bt=Object($["a"])(Et,St,Rt,!1,null,null,null),Mt=Bt.exports,Ot={name:"Actions",components:{Error:M,AdvSA:Mt,LinkedPis:at}},Ht=Ot,jt=Object($["a"])(Ht,xt,Nt,!1,null,null,null),Lt=jt.exports,Gt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"}),e("div",{staticClass:"panel-body"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.logged,expression:"!logged"}],staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"psw"}},[t._v("Password:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordI,expression:"passwordI"}],staticClass:"form-input",attrs:{type:"password",id:"psw"},domProps:{value:t.passwordI},on:{input:function(a){a.target.composing||(t.passwordI=a.target.value)}}}),e("label",{staticClass:"form-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.remember,expression:"remember"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.remember)?t._i(t.remember,null)>-1:t.remember},on:{change:function(a){var e=t.remember,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&(t.remember=e.concat([i])):r>-1&&(t.remember=e.slice(0,r).concat(e.slice(r+1)))}else t.remember=o}}}),e("i",{staticClass:"form-icon"}),t._v(" Remember me")]),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.logged,expression:"!logged"}],staticClass:"btn btn-lg",class:{loading:t.loading},attrs:{disabled:t.loading},on:{click:function(a){return t.login()}}},[t._v("Login")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.logged,expression:"logged"}],staticClass:"logged"},[e("span",[t._v("Logged ")]),e("br"),e("button",{directives:[{name:"show",rawName:"v-show",value:t.logged,expression:"logged"}],staticClass:"btn btn-lg",attrs:{disabled:this.loading},on:{click:function(a){return t.logout()}}},[t._v("Logout")])])])])])},Ft=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Login")])])}],Ut=e("94f8"),qt=e.n(Ut),zt=e("72fe"),Kt=e.n(zt),Wt={name:"login",data(){return{logged:!1,remember:!1,passwordI:""}},mounted(){this.$cookies.isKey("session")&&(this.logged=!0)},methods:{login(){this.$Progress.start(),this.loading=!0,this.$http.post("/",qt()(this.passwordI).toString()+";"+this.encrypt("version_check",Kt()(this.passwordI).toString()),{headers:{"Content-type":"raw"}}).then(t=>{this.$route.meta.error=null;let a=t.data.split(";");Array.isArray(a)?(this.remember?(this.$cookies.set("session",qt()(this.passwordI).toString(),-1),this.$cookies.set("encKey",Kt()(this.passwordI).toString(),-1)):(this.$cookies.set("session",qt()(this.passwordI).toString(),"0"),this.$cookies.set("encKey",Kt()(this.passwordI).toString(),"0")),this.logged=!0,this.$router.push("/")):this.$route.meta.error="Not an array in response"}).catch(t=>{this.$route.meta.error=t.message,this.passwordI="",this.$Progress.fail()}).then(()=>{this.loading=!1})},logout(){this.$cookies.remove("session"),this.$cookies.remove("encKey"),this.logged=!1}},components:{Error:M}},Qt=Wt,Vt=Object($["a"])(Qt,Gt,Ft,!1,null,null,null),Jt=Vt.exports,Xt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"PWM's"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("GPIO_Pwm",{staticClass:"column col-8 col-md-12",attrs:{col:"col-4 col-xl-6 col-md-12"}}),e("History",{staticClass:"column col-4 col-md-12",attrs:{category:"pwm"}})],1)])],1)},Zt=[],ta=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getPwms()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){return t.openModal("Add new pwm","","",!1,"","",-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.gpio,expression:"modalData.gpio"}],staticClass:"form-input",attrs:{type:"text",id:"gpio",placeholder:"Comma separated GPIO BCM numbers"},domProps:{value:t.modalData.gpio},on:{input:function(a){a.target.composing||t.$set(t.modalData,"gpio",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.reverse,expression:"modalData.reverse"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalData.reverse)?t._i(t.modalData.reverse,null)>-1:t.modalData.reverse},on:{change:function(a){var e=t.modalData.reverse,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&t.$set(t.modalData,"reverse",e.concat([i])):r>-1&&t.$set(t.modalData,"reverse",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.modalData,"reverse",o)}}}),e("i",{staticClass:"form-icon"}),t._v("Reverse\n                                    ")])]),e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.fr,expression:"modalData.fr"}],staticClass:"form-input",attrs:{type:"number",id:"fr"},domProps:{value:t.modalData.fr},on:{input:function(a){a.target.composing||t.$set(t.modalData,"fr",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(4),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.dc,expression:"modalData.dc"}],staticClass:"form-input",attrs:{type:"number",id:"dc",min:"0",max:"100"},domProps:{value:t.modalData.dc},on:{input:function(a){a.target.composing||t.$set(t.modalData,"dc",a.target.value)}}})])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalData.id,expression:"modalData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.pwms.length||t.loading?e("div",{staticClass:"columns"},t._l(t.pwms,(function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile"},[e("div",{staticClass:"tile-icon d-grid"},[e("button",{staticClass:"btn btn-action btn-lg",class:[t.stateButton(a.s_s,0)],on:{click:function(a){return t.setSS(s)}}},[e("i",{staticClass:"icon icon-shutdown centered"})]),e("button",{staticClass:"btn btn-link float-right",on:{click:function(e){return t.openModal("Edit "+a.name,a.name,a.gpio,!!a.reverse,a.fr,a.dc,a.id)}}},[e("i",{staticClass:"icon icon-edit"})])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[e("span",[t._v(t._s(a.name))]),e("div",{staticClass:"float-right tooltip tooltip-left low-width",attrs:{"data-tooltip":"Frequency (Hz)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.fr,expression:"pwm.fr"}],staticClass:"form-input input-sm",attrs:{type:"number",disabled:!a.s_s},domProps:{value:a.fr},on:{change:function(a){return t.setDCFR(s)},input:function(e){e.target.composing||t.$set(a,"fr",e.target.value)}}})])]),e("div",{staticClass:"tile-subtitle text-gray"},[e("span",[t._v("GPIO:"+t._s(a.gpio))]),e("div",{staticClass:"float-right tooltip tooltip-left low-width",attrs:{"data-tooltip":"Dutycycle (%)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.dc,expression:"pwm.dc"}],staticClass:"form-input input-sm",attrs:{type:"number",min:"0",max:"100",disabled:!a.s_s},domProps:{value:a.dc},on:{change:function(a){return t.setDCFR(s)},input:function(e){e.target.composing||t.$set(a,"dc",e.target.value)}}})])]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:a.dc,expression:"pwm.dc"}],staticClass:"slider",class:{reverse:!!a.reverse},attrs:{type:"range",min:"0",max:"100",disabled:!a.s_s},domProps:{value:a.dc},on:{change:function(a){return t.setDCFR(s)},__r:function(e){return t.$set(a,"dc",e.target.value)}}})])])])])})),0):e("div",{staticClass:"empty centered"},[t._m(5),e("p",{staticClass:"empty-title h5"},[t._v("There are no pwm's configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openModal("Add new pwm","","",!1,"","",-1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm low-width",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){return t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},aa=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("GPIO Pwms")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"gpio"}},[t._v("GPIO(BCM)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"fr"}},[t._v("Frequency(Hz)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"dc"}},[t._v("Dutycycle(%)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],ea={name:"GPIO_Pwm",data(){return{pwms:[],refreshInterval:"",updateDate:"",changeDate:null,askedChangeDate:null,autoRefreshTime:15,modalData:{active:!1,id:-1,title:"New pwm",name:"",gpio:"",prevsGpios:"",reverse:!1,fr:"",dc:"",errors:[],allUsedPins:[]}}},props:{col:{type:String,default:"col-4 col-lg-6 col-sm-12"}},created(){this.getPwms(),this.$cookies.isKey("pwm_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("pwm_arTime"))),this.autoRefresh()},beforeDestroy(){clearTimeout(this.refreshInterval)},methods:{autoRefresh(){this.$cookies.set("pwm_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(()=>{this.modalData.active||this.checkForChanges(),this.autoRefresh()},1e3*this.autoRefreshTime))},openModal(t,a,e,s,o,i,r){this.modalData.active=!0,this.modalData.title=t,this.modalData.name=a,this.modalData.gpio=e,this.modalData.prevsGpios=e,this.modalData.reverse=s,this.modalData.id=r,this.modalData.fr=o,this.modalData.dc=i,this.modalData.allUsedPins=[],this.modalData.errors=[],this.doPost("AllUsedPins_GPIO;pwm;"+r).then(t=>{for(var a=2;a<t.length-1;a++)this.modalData.allUsedPins.push(t[a])}).catch(t=>{this.modalData.errors.push(t.message)})},modalAction(t){if(this.modalData.errors=[],!t){if(this.modalData.name||this.modalData.errors.push("Name required !"),/^[0-9]+(,[0-9]+)*$/g.test(this.modalData.gpio)){let t=this.modalData.gpio.split(",");var a=this.isGPIOnumber(t);if(-1!=a)this.modalData.errors.push(a+" is not a GPIO BCM number !");else for(let a=0;a<t.length;a++)this.modalData.allUsedPins.indexOf(t[a])>-1&&this.modalData.errors.push(t[a]+" allready in use !")}else this.modalData.errors.push("GPIO must be a number or comma separated numbers !");this.modalData.fr&&this.modalData.dc||this.modalData.errors.push("Initial frequency and dutycycle are required !")}if(!this.modalData.errors.length){let a="";a=t?"Delete_GPIO_pwm;"+this.modalData.id+";"+this.modalData.gpio+";"+this.modalData.name:-1===this.modalData.id?"Add_GPIO_pwm;"+this.modalData.gpio+";"+this.modalData.fr+";"+this.modalData.dc+";"+this.modalData.name+";"+ +this.modalData.reverse+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS"):"Edit_GPIO_pwm;"+this.modalData.id+";"+this.modalData.prevsGpios+";"+this.modalData.gpio+";"+this.modalData.fr+";"+this.modalData.dc+";"+this.modalData.name+";"+ +this.modalData.reverse+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS"),this.doPost(a).then(()=>{this.getPwms(),this.modalData.active=!1}).catch(t=>{this.modalData.errors.push(t.message)})}},getPwms(){this.doPost("GPIO_Plist").then(t=>{this.$route.meta.error=null,this.pwms=[];for(var a=2;a<t.length-1;a+=7)this.pwms.push({id:parseInt(t[a]),gpio:t[a+1],fr:parseInt(t[a+2]),dc:parseInt(t[a+3]),prevFr:parseInt(t[a+2]),prevDc:parseInt(t[a+3]),s_s:parseInt(t[a+4]),name:t[a+5],reverse:parseInt(t[a+6])});this.changeDate=this.$moment.utc().toDate()}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},checkForChanges(){this.loading||this.doPost("GPIO_PEtime").then(t=>{this.$route.meta.error=null,"None"!==t[2]&&(this.askedChangeDate=this.$moment.utc(t[2],"YYYY-MM-DD HH:mm:ss.SSS").toDate(),this.changeDate<this.askedChangeDate&&this.getPwms()),this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},setDCFR(t){this.doPost("GPIO_PFRDC;"+this.pwms[t].id+";"+this.pwms[t].gpio+";"+this.pwms[t].fr+";"+this.pwms[t].dc+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+this.pwms[t].s_s+";1").then(()=>{this.$route.meta.error=null,this.changeDate=this.$moment.utc().toDate(),this.pwms[t].prevFr=this.pwms[t].fr,this.pwms[t].prevDc=this.pwms[t].dc}).catch(a=>{this.pwms[t].fr=this.pwms[t].prevFr,this.pwms[t].dc=this.pwms[t].prevDc,this.$route.meta.error=a.message,this.$forceUpdate()})},setSS(t){this.doPost("GPIO_PSS;"+this.pwms[t].id+";"+this.pwms[t].gpio+";"+this.pwms[t].dc+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS")+";"+ +!this.pwms[t].s_s+";"+this.pwms[t].fr).then(a=>{this.$route.meta.error=null,this.changeDate=this.$moment.utc().toDate(),this.pwms[t].s_s=parseInt(a[4])}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})}},components:{Error:M}},sa=ea,oa=(e("fd84"),Object($["a"])(sa,ta,aa,!1,null,null,null)),ia=oa.exports,ra={name:"PWMs",components:{Error:M,GPIO_Pwm:ia,History:Q}},la=ra,na=Object($["a"])(la,Xt,Zt,!1,null,null,null),ca=na.exports,da=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Chains"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("Chain",{staticClass:"column col-8 col-md-12"}),e("History",{staticClass:"column col-4 col-md-12",attrs:{category:"chain"}})],1)])],1)},ma=[],ua=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getChains()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){return t.openChainModal("Add new execution chain","",-1,1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalChainData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalChainData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalChainData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalChainData.title))]),t.modalChainData.errors.length?e("Error",{attrs:{"error-array":t.modalChainData.errors},on:{"close-err":function(a){t.modalChainData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalChainData.name,expression:"modalChainData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalChainData.name},on:{input:function(a){a.target.composing||t.$set(t.modalChainData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalChainData.countdown,expression:"modalChainData.countdown"}],staticClass:"form-input",attrs:{type:"number",id:"countdown"},domProps:{value:t.modalChainData.countdown},on:{input:function(a){a.target.composing||t.$set(t.modalChainData,"countdown",a.target.value)}}}),e("p",{staticClass:"text-gray text-italic"},[t._v("-1 infinite, 0 disabled or any number for loop countdown")])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalChainData.id,expression:"modalChainData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalChainAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalChainAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"modal",class:{active:t.modalBondData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalBondData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalBondData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalBondData.title))]),t.modalBondData.errors.length?e("Error",{attrs:{"error-array":t.modalBondData.errors},on:{"close-err":function(a){t.modalBondData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.type,expression:"modalBondData.type"}],staticClass:"form-select",attrs:{id:"type"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalBondData,"type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"output"}},[t._v("Output")]),e("option",{attrs:{value:"pwm"}},[t._v("PWM")]),e("option",{attrs:{value:"action"}},[t._v("Check and run automated action")]),e("option",{attrs:{value:"rfsend"}},[t._v("Transmit RF Code")]),e("option",{attrs:{value:"cmd"}},[t._v("Execude custom command")]),e("option",{attrs:{value:"chain"}},[t._v("Execude or cancel other chain")])])])]),e("div",{staticClass:"form-group"},[t._m(4),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.deley,expression:"modalBondData.deley"}],staticClass:"form-input",attrs:{min:"0",type:"number",id:"deley",placeholder:"Single GPIO BCM number"},domProps:{value:t.modalBondData.deley},on:{input:function(a){a.target.composing||t.$set(t.modalBondData,"deley",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.bondLinked,expression:"modalBondData.bondLinked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalBondData.bondLinked)?t._i(t.modalBondData.bondLinked,null)>-1:t.modalBondData.bondLinked},on:{change:[function(a){var e=t.modalBondData.bondLinked,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&t.$set(t.modalBondData,"bondLinked",e.concat([i])):r>-1&&t.$set(t.modalBondData,"bondLinked",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.modalBondData,"bondLinked",o)},function(a){t.modalBondData.linkId=0,t.reFetchTargetsData()}]}}),e("i",{staticClass:"form-icon"}),t._v("Linked pi execute?\n                                    ")])]),t.modalBondData.bondLinked?e("div",{staticClass:"form-group",class:{"has-error":!t.modalBondData.linkedPis.length}},[t._m(5),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.linkId,expression:"modalBondData.linkId"}],staticClass:"form-select",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalBondData,"linkId",a.target.multiple?e:e[0])},function(a){return t.reFetchTargetsData()}]}},t._l(t.modalBondData.linkedPis,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalBondData.linkedPis.length&&!t.loading,expression:"!modalBondData.linkedPis.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add linked pis devices to make them pickable here.")])])]):t._e(),"output"==t.modalBondData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalBondData.outputs.length}},[t._m(6),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.outputId,expression:"modalBondData.outputId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalBondData,"outputId",a.target.multiple?e:e[0])}}},t._l(t.modalBondData.outputs,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalBondData.outputs.length&&!t.loading,expression:"!modalBondData.outputs.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add outputs to make them pickable here.")])])]):"pwm"==t.modalBondData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalBondData.pwms.length}},[t._m(7),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.pwmId,expression:"modalBondData.pwmId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalBondData,"pwmId",a.target.multiple?e:e[0])}}},t._l(t.modalBondData.pwms,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalBondData.pwms.length&&!t.loading,expression:"!modalBondData.pwms.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add PWM's to make them pickable here.")])])]):"action"==t.modalBondData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalBondData.actions.length}},[t._m(8),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.actionId,expression:"modalBondData.actionId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalBondData,"actionId",a.target.multiple?e:e[0])}}},t._l(t.modalBondData.actions,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalBondData.actions.length&&!t.loading,expression:"!modalBondData.actions.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add actions to make them pickable here.")])])]):"rfsend"==t.modalBondData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalBondData.rfCodes.length}},[t._m(9),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.rfId,expression:"modalBondData.rfId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalBondData,"rfId",a.target.multiple?e:e[0])}}},t._l(t.modalBondData.rfCodes,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalBondData.rfCodes.length&&!t.loading,expression:"!modalBondData.rfCodes.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add RF codes to make them pickable here.")])])]):"cmd"==t.modalBondData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalBondData.cmds.length}},[t._m(10),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.cmdId,expression:"modalBondData.cmdId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalBondData,"cmdId",a.target.multiple?e:e[0])}}},t._l(t.modalBondData.cmds,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalBondData.cmds.length&&!t.loading,expression:"!modalBondData.cmds.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add cmd commands to make them pickable here.")])])]):"chain"==t.modalBondData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalBondData.chains.length}},[t._m(11),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.exeChainId,expression:"modalBondData.exeChainId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalBondData,"exeChainId",a.target.multiple?e:e[0])}}},t._l(t.modalBondData.chains,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalBondData.chains.length&&!t.loading,expression:"!modalBondData.chains.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add chains to make them pickable here.")])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:"action"!=t.modalBondData.type&&"rfsend"!=t.modalBondData.type&&"cmd"!=t.modalBondData.type,expression:"modalBondData.type != 'action' && modalBondData.type != 'rfsend' && modalBondData.type != 'cmd'"}],staticClass:"form-group"},[t._m(12),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.state,expression:"modalBondData.state"}],staticClass:"form-select",attrs:{id:"state"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalBondData,"state",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("OFF")]),e("option",{attrs:{value:"1"}},[t._v("ON")]),e("option",{directives:[{name:"show",rawName:"v-show",value:"chain"!=t.modalBondData.type,expression:"modalBondData.type != 'chain'"}],attrs:{value:"2"}},[t._v("OPPOSITE")])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"pwm"==t.modalBondData.type,expression:"modalBondData.type == 'pwm'"}],staticClass:"form-group"},[t._m(13),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.pwmFr,expression:"modalBondData.pwmFr"}],staticClass:"form-input",attrs:{type:"number",id:"fr"},domProps:{value:t.modalBondData.pwmFr},on:{input:function(a){a.target.composing||t.$set(t.modalBondData,"pwmFr",a.target.value)}}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"pwm"==t.modalBondData.type,expression:"modalBondData.type == 'pwm'"}],staticClass:"form-group"},[t._m(14),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalBondData.pwmDc,expression:"modalBondData.pwmDc"}],staticClass:"form-input",attrs:{type:"number",id:"dc",min:"0",max:"100"},domProps:{value:t.modalBondData.pwmDc},on:{input:function(a){a.target.composing||t.$set(t.modalBondData,"pwmDc",a.target.value)}}})])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalBondData.id,expression:"modalBondData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalBondAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalBondAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"modal",class:{active:t.modalReorderData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalReorderData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalReorderData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v("Reorder bonds")]),t.modalReorderData.errors.length?e("Error",{attrs:{"error-array":t.modalReorderData.errors},on:{"close-err":function(a){t.modalReorderData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[t.modalReorderData.bonds.length?e("dl",{staticClass:"list"},t._l(t.modalReorderData.bonds,(function(a,s){return e("dt",{key:a.id},[e("button",{staticClass:"btn btn-link",attrs:{disabled:0==s},on:{click:function(a){return t.reorder(!0,s)}}},[e("i",{staticClass:"icon icon-upward"})]),e("button",{staticClass:"btn btn-link",attrs:{disabled:s==t.modalReorderData.bonds.length-1},on:{click:function(a){return t.reorder(!1,s)}}},[e("i",{staticClass:"icon icon-downward"})]),"action"==a.type?e("span",[t._v(t._s(a.lp+". "+a.actionName+" Execude "+a.deley+"s"))]):"rfsend"==a.type?e("span",[t._v(t._s(a.lp+". "+a.rfName+" Transmit "+a.deley+"s"))]):"output"==a.type?e("span",[t._v(t._s(a.lp+". "+a.outputName+" "+t.outState(a.outputState)+" "+a.deley+"s"))]):"pwm"==a.type?e("span",[t._v(t._s(a.lp+". "+a.pwmName+" "+t.pwmState(a.pwmSs,a.pwmDc,a.pwmFr)+" "+a.deley+"s"))]):"cmd"==a.type?e("span",[t._v(t._s(a.lp+". "+a.cmdName+" Execude "+a.deley+"s"))]):"chain"==a.type?e("span",[t._v(t._s((a.linkId?a.execChainName:t.findChain(a.execChainId).name)+(a.outputState?" Execude ":" Cancel ")+a.deley+"s"))]):t._e()])})),0):e("div",[t._v("No bonds added.")])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalReorderAction()}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.chains.length||t.loading?e("div",{staticClass:"columns"},t._l(t.chains,(function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile"},[e("div",{staticClass:"tile-icon d-grid"},[e("button",{staticClass:"btn btn-action btn-lg",class:{"btn-success":!a.status&&a.bonds.length,"btn-warning":a.status,"btn-code":!a.status&&!a.bonds.length},attrs:{disabled:!a.bonds.length},on:{click:function(a){return t.execudeOrCancel(s)}}},[e("i",{staticClass:"icon icon-forward centered",class:{"icon-forward":!a.status,"icon-stop":a.status}})]),e("button",{staticClass:"btn btn-link",on:{click:function(e){return t.openChainModal("Edit: "+a.name,a.name,a.id,a.countdown)}}},[e("i",{staticClass:"icon icon-edit"})]),e("button",{staticClass:"btn btn-link",on:{click:function(e){return t.openBondModal("Add new chain bond",-1,a.id,"output",1,-1,-1,600,0,0,-1,-1,-1,0,-1)}}},[e("i",{staticClass:"icon icon-plus"})]),e("button",{staticClass:"btn btn-link",attrs:{disabled:a.bonds.length<2||a.status>0},on:{click:function(e){return t.openReorderModal(a.id,s,a.bonds)}}},[e("i",{staticClass:"icon icon-resize-vert"})])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[e("span",[t._v(t._s(a.name))])]),e("div",{staticClass:"tile-subtitle"},[a.bonds.length?e("ol",{staticClass:"list"},t._l(a.bonds,(function(s){return e("li",{key:s.id,class:{"text-warning":s.lp==a.status},on:{click:function(a){return t.openBondModal("Edit bond lp. "+s.lp,s.id,s.chainId,s.type,s.deley,s.outputId,s.pwmId,s.pwmFr,s.pwmDc,"pwm"==s.type?s.pwmSs:s.outputState,s.actionId,s.rfId,s.cmdId,s.linkId,s.execChainId)}}},["action"==s.type?e("button",{staticClass:"btn btn-link"},[t._v(t._s(s.actionName+" Execude "+s.deley+"s"))]):"output"==s.type?e("button",{staticClass:"btn btn-link"},[t._v(t._s(s.outputName+" "+t.outState(s.outputState)+" "+s.deley+"s"))]):"pwm"==s.type?e("button",{staticClass:"btn btn-link"},[t._v(t._s(s.pwmName+" "+t.pwmState(s.pwmSs,s.pwmDc,s.pwmFr)+" "+s.deley+"s"))]):"rfsend"==s.type?e("button",{staticClass:"btn btn-link"},[t._v(t._s(s.rfName+" Transmit "+s.deley+"s"))]):"cmd"==s.type?e("button",{staticClass:"btn btn-link"},[t._v(t._s(s.cmdName+" Execude "+s.deley+"s"))]):"chain"==s.type?e("button",{staticClass:"btn btn-link"},[t._v(t._s((s.linkId?s.execChainName:t.findChain(s.execChainId).name)+(s.outputState?" Execude ":" Cancel ")+s.deley+"s"))]):t._e()])})),0):e("div",[t._v("No bonds added.")])])])])])})),0):e("div",{staticClass:"empty centered"},[t._m(15),e("p",{staticClass:"empty-title h5"},[t._v("There are no chains configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openChainModal("Add new execution chain","",-1,1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){return t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},ha=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Execution chains")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"countdown"}},[t._v("Loop countdown")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Type")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"deley"}},[t._v("Deley(s)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label"},[t._v("Linked pi device")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Output target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("PWM target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Action target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("RF transmit target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Custom command target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Chain target")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"state"}},[t._v("Set state")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"fr"}},[t._v("Set frequency(Hz)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"dc"}},[t._v("Set dutycycle(%)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],pa=(e("55dd"),{name:"Chains",data(){return{chains:[],refreshInterval:"",updateDate:"",autoRefreshTime:5,modalChainData:{active:!1,id:-1,title:"New execution chain",name:"",countdown:1,errors:[]},modalBondData:{active:!1,id:-1,chainId:-1,title:"New chain bond",type:"",deley:1,bondLinked:!1,outputs:[],outputId:-1,pwms:[],pwmId:-1,pwmFr:600,pwmDc:0,state:0,actions:[],actionId:-1,rfId:-1,rfCodes:[],cmdId:-1,cmds:[],linkId:0,linkedPis:[],exeChainId:-1,chains:[],errors:[]},modalReorderData:{active:!1,chainId:-1,chainIndex:-1,bonds:[],errors:[]}}},props:{col:{type:String,default:"col-4 col-xl-6 col-sm-12"}},created(){this.getChains(),this.$cookies.isKey("chain_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("chain_arTime"))),this.autoRefresh()},beforeDestroy(){clearTimeout(this.refreshInterval)},methods:{autoRefresh(){this.$cookies.set("chain_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(()=>{this.modalChainData.active||this.modalBondData.active||this.modalReorderData.active||this.getChains(),this.autoRefresh()},1e3*this.autoRefreshTime))},compare(t,a){let e=0;return t.lp>a.lp?e=1:t.lp<a.lp&&(e=-1),e},openChainModal(t,a,e,s){this.modalChainData.active=!0,this.modalChainData.title=t,this.modalChainData.name=a,this.modalChainData.countdown=s,this.modalChainData.id=e,this.modalChainData.errors=[]},modalChainAction(t){if(this.modalChainData.errors=[],t||this.modalChainData.name||this.modalChainData.errors.push("Name required !"),!this.modalChainData.errors.length){let a="";a=t?"GPIO_ChainDelete;"+this.modalChainData.id:-1===this.modalChainData.id?"GPIO_ChainAdd;"+this.modalChainData.name+";"+this.modalChainData.countdown:"GPIO_ChainUpdate;"+this.modalChainData.id+";"+this.modalChainData.name+";"+this.modalChainData.countdown,this.doPost(a).then(()=>{this.getChains(),this.modalChainData.active=!1}).catch(t=>{this.modalChainData.errors.push(t.message)})}},openBondModal(t,a,e,s,o,i,r,l,n,c,d,m,u,h,p){this.modalBondData.active=!0,this.modalBondData.title=t,this.modalBondData.id=a,this.modalBondData.chainId=e,this.modalBondData.type=s,this.modalBondData.deley=o,this.modalBondData.outputId=i,this.modalBondData.pwmId=r,this.modalBondData.pwmFr=l,this.modalBondData.pwmDc=n,this.modalBondData.state=c,this.modalBondData.actionId=d,this.modalBondData.rfId=m,this.modalBondData.cmdId=u,this.modalBondData.linkId=h,this.modalBondData.exeChainId=p,this.modalBondData.linkedPis=[],this.modalBondData.errors=[],this.modalBondData.bondLinked=!!h,this.reFetchTargetsData(e),this.doPost("GetLinkedPis;0").then(t=>{for(var a=2;a<t.length-1;a+=6)this.modalBondData.linkedPis.push({id:t[a],name:t[a+1]})}).catch(t=>{this.modalBondData.errors.push(t.message)})},modalBondAction(t){if(this.modalBondData.errors=[],t||(this.modalBondData.deley||this.modalBondData.errors.push("Deley is required !"),"output"!=this.modalBondData.type||this.modalBondData.outputId?"pwm"!=this.modalBondData.type||this.modalBondData.pwmId?"action"!=this.modalBondData.type||this.modalBondData.actionId?"rfsend"!=this.modalBondData.type||this.modalBondData.rfId?"cmd"!=this.modalBondData.type||this.modalBondData.cmdId||this.modalBondData.errors.push("Custom command target id is required !"):this.modalBondData.errors.push("Rf transmit target id is required !"):this.modalBondData.errors.push("Action id is required !"):this.modalBondData.errors.push("Pwm id is required !"):this.modalBondData.errors.push("Output id is required !")),!this.modalBondData.errors.length){let a="",e=null,s="";"output"==this.modalBondData.type?(e=this.modalBondData.outputId,s=this.modalBondData.outputs.find(t=>t.id==e).name):"pwm"==this.modalBondData.type?(e=this.modalBondData.pwmId,s=this.modalBondData.pwms.find(t=>t.id==e).name):"action"==this.modalBondData.type?(e=this.modalBondData.actionId,s=this.modalBondData.actions.find(t=>t.id==e).name):"rfsend"==this.modalBondData.type?(e=this.modalBondData.rfId,s=this.modalBondData.rfCodes.find(t=>t.id==e).name):"cmd"==this.modalBondData.type?(e=this.modalBondData.cmdId,s=this.modalBondData.cmds.find(t=>t.id==e).name):"chain"==this.modalBondData.type&&(e=this.modalBondData.exeChainId,s=this.modalBondData.chains.find(t=>t.id==e).name),a=t?"GPIO_ChainBondDelete;"+this.modalBondData.id+";"+this.modalBondData.chainId:-1===this.modalBondData.id?"GPIO_ChainBondAdd;"+this.modalBondData.chainId+";"+this.modalBondData.type+";"+this.modalBondData.deley+";"+e+";"+this.modalBondData.state+";"+this.modalBondData.pwmFr+";"+this.modalBondData.pwmDc+";"+this.modalBondData.linkId+";"+s:"GPIO_ChainBondUpdate;"+this.modalBondData.chainId+";"+this.modalBondData.type+";"+this.modalBondData.deley+";"+e+";"+this.modalBondData.state+";"+this.modalBondData.pwmFr+";"+this.modalBondData.pwmDc+";"+this.modalBondData.id+";"+this.modalBondData.linkId+";"+s,this.doPost(a).then(()=>{this.getChains(),this.modalBondData.active=!1}).catch(t=>{this.modalBondData.errors.push(t.message)})}},openReorderModal(t,a,e){this.modalReorderData.active=!0,this.modalReorderData.chainId=t,this.modalReorderData.chainIndex=a,this.modalReorderData.bonds=e},reorder(t,a){let e=this.modalReorderData.bonds[a];t?(this.modalReorderData.bonds[a]=this.modalReorderData.bonds[a-1],this.modalReorderData.bonds[a].lp++,e.lp--,this.modalReorderData.bonds[a-1]=e):(this.modalReorderData.bonds[a]=this.modalReorderData.bonds[a+1],this.modalReorderData.bonds[a].lp--,e.lp++,this.modalReorderData.bonds[a+1]=e)},findChain(t){return this.chains.find(a=>{return a.id==t})},modalReorderAction(){let t="";for(let a=0;a<this.modalReorderData.bonds.length;a++)t+=this.modalReorderData.bonds[a].lp+"$"+this.modalReorderData.bonds[a].id,a<this.modalReorderData.bonds.length-1&&(t+="$");this.doPost("GPIO_ChainBondsOrder;"+this.modalReorderData.chainId+";"+t).then(()=>{this.chains[this.modalReorderData.chainIndex].bonds=this.modalReorderData.bonds,this.modalReorderData.active=!1}).catch(t=>{this.modalReorderData.errors.push(t.message)})},getChains(){this.doPost("GPIO_ChainList").then(t=>{this.$route.meta.error=null,this.chains=[];for(var a=2;a<t.length-1;a+=6){let s=t[a+5].split("$"),o=[];for(var e=0;e<s.length-1;e+=23){let t=Boolean(parseInt(s[e+19])),a=s[e+21]+":"+s[e+20];o.push({id:parseInt(s[e]),chainId:parseInt(s[e+1]),lp:parseInt(s[e+2]),deley:parseFloat(s[e+3]),type:s[e+4],actionId:parseInt(s[e+5]),outputId:parseInt(s[e+6]),outputState:parseInt(s[e+7]),pwmId:parseInt(s[e+8]),pwmFr:parseInt(s[e+9]),pwmDc:parseInt(s[e+10]),pwmSs:parseInt(s[e+11]),outputName:t?a:s[e+12],pwmName:t?a:s[e+13],actionName:t?a:s[e+14],rfId:parseInt(s[e+15]),rfName:t?a:s[e+16],cmdId:parseInt(s[e+17]),cmdName:t?a:s[e+18],linkId:parseInt(s[e+19]),linkName:s[e+20],linkedDeviceName:s[e+21],execChainId:parseInt(s[e+22]),execChainName:a})}o=o.sort(this.compare),this.chains.push({id:parseInt(t[a]),status:parseInt(t[a+1]),name:t[a+2],countdown:parseInt(t[a+4]),bonds:o})}this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},execudeOrCancel(t){let a="";a=this.chains[t].status?"GPIO_ChainCancel;"+this.chains[t].id:"GPIO_ChainExecute;"+this.chains[t].id,this.doPost(a).then(a=>{this.$route.meta.error=null,"GPIO_ChainExecute"==a[1]?this.chains[t].status=1:"GPIO_ChainCancel"==a[1]&&(this.chains[t].status=0)}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},reFetchTargetsData(t){this.modalBondData.rfCodes=[],this.modalBondData.actions=[],this.modalBondData.pwms=[],this.modalBondData.cmds=[],this.modalBondData.errors=[],this.modalBondData.outputs=[],this.modalBondData.chains=[];let a="";this.modalBondData.linkId&&this.modalBondData.bondLinked&&(a="CallLinkedPi;"+this.modalBondData.linkId+";"),this.modalBondData.bondLinked&&!this.modalBondData.linkId||this.doPosts([this.doQPost(a+"GPIO_Oname").then(t=>{for(var a=2;a<t.length-1;a+=4)this.modalBondData.outputs.push({id:t[a],name:t[a+1]})}),this.doQPost(a+"GPIO_PWMnames").then(t=>{for(var a=2;a<t.length-1;a+=2)this.modalBondData.pwms.push({id:t[a],name:t[a+1]})}),this.doQPost(a+"GPIO_ActionsNames").then(t=>{for(var a=2;a<t.length-1;a+=2)this.modalBondData.actions.push({id:t[a],name:t[a+1]})}),this.doQPost(a+"GetRfCodes").then(t=>{for(var a=2;a<t.length-1;a+=8)"Transmit"==t[a+2]&&this.modalBondData.rfCodes.push({id:t[a],name:t[a+1]})}),this.doQPost(a+"GetCustomCmds").then(t=>{for(var a=2;a<t.length-1;a+=4)this.modalBondData.cmds.push({id:t[a],name:t[a+1]})}),this.doQPost(a+"Chain_names").then(a=>{for(var e=2;e<a.length-1;e+=2)a[e]!=t&&this.modalBondData.chains.push({id:a[e],name:a[e+1]})})]).catch(t=>{this.modalBondData.errors.push(t.message)})}},components:{Error:M}}),va=pa,fa=Object($["a"])(va,ua,ha,!1,null,null,null),ga=fa.exports,Da={name:"Chains",components:{Error:M,Chain:ga,History:Q}},Ca=Da,_a=Object($["a"])(Ca,da,ma,!1,null,null,null),ba=_a.exports,ya=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Sensors"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("SensorList",{staticClass:"column",class:{"col-4":t.selectedIds.length,"col-12":!t.selectedIds.length},attrs:{col:t.whatCol()},on:{selectionChange:function(a){return t.selectedSensorsChange(a)}}}),t.selectedIds.length?e("SensorsHistory",{staticClass:"column col-8",attrs:{sensorsIds:t.selectedIds}}):t._e()],1)])],1)},wa=[],ka=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getSensors()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){return t.openModal("Add new custom sensor:","","",3600,7,"custom","","","",0)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.historyRefresh,expression:"modalData.historyRefresh"}],staticClass:"form-input",attrs:{type:"number",min:"0",id:"hs",placeholder:"In seconds"},domProps:{value:t.modalData.historyRefresh},on:{input:function(a){a.target.composing||t.$set(t.modalData,"historyRefresh",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.historyKeep,expression:"modalData.historyKeep"}],staticClass:"form-input",attrs:{type:"number",min:"1",id:"hk",placeholder:"In days"},domProps:{value:t.modalData.historyKeep},on:{input:function(a){a.target.composing||t.$set(t.modalData,"historyKeep",a.target.value)}}})])]),"custom"==t.modalData.type?e("div",{staticClass:"form-group"},[t._m(4),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.unit,expression:"modalData.unit"}],staticClass:"form-input",attrs:{type:"text",id:"unit",placeholder:"Name"},domProps:{value:t.modalData.unit},on:{input:function(a){a.target.composing||t.$set(t.modalData,"unit",a.target.value)}}})])]):t._e(),"custom"==t.modalData.type?e("div",{staticClass:"form-group"},[t._m(5),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.gpio,expression:"modalData.gpio"}],staticClass:"form-input",attrs:{type:"text",id:"gpio",placeholder:"Gpio pins, comma separated"},domProps:{value:t.modalData.gpio},on:{input:function(a){a.target.composing||t.$set(t.modalData,"gpio",a.target.value)}}})])]):t._e(),"custom"==t.modalData.type?e("div",{staticClass:"form-group"},[t._m(6),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.dataName,expression:"modalData.dataName"}],staticClass:"form-input",attrs:{type:"text",id:"gpio",placeholder:"eg. temperature"},domProps:{value:t.modalData.dataName},on:{input:function(a){a.target.composing||t.$set(t.modalData,"dataName",a.target.value)}}})])]):t._e(),"custom"==t.modalData.type?e("div",{staticClass:"form-group",class:{"has-error":!t.modalData.cmds.length}},[t._m(7),e("div",{staticClass:"col-9 col-sm-12 has-icon-left"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalData.cmdId,expression:"modalData.cmdId"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalData,"cmdId",a.target.multiple?e:e[0])}}},t._l(t.modalData.cmds,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0),e("i",{staticClass:"form-icon",class:{loading:t.loading}}),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.modalData.cmds.length&&!t.loading,expression:"!modalData.cmds.length && !loading"}],staticClass:"form-input-hint"},[t._v("Add custom commands to make them pickable here.")]),e("p",{staticClass:"form-input-hint"},[t._v("Make sure that selected command is returning plain numeric value, otherwise error may occur.")])])]):t._e()])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.clearData()}}},[e("i",{staticClass:"icon icon-cross"}),t._v(" Clear data")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.sensors.length||t.loading?e("div",{staticClass:"columns"},t._l(t.sensors,(function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile tile-centered"},[e("div",{staticClass:"tile-icon"},[e("div",{staticClass:"tile-title text-large text-bold"},[t._v(t._s(a.value+a.unit))])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[t._v(t._s(a.name))]),e("div",{staticClass:"tile-subtitle text-gray "},[t._v(t._s(a.id))])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title text-right"},[t._v(t._s(a.refreshDate))]),e("div",{staticClass:"tile-subtitle text-gray text-right"},[t._v(t._s(a.type))])]),e("div",{staticClass:"tile-action d-grid"},[e("div",{staticClass:"form-group float-right"},[e("label",{staticClass:"form-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.selected,expression:"sensor.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.selected)?t._i(a.selected,null)>-1:a.selected},on:{change:[function(e){var s=a.selected,o=e.target,i=!!o.checked;if(Array.isArray(s)){var r=null,l=t._i(s,r);o.checked?l<0&&t.$set(a,"selected",s.concat([r])):l>-1&&t.$set(a,"selected",s.slice(0,l).concat(s.slice(l+1)))}else t.$set(a,"selected",i)},function(e){return t.setSelection(a.selected,a.id,a.unit,a.name)}]}}),e("i",{staticClass:"form-icon"})])]),e("button",{staticClass:"btn btn-link"},[e("i",{staticClass:"icon icon-edit",on:{click:function(e){return t.openModal("Edit "+a.id,a.name,a.id,a.historyRefresh,a.historyKeep,a.type,a.unit,a.gpio,a.dataName,a.cmdId)}}})]),e("button",{staticClass:"btn btn-link"},[e("i",{staticClass:"icon icon-refresh",on:{click:function(e){return t.refreshSensor(a.id,s)}}})])])])])})),0):e("div",{staticClass:"empty centered"},[t._m(8),e("p",{staticClass:"empty-title h5"},[t._v("There are no sensors configured")])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){return t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},Ta=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Sensors list")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"hs"}},[t._v("History save interval (s)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"hk"}},[t._v("History range back (days)")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"unit"}},[t._v("Unit")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"gpio"}},[t._v("Gpio BCM")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"gpio"}},[t._v("Data name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("Data source")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],$a={name:"SensorsList",data(){return{sensors:[],selectedSensors:[],selectedUnit:"any",refreshInterval:"",updateDate:"",autoRefreshTime:5,modalData:{active:!1,id:"",index:-1,title:"",name:"",historyRefresh:3600,historyKeep:7,type:"custom",unit:"",gpio:"",dataName:"",cmdId:0,cmds:[],errors:[]}}},props:{col:{type:String,default:"col-4 col-md-6 col-xl-12"}},created(){this.getSensors(),this.$cookies.isKey("sensor_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("sensor_arTime"))),this.autoRefresh()},beforeDestroy(){clearTimeout(this.refreshInterval)},methods:{autoRefresh(){this.$cookies.set("sensor_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(()=>{this.modalData.active||this.getSensors(),this.autoRefresh()},1e3*this.autoRefreshTime))},setSelection(t,a,e){t&&0==this.selectedSensors.length?this.selectedUnit=e:t||1!=this.selectedSensors.length||(this.selectedUnit="any"),t&&-1==this.selectedSensors.indexOf(a)?this.selectedSensors.push(a):!t&&this.selectedSensors.indexOf(a)>-1&&this.selectedSensors.splice(this.selectedSensors.indexOf(a),1),this.$emit("selectionChange",this.selectedSensors)},openModal(t,a,e,s,o,i,r,l,n,c){this.modalData.active=!0,this.modalData.title=t,this.modalData.name=a,this.modalData.id=e,this.modalData.historyRefresh=s,this.modalData.historyKeep=o,this.modalData.type=i,this.modalData.unit=r,this.modalData.gpio=l,this.modalData.dataName=n,this.modalData.cmdId=c,this.modalData.errors=[],this.modalData.cmds=[],this.doPost("GetCustomCmds").then(t=>{for(var a=2;a<t.length-1;a+=4)this.modalData.cmds.push({id:t[a],name:t[a+1]})})},modalAction(t){if(this.modalData.errors=[],t||(this.modalData.name||this.modalData.errors.push("Name required !"),this.modalData.historyRefresh||this.modalData.errors.push("History refresh value is required !"),this.modalData.historyKeep||this.modalData.errors.push("History range back value is required !"),this.modalData.cmdId||"custom"!=this.modalData.type||this.modalData.errors.push("Source for custom sensor is required !")),!this.modalData.errors.length){let a="";a=t?"SENSOR_remove;"+this.modalData.id:"custom"==this.modalData.type&&this.modalData.id?"SENSOR_updateCustom;"+this.modalData.id+";"+this.modalData.name+";"+this.modalData.historyRefresh+";"+this.modalData.historyKeep+";"+this.modalData.unit+";"+this.modalData.gpio+";"+this.modalData.dataName+";"+this.modalData.cmdId:this.modalData.id?"SENSOR_update;"+this.modalData.id+";"+this.modalData.name+";"+this.modalData.historyRefresh+";"+this.modalData.historyKeep:"SENSOR_addCustom;"+this.modalData.name+";"+this.modalData.historyRefresh+";"+this.modalData.historyKeep+";"+this.modalData.unit+";"+this.modalData.gpio+";"+this.modalData.dataName+";"+this.modalData.cmdId,this.doPost(a).then(()=>{this.getSensors(),this.modalData.active=!1}).catch(t=>{this.modalData.errors.push(t.message)})}},clearData(){this.doPost("SENSOR_clearhistory;"+this.modalData.id).then(()=>{this.refreshSensor(this.modalData.id),this.modalData.active=!1}).catch(t=>{this.modalData.errors.push(t.message)})},getSensors(){this.doPost("SENSOR_list").then(t=>{this.$route.meta.error=null,this.sensors=[];for(var a=2;a<t.length-1;a+=11)this.sensors.push({id:t[a],name:t[a+1],type:t[a+2],value:parseFloat(t[a+3]),historyRefresh:t[a+4],historyKeep:t[a+5],unit:t[a+6],refreshDate:this.$moment.utc(t[a+7],"YYYY-MM-DD HH:mm:ss").local().format("YYYY-MM-DD HH:mm:ss"),selected:this.selectedSensors.indexOf(t[a])>-1,cmdId:t[a+8],gpio:t[a+9],dataName:t[a+10]});this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},refreshSensor(t,a){this.doPost("SENSOR_refresh;"+t).then(t=>{this.$route.meta.error=null;let e=parseFloat(t[2]);-999==e?this.$route.meta.error="Sensor error":a?this.sensors[a].value=e:this.getSensors()}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})}},components:{Error:M}},Ia=$a,Pa=Object($["a"])(Ia,ka,Ta,!1,null,null,null),Aa=Pa.exports,xa=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),t._m(1),e("div",{staticClass:"panel-body"},[t.datasets.length?e("LineChart",{attrs:{"chart-data":t.chartData,options:t.chartOptions}}):t._e(),t.sensorsHistory.length?e("table",{staticClass:"table table-striped"},[t._m(2),e("tbody",t._l(t.sensorsHistory,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.datelocal))]),e("td",[t._v(t._s(a.value))]),e("td",[t._v(t._s(a.unit))])])})),0)]):e("div",{staticClass:"empty centered"},[t._m(3),e("p",{staticClass:"empty-title h5"},[t._v("There are is no data for selected sensors")])])],1),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))])])])])},Na=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Selected sensors history")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Sensor name")]),e("th",[t._v("Date")]),e("th",[t._v("Value")]),e("th",[t._v("Unit")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],Sa=e("1fca");const Ra=Sa["b"].reactiveProp;var Ya,Ea,Ba={extends:Sa["a"],mixins:[Ra],props:["data","options"],mounted(){this.renderChart(this.chartData,this.options)}},Ma=Ba,Oa=Object($["a"])(Ma,Ya,Ea,!1,null,null,null),Ha=Oa.exports,ja={name:"SensorsHistory",data(){return{updateDate:"",sensorsHistory:[],dateLabels:[],datasets:[],chartData:{},chartOptions:{responsive:!0,maintainAspectRatio:!1,title:{display:!0,text:"Selected sensors history data"},scales:{xAxes:[{type:"time",time:{displayFormats:{second:"H:mm:ss",minute:"H:mm",hour:"H:mm"},tooltipFormat:"YYYY-MM-DD HH:mm:ss"},display:!0,scaleLabel:{display:!0,labelString:"Date/Time"},ticks:{major:{fontStyle:"bold",fontColor:"#FF0000"}}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Value"}}]}}}},props:{sensorsIds:{type:Array}},created(){},beforeDestroy(){},methods:{dynamicColors(){var t=Math.floor(255*Math.random()),a=Math.floor(255*Math.random()),e=Math.floor(255*Math.random());return"rgb("+t+","+a+","+e+")"}},watch:{sensorsIds:{handler:function(t,a){let e="";for(let s=0;s<t.length;s++)e+="'"+t[s]+"'",s<t.length-1&&(e+=",");this.sensorsHistory=[],this.doPost("SENSORS_history;"+e).then(t=>{for(var a=2;a<t.length-1;a+=5)this.sensorsHistory.push({id:t[a],name:t[a+1],unit:t[a+2],dateutc:t[a+3],datelocal:this.$moment.utc(t[a+3],"YYYY-MM-DD HH:mm:ss").local().format("YYYY-MM-DD HH:mm:ss"),value:parseFloat(t[a+4])});for(var e in this.datasets=[],this.sensorsHistory){let t=this.datasets.findIndex(t=>t.id==this.sensorsHistory[e].id),a=this.dynamicColors();-1==t&&(t=this.datasets.push({id:this.sensorsHistory[e].id,label:this.sensorsHistory[e].name,fill:!1,borderColor:a,backgroundColor:a,data:[]})-1),this.datasets[t].data.push({x:this.$moment.utc(this.sensorsHistory[e].dateutc,"YYYY-MM-DD HH:mm:ss").local().toDate(),y:this.sensorsHistory[e].value})}this.chartData={datasets:this.datasets},this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},immediate:!0}},components:{Error:M,LineChart:Ha}},La=ja,Ga=Object($["a"])(La,xa,Na,!1,null,null,null),Fa=Ga.exports,Ua={name:"Sensors",components:{Error:M,SensorList:Aa,SensorsHistory:Fa},data(){return{selectedIds:[]}},methods:{selectedSensorsChange(t){this.selectedIds=t},whatCol(){return this.selectedIds.length?"col-12":"col-4 col-xl-6 col-sm-12"}}},qa=Ua,za=Object($["a"])(qa,ya,wa,!1,null,null,null),Ka=za.exports,Wa=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"RF"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("RfCodes",{staticClass:"column col-6 col-md-12"}),e("RfHistory",{staticClass:"column col-6 col-md-12"})],1)])],1)},Qa=[],Va=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getRfCodes()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){t.openModal(-1,"Add new RF code: ","",t.rx?"Recive":"Transmit","",350,1,t.tx?10:"",24)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.modalData.type,expression:"modalData.type"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.modalData,"type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"Transmit",disabled:!t.tx}},[t._v("Transmit")]),e("option",{attrs:{value:"Recive",disabled:!t.rx}},[t._v("Recive")])])])]),e("div",{staticClass:"form-group"},[t._m(3),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.code,expression:"modalData.code"}],staticClass:"form-input",attrs:{type:"number",id:"code",placeholder:"RF Code"},domProps:{value:t.modalData.code},on:{input:function(a){a.target.composing||t.$set(t.modalData,"code",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(4),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.pulseLength,expression:"modalData.pulseLength"}],staticClass:"form-input",attrs:{min:"0",type:"number",id:"Pulse",placeholder:"Pulse length"},domProps:{value:t.modalData.pulseLength},on:{input:function(a){a.target.composing||t.$set(t.modalData,"pulseLength",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(5),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.protocol,expression:"modalData.protocol"}],staticClass:"form-input",attrs:{min:"1",max:"5",type:"number",id:"Protocol",placeholder:"Protocol"},domProps:{value:t.modalData.protocol},on:{change:function(a){return t.changePulseforProtocol()},input:function(a){a.target.composing||t.$set(t.modalData,"protocol",a.target.value)}}})])]),"Transmit"==t.modalData.type?e("div",{staticClass:"form-group"},[t._m(6),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.repeatTransmit,expression:"modalData.repeatTransmit"}],staticClass:"form-input",attrs:{min:"0",type:"number",id:"repeatTransmit",placeholder:"Repeat transmit"},domProps:{value:t.modalData.repeatTransmit},on:{input:function(a){a.target.composing||t.$set(t.modalData,"repeatTransmit",a.target.value)}}})])]):t._e(),e("div",{staticClass:"form-group"},[t._m(7),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.bitLength,expression:"modalData.bitLength"}],staticClass:"form-input",attrs:{min:"0",type:"number",id:"bitLength",placeholder:"Bit length"},domProps:{value:t.modalData.bitLength},on:{input:function(a){a.target.composing||t.$set(t.modalData,"bitLength",a.target.value)}}})])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalData.id,expression:"modalData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.codes.length||t.loading?e("div",{staticClass:"columns"},t._l(t.codes,(function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile tile-centered"},[e("div",{staticClass:"tile-icon"},["Recive"==a.type?e("button",{staticClass:"btn btn-action btn-lg unclickable"},[e("i",{staticClass:"icon icon-download centered"})]):"Transmit"==a.type?e("button",{staticClass:"btn btn-action btn-lg",class:{"btn-success unclickable":a.transmiting},on:{click:function(e){return t.sendRfCode(a.id,s)}}},[e("i",{staticClass:"icon icon-upload centered"})]):t._e()]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[t._v(t._s(a.name))]),e("div",{staticClass:"tile-subtitle text-gray"},[t._v(t._s(a.code))])]),e("div",{staticClass:"tile-action"},[e("button",{staticClass:"btn btn-link",on:{click:function(e){return t.openModal(a.id,"Edit: "+a.name,a.name,a.type,a.code,a.pulseLength,a.protocol,a.repeatTransmit,a.bitLength)}}},[e("i",{staticClass:"icon icon-edit"})])])])])})),0):e("div",{staticClass:"empty centered"},[t._m(8),e("p",{staticClass:"empty-title h5"},[t._v("There are no rf codes configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){t.openModal(-1,"Add new RF code: ","",t.rx?"Recive":"Transmit","",350,1,t.tx?10:"",24)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){return t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},Ja=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Radio frequency Transmit/Recive Codes")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"gpio"}},[t._v("Type")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"code"}},[t._v("Code")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"Pulse"}},[t._v("Pulse length")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"Protocol"}},[t._v("Protocol")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"repeatTransmit"}},[t._v("Repeat transmit")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"bitLength"}},[t._v("Bit length")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],Xa={name:"RfCodes",data(){return{codes:[],rx:0,tx:0,refreshInterval:"",updateDate:"",autoRefreshTime:5,modalData:{active:!1,id:-1,title:"New RF code",name:"",type:"Transmit",code:"",pulseLength:350,protocol:1,repeatTransmit:10,bitLength:24,errors:[]}}},props:{col:{type:String,default:"col-4 col-lg-6 col-sm-12"}},created(){this.doPost("GetRfPins").then(t=>{this.$route.meta.error=null,this.rx=parseInt(t[2]),this.tx=parseInt(t[3]),this.rx||this.tx?(this.getRfCodes(),this.autoRefresh()):(this.$route.meta.error="RF hardware not configured !",this.$forceUpdate())}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()}),this.$cookies.isKey("rf_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("rf_arTime")))},beforeDestroy(){clearTimeout(this.refreshInterval)},methods:{autoRefresh(){this.$cookies.set("rf_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(()=>{this.modalData.active||this.getRfCodes(),this.autoRefresh()},1e3*this.autoRefreshTime))},openModal(t,a,e,s,o,i,r,l,n){this.modalData.active=!0,this.modalData.id=t,this.modalData.title=a,this.modalData.name=e,this.modalData.type=s,this.modalData.code=o,this.modalData.pulseLength=i,this.modalData.protocol=r,this.modalData.repeatTransmit=l,this.modalData.bitLength=n,this.modalData.errors=[]},modalAction(t){if(this.modalData.errors=[],t||this.modalData.name&&this.modalData.code||this.modalData.errors.push("Name and code are required !"),!this.modalData.errors.length){let a="";a=t?["DeleteRfCode",this.modalData.id].join(";"):-1===this.modalData.id?["AddRfCode",this.modalData.name,this.modalData.type,this.modalData.code,this.modalData.pulseLength,this.modalData.protocol,this.modalData.repeatTransmit,this.modalData.bitLength].join(";"):["UpdateRfCode",this.modalData.id,this.modalData.name,this.modalData.type,this.modalData.code,this.modalData.pulseLength,this.modalData.protocol,this.modalData.repeatTransmit,this.modalData.bitLength].join(";"),this.doPost(a).then(()=>{this.getRfCodes(),this.modalData.active=!1}).catch(t=>{this.modalData.errors.push(t.message)})}},getRfCodes(){this.doPost("GetRfCodes").then(t=>{this.$route.meta.error=null,this.codes=[];for(var a=2;a<t.length-1;a+=8)this.codes.push({id:parseInt(t[a]),name:t[a+1],type:t[a+2],code:t[a+3],pulseLength:t[a+4],protocol:t[a+5],repeatTransmit:t[a+6],bitLength:t[a+7],transmiting:!1});this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},sendRfCode(t,a){this.codes[a].transmiting=!0,this.doPost("SendRfCode;"+t).then(()=>{this.$route.meta.error=null,this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).finally(()=>{this.codes[a].transmiting=!1}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},changePulseforProtocol(){switch(this.modalData.protocol){case"1":this.modalData.pulseLength=350;break;case"2":this.modalData.pulseLength=650;break;case"3":this.modalData.pulseLength=100;break;case"4":this.modalData.pulseLength=380;break;case"5":this.modalData.pulseLength=500;break}}},components:{Error:M}},Za=Xa,te=Object($["a"])(Za,Va,Ja,!1,null,null,null),ae=te.exports,ee=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"input-group filter"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateFrom,expression:"dateFrom"}],staticClass:"form-input input-sm",attrs:{type:"date",placeholder:"Date from"},domProps:{value:t.dateFrom},on:{input:function(a){a.target.composing||(t.dateFrom=a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateTo,expression:"dateTo"}],staticClass:"form-input input-sm",attrs:{type:"date",placeholder:"Date to"},domProps:{value:t.dateTo},on:{input:function(a){a.target.composing||(t.dateTo=a.target.value)}}}),e("button",{staticClass:"btn input-group-btn btn-sm",on:{click:function(a){return t.getHistory()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn btn-sm",on:{click:function(a){t.sniffModalActive=!0}}},[t._v("Sniffer")])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.sniffModalActive}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.sniffModalActive=!1}}}),e("div",{staticClass:"modal-container log-container"},[e("div",{staticClass:"modal-header"},[t._m(1),e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.sniffModalActive=!1}}})]),e("div",{staticClass:"modal-body"},[t.sniffModalActive?e("RfSniffer"):t._e()],1)])]),t.history.length?e("table",{staticClass:"table table-striped"},[t._m(2),e("tbody",t._l(t.history,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.type))]),e("td",[t._v(t._s(a.code))]),e("td",[t._v(t._s(a.date))]),e("td",[t._v(t._s(a.pulseLength))]),e("td",[t._v(t._s(a.protocol))]),e("td",[t._v(t._s(a.bitLength))])])})),0)]):e("div",{staticClass:"empty centered"},[t._m(3),e("p",{staticClass:"empty-title h5"},[t._v("There are is no data in the selected range")])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))]),e("div",{staticClass:"float-right tooltip tooltip-left",attrs:{"data-tooltip":"Auto refresh time (s)"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.autoRefreshTime,expression:"autoRefreshTime"}],staticClass:"form-input input-sm",attrs:{type:"number",id:"autorefresh"},domProps:{value:t.autoRefreshTime},on:{change:function(a){return t.autoRefresh()},input:function(a){a.target.composing||(t.autoRefreshTime=a.target.value)}}})])])])])},se=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("History")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-title h5"},[t._v("RF Sniffer"),e("div",{staticClass:"loading float-right"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Name")]),e("th",[t._v("Type")]),e("th",[t._v("Code")]),e("th",[t._v("Date")]),e("th",[t._v("Pulse length")]),e("th",[t._v("Protocol")]),e("th",[t._v("Bit length")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],oe=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.logs.length?e("table",{staticClass:"table table-striped logs"},[t._m(0),e("tbody",t._l(t.logs,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.time))]),e("td",[t._v(t._s(a.code))]),e("td",[t._v(t._s(a.pulseLength))]),e("td",[t._v(t._s(a.protocol))]),e("td",[t._v(t._s(a.bitLength))])])})),0)]):e("div",{staticClass:"empty centered"},[t._m(1),e("p",{staticClass:"empty-title h5"},[t._v("Nothing here...")])])])},ie=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Time")]),e("th",[t._v("Code")]),e("th",[t._v("Pulse length")]),e("th",[t._v("Protocol")]),e("th",[t._v("Bit length")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],re={name:"RfSniffer",data(){return{logs:[],refreshInterval:"",loading:!1}},created(){this.getData(),this.refreshInterval=setInterval(()=>{this.loading||this.getData()},1e3)},beforeDestroy(){clearInterval(this.refreshInterval)},methods:{getData(){this.loading=!0,this.doQPost("SniffRfCodes").then(t=>{this.logs=[];for(let a=2;a<t.length;a+=5)this.logs.push({code:t[a],pulseLength:t[a+1],protocol:t[a+2],bitLength:t[a+3],time:this.$moment.utc(t[a+4],"YYYY-MM-DD HH:mm:ss.SSS").local().format("HH:mm:ss")})}).finally(()=>{this.loading=!1}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})}}},le=re,ne=Object($["a"])(le,oe,ie,!1,null,null,null),ce=ne.exports,de={name:"RFHistory",data(){return{history:[],sniffModalActive:!1,refreshInterval:"",updateDate:"",autoRefreshTime:5,dateFrom:"",dateTo:""}},created(){this.dateFrom=this.$moment().subtract(7,"days").format("YYYY-MM-DD"),this.dateTo=this.$moment().add(1,"days").format("YYYY-MM-DD"),this.getHistory(),this.$cookies.isKey("hrf_arTime")&&(this.autoRefreshTime=parseInt(this.$cookies.get("hrf_arTime"))),this.autoRefresh()},beforeDestroy(){clearTimeout(this.refreshInterval)},methods:{autoRefresh(){this.$cookies.set("hrf_arTime",this.autoRefreshTime,-1),clearTimeout(this.refreshInterval),this.autoRefreshTime>0&&(this.refreshInterval=setTimeout(()=>{this.getHistory(),this.autoRefresh()},1e3*this.autoRefreshTime))},getHistory(){this.dateFrom&&this.dateTo&&this.doPost("GetRfHistory;"+this.$moment(this.dateFrom,"YYYY-MM-DD").utc().format("YYYY-MM-DD")+";"+this.$moment(this.dateTo+" 23:59:59","YYYY-MM-DD HH:mm:ss").utc().format("YYYY-MM-DD")+";"+this.category).then(t=>{this.$route.meta.error=null,this.history=[];for(var a=2;a<t.length-1;a+=7)this.history.push({name:t[a],type:t[a+1],code:t[a+2],date:this.$moment.utc(t[a+3],"YYYY-MM-DD HH:mm:ss.SSS").local().format("YYYY-MM-DD HH:mm:ss"),pulseLength:t[a+4],protocol:t[a+5],bitLength:t[a+6]});this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})}},components:{Error:M,RfSniffer:ce}},me=de,ue=Object($["a"])(me,ee,se,!1,null,null,null),he=ue.exports,pe={name:"Rfs",components:{Error:M,RfCodes:ae,RfHistory:he}},ve=pe,fe=Object($["a"])(ve,Wa,Qa,!1,null,null,null),ge=fe.exports,De=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"customcmds"},[null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):e("div",{staticClass:"container"},[e("div",{staticClass:"columns"},[e("CustomCmds",{staticClass:"column col-8 col-md-12"}),e("History",{staticClass:"column col-4 col-md-12",attrs:{category:"cmd"}})],1)])],1)},Ce=[],_e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel"},[e("div",{staticClass:"panel-header"},[t._m(0),null!==t.$route.meta.error?e("Error",{attrs:{"error-message":t.$route.meta.error},on:{"close-err":function(a){t.$route.meta.error=null,t.$forceUpdate()}}}):t._e()],1),e("div",{staticClass:"panel-nav"},[e("div",{staticClass:"btn-group btn-group-block float-right"},[e("button",{staticClass:"btn",on:{click:function(a){return t.getCmds()}}},[e("i",{staticClass:"icon icon-refresh centered"})]),e("button",{staticClass:"btn",on:{click:function(a){return t.openModal("Add new cmd",-1,"","",!1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"modal",class:{active:t.modalData.active}},[e("a",{staticClass:"modal-overlay",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("a",{staticClass:"btn btn-clear float-right",attrs:{"aria-label":"Close"},on:{click:function(a){t.modalData.active=!1}}}),e("div",{staticClass:"modal-title h5"},[t._v(t._s(t.modalData.title))]),t.modalData.errors.length?e("Error",{attrs:{"error-array":t.modalData.errors},on:{"close-err":function(a){t.modalData.errors=[]}}}):t._e()],1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"content"},[e("form",{staticClass:"form-horizontal"},[e("div",{staticClass:"form-group"},[t._m(1),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.name,expression:"modalData.name"}],staticClass:"form-input",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.modalData.name},on:{input:function(a){a.target.composing||t.$set(t.modalData,"name",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[t._m(2),e("div",{staticClass:"col-9 col-sm-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.cmd,expression:"modalData.cmd"}],staticClass:"form-input",attrs:{type:"text",id:"cmd",placeholder:"Shell command"},domProps:{value:t.modalData.cmd},on:{input:function(a){a.target.composing||t.$set(t.modalData,"cmd",a.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalData.wait,expression:"modalData.wait"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.modalData.wait)?t._i(t.modalData.wait,null)>-1:t.modalData.wait},on:{change:function(a){var e=t.modalData.wait,s=a.target,o=!!s.checked;if(Array.isArray(e)){var i=null,r=t._i(e,i);s.checked?r<0&&t.$set(t.modalData,"wait",e.concat([i])):r>-1&&t.$set(t.modalData,"wait",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.modalData,"wait",o)}}}),e("i",{staticClass:"form-icon"}),t._v("Wait for command output\n                                    ")])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.modalData.id,expression:"modalData.id !== -1"}],staticClass:"btn btn-code float-left",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!0)}}},[e("i",{staticClass:"icon icon-delete"}),t._v(" Delete")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:this.loading},on:{click:function(a){return t.modalAction(!1)}}},[e("i",{staticClass:"icon icon-check"}),t._v(" Confirm")])])])]),e("div",{staticClass:"container"},[t.cmds.length||t.loading?e("div",{staticClass:"columns"},t._l(t.cmds,(function(a,s){return e("div",{key:a.id,staticClass:"column",class:[t.col]},[e("div",{staticClass:"tile tile-centered"},[e("div",{staticClass:"tile-icon"},[e("button",{staticClass:"btn btn-action btn-lg",class:{"btn-warning":a.running},on:{click:function(e){return t.execCmd(s,a.id)}}},[e("i",{staticClass:"icon icon-forward centered"})])]),e("div",{staticClass:"tile-content"},[e("div",{staticClass:"tile-title"},[t._v(t._s(a.name))]),e("div",{staticClass:"tile-subtitle text-gray"},[t._v(t._s(a.cmd))])]),e("div",{staticClass:"tile-action"},[e("button",{staticClass:"btn btn-link",on:{click:function(e){return t.openModal("Edit: "+a.name,a.id,a.name,a.cmd,a.wait)}}},[e("i",{staticClass:"icon icon-edit"})])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:a.lastOutput,expression:"cmd.lastOutput"}],staticClass:"toast toast-success"},[e("button",{staticClass:"btn btn-clear float-right",on:{click:function(t){a.lastOutput=""}}}),t._v("\n                            "+t._s(a.lastOutput)+"\n                        ")])])})),0):e("div",{staticClass:"empty centered"},[t._m(3),e("p",{staticClass:"empty-title h5"},[t._v("There are no cmds configured")]),e("p",{staticClass:"empty-subtitle"},[t._v("Click the button to configure new")]),e("div",{staticClass:"empty-action"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openModal("Add new cmd",-1,"","",!1)}}},[e("i",{staticClass:"icon icon-plus centered"})])])])])]),e("div",{staticClass:"panel-footer"},[e("span",{staticClass:"text-secondary"},[t._v("Last update: "+t._s(t.updateDate))])])])])},be=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"panel-title"},[e("h3",[t._v("Custom shell commands")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-3 col-sm-12"},[e("label",{staticClass:"form-label",attrs:{for:"cmd"}},[t._v("Command")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"empty-icon"},[e("i",{staticClass:"icon icon-4x icon-cross"})])}],ye={name:"CustomCmds",data(){return{cmds:[],updateDate:"",modalData:{active:!1,id:-1,title:"New cmd",name:"",cmd:"",wait:!1,errors:[]}}},props:{col:{type:String,default:"col-4 col-lg-6 col-sm-12"}},created(){this.getCmds()},methods:{openModal(t,a,e,s,o){this.modalData.active=!0,this.modalData.title=t,this.modalData.name=e,this.modalData.cmd=s,this.modalData.wait=o,this.modalData.id=a,this.modalData.errors=[]},modalAction(t){if(this.modalData.errors=[],t||(this.modalData.name||this.modalData.errors.push("Name required !"),this.modalData.cmd||this.modalData.errors.push("Cmd required !")),!this.modalData.errors.length){let a="";a=t?"DeleteCustomCmd;"+this.modalData.id:-1===this.modalData.id?"AddCustomCmd;"+this.modalData.name+";"+this.modalData.cmd+";"+ +this.modalData.wait+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS"):"UpdateCustomCmd;"+this.modalData.id+";"+this.modalData.name+";"+this.modalData.cmd+";"+ +this.modalData.wait+";"+this.$moment.utc().format("YYYY-MM-DD HH:mm:ss.SSS"),this.doPost(a).then(()=>{this.getCmds(),this.modalData.active=!1}).catch(t=>{this.modalData.errors.push(t.message)})}},getCmds(){this.doPost("GetCustomCmds").then(t=>{this.$route.meta.error=null,this.cmds=[];for(var a=2;a<t.length-1;a+=4)this.cmds.push({id:parseInt(t[a]),name:t[a+1],cmd:t[a+2],wait:Boolean(parseInt(t[a+3])),running:!1,lastOutput:""});this.updateDate=this.$moment().format("YYYY-MM-DD HH:mm:ss.SSS")}).catch(t=>{this.$route.meta.error=t.message,this.$forceUpdate()})},execCmd(t,a){this.cmds[t].running=!0,this.doPost("ExecCustomCmd;"+a+";"+ +this.cmds[t].wait).then(a=>{this.$route.meta.error=null,this.cmds[t].running=!1,this.cmds[t].wait&&(this.cmds[t].lastOutput=a[2])}).catch(a=>{this.cmds[t].running=!1,this.$route.meta.error=a.message,this.$forceUpdate()})}},components:{Error:M}},we=ye,ke=Object($["a"])(we,_e,be,!1,null,null,null),Te=ke.exports,$e={name:"customcmds",components:{Error:M,CustomCmds:Te,History:Q}},Ie=$e,Pe=Object($["a"])(Ie,De,Ce,!1,null,null,null),Ae=Pe.exports,xe=e("2b27"),Ne=e.n(xe);s["a"].use(A["a"]),s["a"].use(Ne.a);const Se=new A["a"]({mode:"history",routes:[{path:"/outputs",name:"outputs",meta:{error:null,protected:!0},component:gt},{path:"/inputs",name:"inputs",meta:{error:null,protected:!0},component:At},{path:"/pwms",name:"pwms",meta:{error:null,protected:!0},component:ca},{path:"/chains",name:"chains",meta:{error:null,protected:!0},component:ba},{path:"/actions",name:"actions",meta:{error:null,protected:!0},component:Lt},{path:"/sensors",name:"sensors",meta:{error:null,protected:!0},component:Ka},{path:"/rf",name:"rf",meta:{error:null,protected:!0},component:ge},{path:"/cmds",name:"customcmds",meta:{error:null,protected:!0},component:Ae},{path:"/",name:"Home",meta:{error:null,protected:!0},component:it},{path:"/login",name:"login",meta:{error:null,protected:!0},component:Jt},{path:"*",meta:{error:"Specfied route not found !",protected:!0},component:it}]});Se.beforeEach((t,a,e)=>{s["a"].axios.post("/","authCheck",{headers:{"Content-type":"raw"}}).then(a=>{a.data?Ne.a.isKey("session")?e():"/login"!==t.path?e("/login"):e():(t.meta.protected=!1,e())}).catch(a=>{t.meta.error=a.message,e()})});var Re=Se;e("7a07"),e("7613"),e("2698");s["a"].config.productionTip=!1,new s["a"]({router:Re,render:t=>t(P)}).$mount("#app")},"64a9":function(t,a,e){},"8e8b":function(t,a,e){},cccb:function(t,a,e){"use strict";var s=e("d563"),o=e.n(s);o.a},cf05:function(t,a,e){t.exports=e.p+"img/logo.d2c96850.png"},d563:function(t,a,e){},fd84:function(t,a,e){"use strict";var s=e("8e8b"),o=e.n(s);o.a}});